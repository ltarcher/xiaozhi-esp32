
e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490d5
--- 0x400490d5: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa220 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa220h (2073120) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa240
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5dd0 data starts 0x2fa248
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa248 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa248 vaddr=3fc9dd00 size=05dd0h ( 24016) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa248, size=0x5dd0, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19ba94 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19ba94h (1686164) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bab4
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2aac data starts 0x49babc
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49babc load_addr 0x3fca3ad0
I (548) esp_image: segment 3: paddr=0049babc vaddr=3fca3ad0 size=02aach ( 10924) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049babc, size=0x2aac, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e568
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e570
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e570 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e570 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e570, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4244
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (664) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (671) esp_image: segment data length 0x20 data starts 0x4b424c
V (676) esp_image: MMU page size 0x10000
V (680) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b424c load_addr 0x600fe000
I (688) esp_image: segment 5: paddr=004b424c vaddr=600fe000 size=00020h (    32) load
D (696) esp_image: free data page_count 0x00000200
D (700) bootloader_flash: rodata starts from paddr=0x004b424c, size=0x20, will be mapped to vaddr=0x3c000000
V (710) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (720) esp_image: image start 0x00100000 end of last section 0x004b426c
I (726) boot: Loaded app from partition at offset 0x100000
I (732) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (740) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (752) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa220
V (759) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (769) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (779) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19ba94
--- 0x42000020: _stext at ??:?
V (786) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (796) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (811) octal_psram: vendor id    : 0x0d (AP)
I (811) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (822) octal_psram: VCC          : 0x01 (3V)
I (826) octal_psram: SRF          : 0x01 (Fast Refresh)
I (831) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (836) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (854) esp_psram: Found 8MB PSRAM device
I (858) esp_psram: Speed: 80MHz
I (861) cpu_start: Multicore app
I (876) cpu_start: Pro cpu start user code
I (876) cpu_start: cpu freq: 240000000 Hz
I (876) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (880) app_init: App version:      1.8.5
I (884) app_init: Compile time:     Aug 16 2025 15:35:20
I (889) app_init: ELF file SHA256:  b6542896e...
I (893) app_init: ESP-IDF:          v5.5
I (897) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (915) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (920) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (925) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (938) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (945) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (950) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (961) main_task: Started on CPU0
I (971) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (971) main_task: Calling app_main()
I (1001) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1001) waveshare_lcd_1_85: I2C bus created successfully
I (1301) waveshare_lcd_1_85: I2C device added successfully
W (1301) waveshare_lcd_1_85: IO expander not available for touch reset
I (1901) waveshare_lcd_1_85: Initialize QSPI bus
I (1901) waveshare_lcd_1_85: Install panel IO
I (1901) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1931) st77916: LCD panel create success, version: 1.0.1
I (2171) Display: Power management not supported
I (2171) WXT185Display: Initializing WXT185 Display
I (2171) WXT185Display: Theme: light
I (2221) WXT185Display: Turning display on
I (2221) WXT185Display: Initialize LVGL library
I (2221) WXT185Display: Initialize LVGL port
I (2221) LVGL: Starting LVGL task
I (2221) WXT185Display: Adding LCD display
I (2231) WXT185Display: Initialized default settings:
I (2231) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2241) WXT185Display: Last activity time initialized to: ld
I (2241) WXT185Display: Screensaver timer created
I (2251) WXT185Display: Crypto update timer created
I (2251) WXT185Display: Screensaver time update timer created
I (2261) WXT185Display: BiJieCoins initialized
I (2261) WXT185Display: Setting up WXT185 UI
I (2261) WXT185Display: Created page view container
I (2271) WXT185Display: Enabling horizontal scrolling
I (2271) WXT185Display: Added touch event handlers to page view
I (2281) WXT185Display: Created common components
I (2281) WXT185Display: Creating chat page
I (2291) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2301) WXT185Display: Chat page creation completed
I (2301) WXT185Display: Created chat page
I (2301) WXT185Display: Creating crypto page
I (2311) WXT185Display: Added touch event handlers to crypto page begin
I (2351) WXT185Display: Crypto page creation completed
I (2351) WXT185Display: Created crypto page
I (2351) WXT185Display: Creating settings page
I (2351) WXT185Display: Settings page background created
I (2361) WXT185Display: Added touch event handlers to settings page begin
I (2371) WXT185Display: Settings title label created
I (2371) WXT185Display: Theme label created
I (2381) WXT185Display: Theme roller created
I (2391) WXT185Display: Default crypto label created
I (2391) WXT185Display: Default crypto roller created
I (2401) WXT185Display: K-line time label created
I (2401) WXT185Display: K-line time roller created
I (2411) WXT185Display: Screensaver label created
I (2411) WXT185Display: Screensaver switch created
I (2411) WXT185Display: Realtime crypto label created
I (2421) WXT185Display: Realtime crypto switch created
I (2421) WXT185Display: KLine crypto label created
I (2421) WXT185Display: KLine crypto switch created
I (2431) WXT185Display: Save button created
I (2431) WXT185Display: Save button label created
I (2431) WXT185Display: Settings page creation completed
I (2441) WXT185Display: Created settings page
I (2441) WXT185Display: Creating screensaver page
I (2451) WXT185Display: Added touch event handlers to screensaver page start
I (2451) WXT185Display: Added touch event handlers to screensaver page end
I (2471) WXT185Display: Screensaver page creation completed
I (2471) WXT185Display: Created screensaver page
I (2471) WXT185Display: Applying theme
I (2471) WXT185Display: Applying crypto page theme
I (2481) WXT185Display: Applying settings page theme
I (2481) WXT185Display: Applying screensaver theme
I (2491) WXT185Display: Theme applied successfully
I (2491) WXT185Display: Applied theme
I (2501) WXT185Display: Started screensaver timer
I (2501) WXT185Display: Crypto update timer started
I (2511) WXT185Display: Started crypto update timer
I (2511) WXT185Display: Connecting to BiJie coins service
I (2511) WXT185Display: Checking device state for network ready
I (2521) WXT185Display: Connected to BiJie coins
I (2521) WXT185Display: Switching to page 1
I (2531) WXT185Display: Switching to crypto page
I (2541) WXT185Display: WXT185 UI setup completed
I (2541) WXT185Display: WXT185Display constructor completed
I (2541) button: IoT Button Version: 4.1.3
I (2551) waveshare_lcd_1_85: Initializing touch controller...
I (2551) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2561) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2571) i2c.master: I2C transaction unexpected nack detected
E (2571) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2581) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2581) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2591) CST816S: read_id(181): I2C read failed
E (2601) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2601) CST816S: Initialization failed!
E (2611) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2611) MCP: Add tool: self.ui.uppage
I (2621) MCP: Add tool: self.ui.downpage
I (2621) Backlight: Set brightness to 75
I (2631) Application: STATE: starting
I (2631) WXT185Display: Device state changed from 0 to 1
I (2631) WXT185Display: Other device state change, treating as user activity
I (2641) WXT185Display: User activity detected, updating last activity time
I (2651) NoAudioCodec: Simplex channels created
I (2651) AudioCodec: Set input enable to true
I (2661) AudioCodec: Set output enable to true
I (2661) AudioCodec: Audio codec started
I (2671) pp: pp rom version: e7ae62f
I (2681) net80211: net80211 rom version: e7ae62f
I (2691) wifi:wifi driver task: 3fcde188, prio:23, stack:6144, core=0
I (2691) wifi:wifi firmware version: f3dbad7
I (2691) wifi:wifi certification version: v7.0
I (2691) wifi:config NVS flash: disabled
I (2691) wifi:config nano formatting: enabled
I (2701) wifi:Init data frame dynamic rx buffer num: 8
I (2701) wifi:Init dynamic rx mgmt buffer num: 5
I (2711) wifi:Init management short buffer num: 32
I (2711) wifi:Init dynamic tx buffer num: 32
I (2711) wifi:Init static tx FG buffer num: 2
I (2721) wifi:Init static rx buffer size: 1600
I (2721) wifi:Init static rx buffer num: 6
I (2731) wifi:Init dynamic rx buffer num: 8
I (2731) wifi_init: rx ba win: 6
I (2731) wifi_init: accept mbox: 6
I (2741) wifi_init: tcpip mbox: 32
I (2741) wifi_init: udp mbox: 6
I (2741) wifi_init: tcp mbox: 6
I (2761) wifi_init: tcp tx win: 5760
I (2761) wifi_init: tcp rx win: 5760
I (2761) wifi_init: tcp mss: 1440
I (2761) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2801) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2801) wifi:enable tsf
I (2981) WXT185Display: Scroll end: (360, 0)
I (2981) WXT185Display: Current page index: 1
I (3501) WXT185Display: Screensaver timer callback triggered
I (3501) WXT185Display: Device is in starting mode, skip screensaver
I (4501) WXT185Display: Screensaver timer callback triggered
I (4501) WXT185Display: Device is in starting mode, skip screensaver
I (5221) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -42, Channel: 11, Authmode: 3
I (5221) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -86, Channel: 11, Authmode: 3
W (5231) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5501) WXT185Display: Screensaver timer callback triggered
I (5501) WXT185Display: Device is in starting mode, skip screensaver


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d46
--- 0x40048d46: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa340 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa340h (2073408) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa360
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5cb0 data starts 0x2fa368
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa368 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa368 vaddr=3fc9dd00 size=05cb0h ( 23728) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa368, size=0x5cb0, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bd20 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bd20h (1686816) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd40
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2bcc data starts 0x49bd48
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd48 load_addr 0x3fca39b0
I (548) esp_image: segment 3: paddr=0049bd48 vaddr=3fca39b0 size=02bcch ( 11212) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd48, size=0x2bcc, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e914
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e91c
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e91c load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e91c vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e91c, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (662) esp_image: loading segment header 5 at offset 0x4b45f0
D (662) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b45f8
V (675) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b45f8 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b45f8 vaddr=600fe000 size=00020h (    32) load
D (694) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b45f8, size=0x20, will be mapped to vaddr=0x3c000000
V (708) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4618
I (725) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (735) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (742) boot: calling set_cache_and_start_app
D (746) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa340
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bd20
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (810) octal_psram: density      : 0x03 (64 Mbit)
I (812) octal_psram: good-die     : 0x01 (Pass)
I (816) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (839) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (844) octal_psram: DriveStrength: 0x00 (1/1)
I (849) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (875) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (882) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  994a24d65...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (899) efuse_init: Max chip rev:     v0.99
I (903) efuse_init: Chip rev:         v0.2
I (907) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (929) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (939) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (955) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1000) waveshare_lcd_1_85: I2C bus created successfully
I (1300) waveshare_lcd_1_85: I2C device added successfully
W (1300) waveshare_lcd_1_85: IO expander not available for touch reset
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (2200) waveshare_lcd_1_85: Initialize QSPI bus
I (2200) waveshare_lcd_1_85: Install panel IO
I (2200) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2230) st77916: LCD panel create success, version: 1.0.1
I (2470) Display: Power management not supported
I (2470) WXT185Display: Initializing WXT185 Display
I (2470) WXT185Display: Theme: light
I (2520) WXT185Display: Turning display on
I (2520) WXT185Display: Initialize LVGL library
I (2520) WXT185Display: Initialize LVGL port
I (2520) LVGL: Starting LVGL task
I (2520) WXT185Display: Adding LCD display
I (2530) WXT185Display: Initialized default settings:
I (2530) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2540) WXT185Display: Last activity time initialized to: ld
I (2540) WXT185Display: Screensaver timer created
I (2550) WXT185Display: Crypto update timer created
I (2550) WXT185Display: Screensaver time update timer created
I (2560) WXT185Display: BiJieCoins initialized
I (2560) WXT185Display: Setting up WXT185 UI
I (2560) WXT185Display: Created page view container
I (2570) WXT185Display: Enabling horizontal scrolling
I (2570) WXT185Display: Added touch event handlers to page view
I (2580) WXT185Display: Created common components
I (2580) WXT185Display: Creating chat page
I (2590) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2600) WXT185Display: Chat page creation completed
I (2600) WXT185Display: Created chat page
I (2600) WXT185Display: Creating crypto page
I (2610) WXT185Display: Added touch event handlers to crypto page begin
I (2650) WXT185Display: Crypto page creation completed
I (2650) WXT185Display: Created crypto page
I (2650) WXT185Display: Creating settings page
I (2650) WXT185Display: Settings page background created
I (2660) WXT185Display: Added touch event handlers to settings page begin
I (2670) WXT185Display: Settings title label created
I (2670) WXT185Display: Theme label created
I (2680) WXT185Display: Theme roller created
I (2690) WXT185Display: Default crypto label created
I (2690) WXT185Display: Default crypto roller created
I (2700) WXT185Display: K-line time label created
I (2700) WXT185Display: K-line time roller created
I (2710) WXT185Display: Screensaver label created
I (2710) WXT185Display: Screensaver switch created
I (2710) WXT185Display: Realtime crypto label created
I (2710) WXT185Display: Realtime crypto switch created
I (2720) WXT185Display: KLine crypto label created
I (2720) WXT185Display: KLine crypto switch created
I (2730) WXT185Display: Save button created
I (2730) WXT185Display: Save button label created
I (2730) WXT185Display: Settings page creation completed
I (2740) WXT185Display: Created settings page
I (2740) WXT185Display: Creating screensaver page
I (2750) WXT185Display: Added touch event handlers to screensaver page start
I (2750) WXT185Display: Added touch event handlers to screensaver page end
I (2770) WXT185Display: Screensaver page creation completed
I (2770) WXT185Display: Created screensaver page
I (2770) WXT185Display: Applying theme
I (2770) WXT185Display: Applying crypto page theme
I (2780) WXT185Display: Applying settings page theme
I (2780) WXT185Display: Applying screensaver theme
I (2790) WXT185Display: Theme applied successfully
I (2790) WXT185Display: Applied theme
I (2800) WXT185Display: Started screensaver timer
I (2800) WXT185Display: Crypto update timer started
I (2800) WXT185Display: Started crypto update timer
I (2810) WXT185Display: Connecting to BiJie coins service
I (2810) WXT185Display: Checking device state for network ready
I (2820) WXT185Display: Connected to BiJie coins
I (2820) WXT185Display: Switching to page 1
I (2830) WXT185Display: Switching to crypto page
I (2840) WXT185Display: WXT185 UI setup completed
I (2840) WXT185Display: WXT185Display constructor completed
I (2840) button: IoT Button Version: 4.1.3
I (2850) waveshare_lcd_1_85: Initializing touch controller...
I (2850) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2860) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2870) i2c.master: I2C transaction unexpected nack detected
E (2870) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2880) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2880) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2890) CST816S: read_id(181): I2C read failed
E (2900) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2900) CST816S: Initialization failed!
E (2900) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2910) MCP: Add tool: self.ui.uppage
I (2920) MCP: Add tool: self.ui.downpage
I (2920) Backlight: Set brightness to 75
I (2920) Application: STATE: starting
I (2930) WXT185Display: Device state changed from 0 to 1
I (2930) WXT185Display: Other device state change, treating as user activity
I (2940) WXT185Display: User activity detected, updating last activity time
I (2950) NoAudioCodec: Simplex channels created
I (2950) AudioCodec: Set input enable to true
I (2950) AudioCodec: Set output enable to true
I (2960) AudioCodec: Audio codec started
I (2970) pp: pp rom version: e7ae62f
I (2970) net80211: net80211 rom version: e7ae62f
I (2980) wifi:wifi driver task: 3fcde218, prio:23, stack:6144, core=0
I (2980) wifi:wifi firmware version: f3dbad7
I (2980) wifi:wifi certification version: v7.0
I (2980) wifi:config NVS flash: disabled
I (2990) wifi:config nano formatting: enabled
I (2990) wifi:Init data frame dynamic rx buffer num: 8
I (3000) wifi:Init dynamic rx mgmt buffer num: 5
I (3000) wifi:Init management short buffer num: 32
I (3010) wifi:Init dynamic tx buffer num: 32
I (3010) wifi:Init static tx FG buffer num: 2
I (3010) wifi:Init static rx buffer size: 1600
I (3020) wifi:Init static rx buffer num: 6
I (3020) wifi:Init dynamic rx buffer num: 8
I (3030) wifi_init: rx ba win: 6
I (3030) wifi_init: accept mbox: 6
I (3030) wifi_init: tcpip mbox: 32
I (3030) wifi_init: udp mbox: 6
I (3040) wifi_init: tcp mbox: 6
I (3040) wifi_init: tcp tx win: 5760
I (3040) wifi_init: tcp rx win: 5760
I (3050) wifi_init: tcp mss: 1440
I (3050) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3100) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3100) wifi:enable tsf
I (3280) WXT185Display: Scroll end: (360, 0)
I (3280) WXT185Display: Current page index: 1


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490cc
--- 0x400490cc: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa340 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa340h (2073408) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa360
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5cb0 data starts 0x2fa368
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa368 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa368 vaddr=3fc9dd00 size=05cb0h ( 23728) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa368, size=0x5cb0, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bd20 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bd20h (1686816) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd40
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2bcc data starts 0x49bd48
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd48 load_addr 0x3fca39b0
I (548) esp_image: segment 3: paddr=0049bd48 vaddr=3fca39b0 size=02bcch ( 11212) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd48, size=0x2bcc, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e914
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e91c
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e91c load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e91c vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e91c, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (662) esp_image: loading segment header 5 at offset 0x4b45f0
D (662) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b45f8
V (675) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b45f8 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b45f8 vaddr=600fe000 size=00020h (    32) load
D (694) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b45f8, size=0x20, will be mapped to vaddr=0x3c000000
V (708) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4618
I (725) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (735) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (742) boot: calling set_cache_and_start_app
D (746) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa340
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bd20
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (810) octal_psram: density      : 0x03 (64 Mbit)
I (812) octal_psram: good-die     : 0x01 (Pass)
I (816) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (839) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (844) octal_psram: DriveStrength: 0x00 (1/1)
I (849) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (875) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (882) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d7ffb5ea0...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (899) efuse_init: Max chip rev:     v0.99
I (903) efuse_init: Chip rev:         v0.2
I (907) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (929) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (939) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (955) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
I (1900) waveshare_lcd_1_85: I2C device added successfully
W (1900) waveshare_lcd_1_85: IO expander not available for touch reset
W (2200) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (2200) waveshare_lcd_1_85: Initialize QSPI bus
I (2200) waveshare_lcd_1_85: Install panel IO
I (2200) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2240) st77916: LCD panel create success, version: 1.0.1
I (2480) Display: Power management not supported
I (2480) WXT185Display: Initializing WXT185 Display
I (2480) WXT185Display: Theme: light
I (2530) WXT185Display: Turning display on
I (2530) WXT185Display: Initialize LVGL library
I (2530) WXT185Display: Initialize LVGL port
I (2530) LVGL: Starting LVGL task
I (2530) WXT185Display: Adding LCD display
I (2540) WXT185Display: Initialized default settings:
I (2540) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2550) WXT185Display: Last activity time initialized to: ld
I (2550) WXT185Display: Screensaver timer created
I (2560) WXT185Display: Crypto update timer created
I (2560) WXT185Display: Screensaver time update timer created
I (2570) WXT185Display: BiJieCoins initialized
I (2570) WXT185Display: Setting up WXT185 UI
I (2570) WXT185Display: Created page view container
I (2580) WXT185Display: Enabling horizontal scrolling
I (2580) WXT185Display: Added touch event handlers to page view
I (2590) WXT185Display: Created common components
I (2590) WXT185Display: Creating chat page
I (2600) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2610) WXT185Display: Chat page creation completed
I (2610) WXT185Display: Created chat page
I (2610) WXT185Display: Creating crypto page
I (2620) WXT185Display: Added touch event handlers to crypto page begin
I (2660) WXT185Display: Crypto page creation completed
I (2660) WXT185Display: Created crypto page
I (2660) WXT185Display: Creating settings page
I (2660) WXT185Display: Settings page background created
I (2670) WXT185Display: Added touch event handlers to settings page begin
I (2680) WXT185Display: Settings title label created
I (2680) WXT185Display: Theme label created
I (2690) WXT185Display: Theme roller created
I (2700) WXT185Display: Default crypto label created
I (2700) WXT185Display: Default crypto roller created
I (2710) WXT185Display: K-line time label created
I (2710) WXT185Display: K-line time roller created
I (2720) WXT185Display: Screensaver label created
I (2720) WXT185Display: Screensaver switch created
I (2720) WXT185Display: Realtime crypto label created
I (2720) WXT185Display: Realtime crypto switch created
I (2730) WXT185Display: KLine crypto label created
I (2730) WXT185Display: KLine crypto switch created
I (2740) WXT185Display: Save button created
I (2740) WXT185Display: Save button label created
I (2740) WXT185Display: Settings page creation completed
I (2750) WXT185Display: Created settings page
I (2750) WXT185Display: Creating screensaver page
I (2760) WXT185Display: Added touch event handlers to screensaver page start
I (2760) WXT185Display: Added touch event handlers to screensaver page end
I (2780) WXT185Display: Screensaver page creation completed
I (2780) WXT185Display: Created screensaver page
I (2780) WXT185Display: Applying theme
I (2780) WXT185Display: Applying crypto page theme
I (2790) WXT185Display: Applying settings page theme
I (2790) WXT185Display: Applying screensaver theme
I (2800) WXT185Display: Theme applied successfully
I (2800) WXT185Display: Applied theme
I (2810) WXT185Display: Started screensaver timer
I (2810) WXT185Display: Crypto update timer started
I (2810) WXT185Display: Started crypto update timer
I (2820) WXT185Display: Connecting to BiJie coins service
I (2820) WXT185Display: Checking device state for network ready
I (2830) WXT185Display: Connected to BiJie coins
I (2830) WXT185Display: Switching to page 1
I (2840) WXT185Display: Switching to crypto page
I (2850) WXT185Display: WXT185 UI setup completed
I (2850) WXT185Display: WXT185Display constructor completed
I (2850) button: IoT Button Version: 4.1.3
I (2860) waveshare_lcd_1_85: Initializing touch controller...
I (2860) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2870) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2880) i2c.master: I2C transaction unexpected nack detected
E (2880) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2890) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2890) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2900) CST816S: read_id(181): I2C read failed
E (2910) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2910) CST816S: Initialization failed!
E (2910) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2920) MCP: Add tool: self.ui.uppage
I (2930) MCP: Add tool: self.ui.downpage
I (2930) Backlight: Set brightness to 75
I (2930) Application: STATE: starting
I (2940) WXT185Display: Device state changed from 0 to 1
I (2940) WXT185Display: Other device state change, treating as user activity
I (2950) WXT185Display: User activity detected, updating last activity time
I (2960) NoAudioCodec: Simplex channels created
I (2960) AudioCodec: Set input enable to true
I (2960) AudioCodec: Set output enable to true
I (2970) AudioCodec: Audio codec started
I (2980) pp: pp rom version: e7ae62f
I (2980) net80211: net80211 rom version: e7ae62f
I (2990) wifi:wifi driver task: 3fcde24c, prio:23, stack:6144, core=0
I (2990) wifi:wifi firmware version: f3dbad7
I (2990) wifi:wifi certification version: v7.0
I (2990) wifi:config NVS flash: disabled
I (3000) wifi:config nano formatting: enabled
I (3000) wifi:Init data frame dynamic rx buffer num: 8
I (3010) wifi:Init dynamic rx mgmt buffer num: 5
I (3010) wifi:Init management short buffer num: 32
I (3020) wifi:Init dynamic tx buffer num: 32
I (3020) wifi:Init static tx FG buffer num: 2
I (3020) wifi:Init static rx buffer size: 1600
I (3030) wifi:Init static rx buffer num: 6
I (3030) wifi:Init dynamic rx buffer num: 8
I (3040) wifi_init: rx ba win: 6
I (3040) wifi_init: accept mbox: 6
I (3040) wifi_init: tcpip mbox: 32
I (3040) wifi_init: udp mbox: 6
I (3050) wifi_init: tcp mbox: 6
I (3050) wifi_init: tcp tx win: 5760
I (3050) wifi_init: tcp rx win: 5760
I (3060) wifi_init: tcp mss: 1440
I (3060) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3110) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3110) wifi:enable tsf


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d1a
--- 0x40048d1a: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa300 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa300h (2073344) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa320
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5cf0 data starts 0x2fa328
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa328 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa328 vaddr=3fc9dd00 size=05cf0h ( 23792) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa328, size=0x5cf0, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bd00 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bd00h (1686784) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd20
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2b8c data starts 0x49bd28
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd28 load_addr 0x3fca39f0
I (548) esp_image: segment 3: paddr=0049bd28 vaddr=3fca39f0 size=02b8ch ( 11148) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd28, size=0x2b8c, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e8b4
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e8bc
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e8bc load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e8bc vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e8bc, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (662) esp_image: loading segment header 5 at offset 0x4b4590
D (662) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4598
V (675) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4598 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4598 vaddr=600fe000 size=00020h (    32) load
D (694) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4598, size=0x20, will be mapped to vaddr=0x3c000000
V (708) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b45b8
I (725) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (735) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (742) boot: calling set_cache_and_start_app
D (746) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa300
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bd00
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (810) octal_psram: density      : 0x03 (64 Mbit)
I (812) octal_psram: good-die     : 0x01 (Pass)
I (816) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (839) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (844) octal_psram: DriveStrength: 0x00 (1/1)
I (849) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (875) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (882) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  b4e1879ca...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (899) efuse_init: Max chip rev:     v0.99
I (903) efuse_init: Chip rev:         v0.2
I (907) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (929) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (939) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (955) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (2020) waveshare_lcd_1_85: CST816 reset completed via EXIO1
W (2320) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (2320) waveshare_lcd_1_85: Initialize QSPI bus
I (2320) waveshare_lcd_1_85: Install panel IO
I (2320) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2360) st77916: LCD panel create success, version: 1.0.1
I (2600) Display: Power management not supported
I (2600) WXT185Display: Initializing WXT185 Display
I (2600) WXT185Display: Theme: light
I (2650) WXT185Display: Turning display on
I (2650) WXT185Display: Initialize LVGL library
I (2650) WXT185Display: Initialize LVGL port
I (2650) LVGL: Starting LVGL task
I (2650) WXT185Display: Adding LCD display
I (2660) WXT185Display: Initialized default settings:
I (2660) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2670) WXT185Display: Last activity time initialized to: ld
I (2670) WXT185Display: Screensaver timer created
I (2680) WXT185Display: Crypto update timer created
I (2680) WXT185Display: Screensaver time update timer created
I (2690) WXT185Display: BiJieCoins initialized
I (2690) WXT185Display: Setting up WXT185 UI
I (2690) WXT185Display: Created page view container
I (2700) WXT185Display: Enabling horizontal scrolling
I (2700) WXT185Display: Added touch event handlers to page view
I (2710) WXT185Display: Created common components
I (2710) WXT185Display: Creating chat page
I (2720) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2730) WXT185Display: Chat page creation completed
I (2730) WXT185Display: Created chat page
I (2730) WXT185Display: Creating crypto page
I (2740) WXT185Display: Added touch event handlers to crypto page begin
I (2780) WXT185Display: Crypto page creation completed
I (2780) WXT185Display: Created crypto page
I (2780) WXT185Display: Creating settings page
I (2780) WXT185Display: Settings page background created
I (2790) WXT185Display: Added touch event handlers to settings page begin
I (2800) WXT185Display: Settings title label created
I (2800) WXT185Display: Theme label created
I (2810) WXT185Display: Theme roller created
I (2820) WXT185Display: Default crypto label created
I (2820) WXT185Display: Default crypto roller created
I (2830) WXT185Display: K-line time label created
I (2830) WXT185Display: K-line time roller created
I (2840) WXT185Display: Screensaver label created
I (2840) WXT185Display: Screensaver switch created
I (2840) WXT185Display: Realtime crypto label created
I (2840) WXT185Display: Realtime crypto switch created
I (2850) WXT185Display: KLine crypto label created
I (2850) WXT185Display: KLine crypto switch created
I (2860) WXT185Display: Save button created
I (2860) WXT185Display: Save button label created
I (2860) WXT185Display: Settings page creation completed
I (2870) WXT185Display: Created settings page
I (2870) WXT185Display: Creating screensaver page
I (2880) WXT185Display: Added touch event handlers to screensaver page start
I (2880) WXT185Display: Added touch event handlers to screensaver page end
I (2900) WXT185Display: Screensaver page creation completed
I (2900) WXT185Display: Created screensaver page
I (2900) WXT185Display: Applying theme
I (2900) WXT185Display: Applying crypto page theme
I (2910) WXT185Display: Applying settings page theme
I (2910) WXT185Display: Applying screensaver theme
I (2920) WXT185Display: Theme applied successfully
I (2920) WXT185Display: Applied theme
I (2930) WXT185Display: Started screensaver timer
I (2930) WXT185Display: Crypto update timer started
I (2930) WXT185Display: Started crypto update timer
I (2940) WXT185Display: Connecting to BiJie coins service
I (2940) WXT185Display: Checking device state for network ready
I (2950) WXT185Display: Connected to BiJie coins
I (2950) WXT185Display: Switching to page 1
I (2960) WXT185Display: Switching to crypto page
I (2970) WXT185Display: WXT185 UI setup completed
I (2970) WXT185Display: WXT185Display constructor completed
I (2970) button: IoT Button Version: 4.1.3
I (2980) waveshare_lcd_1_85: Initializing touch controller...
I (2980) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2990) waveshare_lcd_1_85: Initialize touch controller CST816S
E (3000) i2c.master: I2C transaction unexpected nack detected
E (3000) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (3010) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (3010) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (3020) CST816S: read_id(181): I2C read failed
E (3030) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3030) CST816S: Initialization failed!
E (3030) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (3040) MCP: Add tool: self.ui.uppage
I (3050) MCP: Add tool: self.ui.downpage
I (3050) Backlight: Set brightness to 75
I (3050) Application: STATE: starting
I (3060) WXT185Display: Device state changed from 0 to 1
I (3060) WXT185Display: Other device state change, treating as user activity
I (3070) WXT185Display: User activity detected, updating last activity time
I (3080) NoAudioCodec: Simplex channels created
I (3080) AudioCodec: Set input enable to true
I (3080) AudioCodec: Set output enable to true
I (3090) AudioCodec: Audio codec started
I (3100) pp: pp rom version: e7ae62f
I (3100) net80211: net80211 rom version: e7ae62f
I (3110) wifi:wifi driver task: 3fcde1ec, prio:23, stack:6144, core=0
I (3110) wifi:wifi firmware version: f3dbad7
I (3110) wifi:wifi certification version: v7.0
I (3110) wifi:config NVS flash: disabled
I (3120) wifi:config nano formatting: enabled
I (3120) wifi:Init data frame dynamic rx buffer num: 8
I (3130) wifi:Init dynamic rx mgmt buffer num: 5
I (3130) wifi:Init management short buffer num: 32
I (3140) wifi:Init dynamic tx buffer num: 32
I (3140) wifi:Init static tx FG buffer num: 2
I (3140) wifi:Init static rx buffer size: 1600
I (3150) wifi:Init static rx buffer num: 6
I (3150) wifi:Init dynamic rx buffer num: 8
I (3160) wifi_init: rx ba win: 6
I (3160) wifi_init: accept mbox: 6
I (3160) wifi_init: tcpip mbox: 32
I (3160) wifi_init: udp mbox: 6
I (3170) wifi_init: tcp mbox: 6
I (3170) wifi_init: tcp tx win: 5760
I (3170) wifi_init: tcp rx win: 5760
I (3180) wifi_init: tcp mss: 1440
I (3180) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3230) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3230) wifi:enable tsf
I (3410) WXT185Display: Scroll end: (360, 0)
I (3410) WXT185Display: Current page index: 1


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d1a
--- 0x40048d1a: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bde4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bde4h (1687012) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be04
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49be0c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be0c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049be0c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be0c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eabc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eac4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eac4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eac4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eac4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4798
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47a0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47a0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47a0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47a0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47c0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bde4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d857d6fa5...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (1700) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1700) waveshare_lcd_1_85: IO expander not available for touch reset
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (1900) waveshare_lcd_1_85: Initialize QSPI bus
I (1900) waveshare_lcd_1_85: Install panel IO
I (1900) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1930) st77916: LCD panel create success, version: 1.0.1
I (2180) Display: Power management not supported
I (2180) WXT185Display: Initializing WXT185 Display
I (2180) WXT185Display: Theme: light
I (2230) WXT185Display: Turning display on
I (2230) WXT185Display: Initialize LVGL library
I (2230) WXT185Display: Initialize LVGL port
I (2230) LVGL: Starting LVGL task
I (2230) WXT185Display: Adding LCD display
I (2240) WXT185Display: Initialized default settings:
I (2240) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2250) WXT185Display: Last activity time initialized to: ld
I (2250) WXT185Display: Screensaver timer created
I (2260) WXT185Display: Crypto update timer created
I (2260) WXT185Display: Screensaver time update timer created
I (2270) WXT185Display: BiJieCoins initialized
I (2270) WXT185Display: Setting up WXT185 UI
I (2270) WXT185Display: Created page view container
I (2280) WXT185Display: Enabling horizontal scrolling
I (2280) WXT185Display: Added touch event handlers to page view
I (2290) WXT185Display: Created common components
I (2290) WXT185Display: Creating chat page
I (2300) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2310) WXT185Display: Chat page creation completed
I (2310) WXT185Display: Created chat page
I (2310) WXT185Display: Creating crypto page
I (2320) WXT185Display: Added touch event handlers to crypto page begin
I (2360) WXT185Display: Crypto page creation completed
I (2360) WXT185Display: Created crypto page
I (2360) WXT185Display: Creating settings page
I (2360) WXT185Display: Settings page background created
I (2370) WXT185Display: Added touch event handlers to settings page begin
I (2380) WXT185Display: Settings title label created
I (2380) WXT185Display: Theme label created
I (2390) WXT185Display: Theme roller created
I (2400) WXT185Display: Default crypto label created
I (2400) WXT185Display: Default crypto roller created
I (2410) WXT185Display: K-line time label created
I (2410) WXT185Display: K-line time roller created
I (2420) WXT185Display: Screensaver label created
I (2420) WXT185Display: Screensaver switch created
I (2420) WXT185Display: Realtime crypto label created
I (2420) WXT185Display: Realtime crypto switch created
I (2430) WXT185Display: KLine crypto label created
I (2430) WXT185Display: KLine crypto switch created
I (2440) WXT185Display: Save button created
I (2440) WXT185Display: Save button label created
I (2440) WXT185Display: Settings page creation completed
I (2450) WXT185Display: Created settings page
I (2450) WXT185Display: Creating screensaver page
I (2460) WXT185Display: Added touch event handlers to screensaver page start
I (2460) WXT185Display: Added touch event handlers to screensaver page end
I (2480) WXT185Display: Screensaver page creation completed
I (2480) WXT185Display: Created screensaver page
I (2480) WXT185Display: Applying theme
I (2480) WXT185Display: Applying crypto page theme
I (2490) WXT185Display: Applying settings page theme
I (2490) WXT185Display: Applying screensaver theme
I (2500) WXT185Display: Theme applied successfully
I (2500) WXT185Display: Applied theme
I (2510) WXT185Display: Started screensaver timer
I (2510) WXT185Display: Crypto update timer started
I (2510) WXT185Display: Started crypto update timer
I (2520) WXT185Display: Connecting to BiJie coins service
I (2520) WXT185Display: Checking device state for network ready
I (2530) WXT185Display: Connected to BiJie coins
I (2530) WXT185Display: Switching to page 1
I (2540) WXT185Display: Switching to crypto page
I (2550) WXT185Display: WXT185 UI setup completed
I (2550) WXT185Display: WXT185Display constructor completed
I (2550) button: IoT Button Version: 4.1.3
I (2560) waveshare_lcd_1_85: Initializing touch controller...
I (2560) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2570) waveshare_lcd_1_85: Initialize touch controller CST816S
I (2580) CST816S: IC id: 181
I (2600) waveshare_lcd_1_85: Touch panel initialized successfully
I (2600) MCP: Add tool: self.ui.uppage
I (2600) MCP: Add tool: self.ui.downpage
I (2600) Backlight: Set brightness to 75
I (2610) Application: STATE: starting
I (2610) WXT185Display: Device state changed from 0 to 1
I (2610) WXT185Display: Other device state change, treating as user activity
I (2620) WXT185Display: User activity detected, updating last activity time
I (2630) NoAudioCodec: Simplex channels created
I (2630) AudioCodec: Set input enable to true
I (2640) AudioCodec: Set output enable to true
I (2640) AudioCodec: Audio codec started
I (2660) pp: pp rom version: e7ae62f
I (2660) net80211: net80211 rom version: e7ae62f
I (2670) wifi:wifi driver task: 3fcde7b4, prio:23, stack:6144, core=0
I (2670) wifi:wifi firmware version: f3dbad7
I (2670) wifi:wifi certification version: v7.0
I (2670) wifi:config NVS flash: disabled
I (2670) wifi:config nano formatting: enabled
I (2680) wifi:Init data frame dynamic rx buffer num: 8
I (2680) wifi:Init dynamic rx mgmt buffer num: 5
I (2690) wifi:Init management short buffer num: 32
I (2690) wifi:Init dynamic tx buffer num: 32
I (2690) wifi:Init static tx FG buffer num: 2
I (2700) wifi:Init static rx buffer size: 1600
I (2700) wifi:Init static rx buffer num: 6
I (2710) wifi:Init dynamic rx buffer num: 8
I (2710) wifi_init: rx ba win: 6
I (2710) wifi_init: accept mbox: 6
I (2720) wifi_init: tcpip mbox: 32
I (2720) wifi_init: udp mbox: 6
I (2720) wifi_init: tcp mbox: 6
I (2730) wifi_init: tcp tx win: 5760
I (2730) wifi_init: tcp rx win: 5760
I (2730) wifi_init: tcp mss: 1440
I (2740) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2780) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2780) wifi:enable tsf


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048ee5
--- 0x40048ee5: recv_packet in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bde4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bde4h (1687012) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be04
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49be0c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be0c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049be0c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be0c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eabc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eac4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eac4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eac4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eac4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4798
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47a0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47a0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47a0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47a0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47c0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bde4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d857d6fa5...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (1700) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1700) waveshare_lcd_1_85: IO expander not available for touch reset
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (1900) waveshare_lcd_1_85: Initialize QSPI bus
I (1900) waveshare_lcd_1_85: Install panel IO
I (1900) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1930) st77916: LCD panel create success, version: 1.0.1
I (2180) Display: Power management not supported
I (2180) WXT185Display: Initializing WXT185 Display
I (2180) WXT185Display: Theme: light
I (2230) WXT185Display: Turning display on
I (2230) WXT185Display: Initialize LVGL library
I (2230) WXT185Display: Initialize LVGL port
I (2230) LVGL: Starting LVGL task
I (2230) WXT185Display: Adding LCD display
I (2240) WXT185Display: Initialized default settings:
I (2240) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2250) WXT185Display: Last activity time initialized to: ld
I (2250) WXT185Display: Screensaver timer created
I (2260) WXT185Display: Crypto update timer created
I (2260) WXT185Display: Screensaver time update timer created
I (2270) WXT185Display: BiJieCoins initialized
I (2270) WXT185Display: Setting up WXT185 UI
I (2270) WXT185Display: Created page view container
I (2280) WXT185Display: Enabling horizontal scrolling
I (2280) WXT185Display: Added touch event handlers to page view
I (2290) WXT185Display: Created common components
I (2290) WXT185Display: Creating chat page
I (2300) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2310) WXT185Display: Chat page creation completed
I (2310) WXT185Display: Created chat page
I (2310) WXT185Display: Creating crypto page
I (2320) WXT185Display: Added touch event handlers to crypto page begin
I (2360) WXT185Display: Crypto page creation completed
I (2360) WXT185Display: Created crypto page
I (2360) WXT185Display: Creating settings page
I (2360) WXT185Display: Settings page background created
I (2370) WXT185Display: Added touch event handlers to settings page begin
I (2380) WXT185Display: Settings title label created
I (2380) WXT185Display: Theme label created
I (2390) WXT185Display: Theme roller created
I (2400) WXT185Display: Default crypto label created
I (2400) WXT185Display: Default crypto roller created
I (2410) WXT185Display: K-line time label created
I (2410) WXT185Display: K-line time roller created
I (2420) WXT185Display: Screensaver label created
I (2420) WXT185Display: Screensaver switch created
I (2420) WXT185Display: Realtime crypto label created
I (2420) WXT185Display: Realtime crypto switch created
I (2430) WXT185Display: KLine crypto label created
I (2430) WXT185Display: KLine crypto switch created
I (2440) WXT185Display: Save button created
I (2440) WXT185Display: Save button label created
I (2440) WXT185Display: Settings page creation completed
I (2450) WXT185Display: Created settings page
I (2450) WXT185Display: Creating screensaver page
I (2460) WXT185Display: Added touch event handlers to screensaver page start
I (2460) WXT185Display: Added touch event handlers to screensaver page end
I (2480) WXT185Display: Screensaver page creation completed
I (2480) WXT185Display: Created screensaver page
I (2480) WXT185Display: Applying theme
I (2480) WXT185Display: Applying crypto page theme
I (2490) WXT185Display: Applying settings page theme
I (2490) WXT185Display: Applying screensaver theme
I (2500) WXT185Display: Theme applied successfully
I (2500) WXT185Display: Applied theme
I (2510) WXT185Display: Started screensaver timer
I (2510) WXT185Display: Crypto update timer started
I (2510) WXT185Display: Started crypto update timer
I (2520) WXT185Display: Connecting to BiJie coins service
I (2520) WXT185Display: Checking device state for network ready
I (2530) WXT185Display: Connected to BiJie coins
I (2530) WXT185Display: Switching to page 1
I (2540) WXT185Display: Switching to crypto page
I (2550) WXT185Display: WXT185 UI setup completed
I (2550) WXT185Display: WXT185Display constructor completed
I (2550) button: IoT Button Version: 4.1.3
I (2560) waveshare_lcd_1_85: Initializing touch controller...
I (2560) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2570) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2580) i2c.master: I2C transaction unexpected nack detected
E (2580) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2590) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2590) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2600) CST816S: read_id(181): I2C read failed
E (2610) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2610) CST816S: Initialization failed!
E (2610) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2620) MCP: Add tool: self.ui.uppage
I (2630) MCP: Add tool: self.ui.downpage
I (2630) Backlight: Set brightness to 75
I (2630) Application: STATE: starting
I (2640) WXT185Display: Device state changed from 0 to 1
I (2640) WXT185Display: Other device state change, treating as user activity
I (2650) WXT185Display: User activity detected, updating last activity time
I (2660) NoAudioCodec: Simplex channels created
I (2660) AudioCodec: Set input enable to true
I (2660) AudioCodec: Set output enable to true
I (2670) AudioCodec: Audio codec started
I (2680) pp: pp rom version: e7ae62f
I (2680) net80211: net80211 rom version: e7ae62f
I (2690) wifi:wifi driver task: 3fcde118, prio:23, stack:6144, core=0
I (2690) wifi:wifi firmware version: f3dbad7
I (2690) wifi:wifi certification version: v7.0
I (2690) wifi:config NVS flash: disabled
I (2700) wifi:config nano formatting: enabled
I (2700) wifi:Init data frame dynamic rx buffer num: 8
I (2710) wifi:Init dynamic rx mgmt buffer num: 5
I (2710) wifi:Init management short buffer num: 32
I (2720) wifi:Init dynamic tx buffer num: 32
I (2720) wifi:Init static tx FG buffer num: 2
I (2720) wifi:Init static rx buffer size: 1600
I (2730) wifi:Init static rx buffer num: 6
I (2730) wifi:Init dynamic rx buffer num: 8
I (2740) wifi_init: rx ba win: 6
I (2740) wifi_init: accept mbox: 6
I (2740) wifi_init: tcpip mbox: 32
I (2740) wifi_init: udp mbox: 6
I (2750) wifi_init: tcp mbox: 6
I (2750) wifi_init: tcp tx win: 5760
I (2750) wifi_init: tcp rx win: 5760
I (2760) wifi_init: tcp mss: 1440
I (2760) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2820) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2820) wifi:enable tsf
I (3000) WXT185Display: Scroll end: (360, 0)
I (3000) WXT185Display: Current page index: 1
I (3510) WXT185Display: Screensaver timer callback triggered
I (3510) WXT185Display: Device is in starting mode, skip screensaver
I (4510) WXT185Display: Screensaver timer callback triggered
I (4510) WXT185Display: Device is in starting mode, skip screensaver
I (5240) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -47, Channel: 11, Authmode: 3
I (5240) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -81, Channel: 11, Authmode: 3
W (5250) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5510) WXT185Display: Screensaver timer callback triggered
I (5510) WXT185Display: Device is in starting mode, skip screensaver
I (6540) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6540) wifi:state: init -> auth (0xb0)
I (6540) WXT185Display: Screensaver timer callback triggered
I (6540) WXT185Display: Device is in starting mode, skip screensaver
I (6550) wifi:state: auth -> assoc (0x0)
I (6560) wifi:state: assoc -> run (0x10)
I (6600) wifi:connected with BSO, aid = 10, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (6610) wifi:security: WPA2-PSK, phy: bgn, rssi: -46
I (6610) wifi:pm start, type: 1

I (6610) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6620) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6700) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7210) wifi:<ba-add>idx:0 (ifx:0, c2:b3:ec:f5:56:c2), tid:0, ssn:1, winSize:64
I (7510) WXT185Display: Screensaver timer callback triggered
I (7510) WXT185Display: Device is in starting mode, skip screensaver
I (7510) WXT185Display: Crypto update timer triggered
I (7810) WXT185Display: Checking device state for network ready
I (7810) wifi: Got IP: 192.168.3.147
I (8510) WXT185Display: Screensaver timer callback triggered
I (8510) WXT185Display: Device is in starting mode, skip screensaver
E (8810) WXT185Display: Network is not ready after waiting
W (8810) WXT185Display: Network not ready, skipping crypto data update
I (8810) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (8810) Application: STATE: activating
I (8820) WXT185Display: Device state changed from 1 to 8
I (8820) WXT185Display: Other device state change, treating as user activity
I (8830) WXT185Display: User activity detected, updating last activity time
I (8840) Ota: Current version: 1.8.5
I (8940) esp-x509-crt-bundle: Certificate validated
E (9320) Dynamic Impl: mbedtls_ssl_fetch_input error=80
E (9320) esp-tls-mbedtls: read error :-0x0050
E (9320) EspSsl: SSL receive failed: -80
I (9330) Ota: Current is the latest version
I (9330) Ota: Running partition: ota_0
I (9340) MCP: Add tool: self.get_device_status
I (9340) MCP: Add tool: self.audio_speaker.set_volume
I (9340) MCP: Add tool: self.screen.set_brightness
I (9350) MCP: Add tool: self.screen.set_theme
I (9350) MQTT: Connecting to endpoint mqtt.xiaozhi.me
I (9470) esp-x509-crt-bundle: Certificate validated
I (9510) WXT185Display: Screensaver timer callback triggered
I (9510) WXT185Display: Device is in activating mode, skip screensaver
I (9770) MQTT: Connected to endpoint
I (9770) Application: STATE: idle
I (9770) WXT185Display: Device state changed from 8 to 3
I (9770) WXT185Display: Device entered idle state
I (9770) WXT185Display: Device idle, updating activity time for screensaver
I (9780) WXT185Display: Setting emotion: neutral
I (9790) MODEL_LOADER: The storage free size is 20864 KB
I (9790) MODEL_LOADER: The partition size is 960 KB
I (9790) MODEL_LOADER: Successfully load srmodels
I (9800) AfeWakeWord: Model 0: wn9_nihaoxiaozhi_tts
I (9800) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v4, mode:0, p:0, (Jun 16 2025 16:18:15)
I (9880) AFE: AFE Version: (1MIC_V250121)
I (9880) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (9890) AFE: AFE Pipeline: [input] ->  -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| -> [output]
I (9900) AfeWakeWord: Audio detection task started, feed size: 512 fetch size: 512
I (9920) WXT185Display: Setting chat message - Role: system, Content: ...
I (9920) WXT185Display: User activity detected, updating last activity time
I (9920) AudioService: Resampling audio from 16000 to 24000
I (9930) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
I (9940) SystemInfo: free sram: 68171 minimal sram: 67235
I (10510) WXT185Display: Screensaver timer callback triggered
I (10530) WXT185Display: Network is ready, current state: 3
I (10530) BiJieCoins: Connecting to BiJie WebSocket for currency 1: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (10530) UniversalWebSocket: Connecting to WebSocket server: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (11240) esp-x509-crt-bundle: Certificate validated
I (11510) WXT185Display: Screensaver timer callback triggered
I (11930) WXT185Display: Connected to BiJie coins WebSocket for currency 1
I (11930) WXT185Display: Getting K-line data for currency 1
I (11930) WXT185Display: Getting initial K-line data for currency 1
I (11930) BiJieCoins: Fetching K-line data from: https://www.528btc.com/e/extend/api/index.php
W (11940) BiJieCoins: K-line data request for currency 1 is already in progress, returning existing data
I (11950) BiJieCoins: Network interface: 0x3fca79a0
I (11960) WXT185Display: Received initial K-line data with 0 points
I (11960) UniversalHttpClient: Creating UniversalHttpClient with network interface: 0x3fca79a0
I (11970) WXT185Display: Drawing K-line chart
I (11970) BiJieCoins: Created UniversalHttpClient: 0x3fce52f0
W (11980) WXT185Display: No market data available for currency ID: 1
I (11990) BiJieCoins: No proxy configured for K-line request
I (12000) BiJieCoins: Opening HTTP connection
I (12000) UniversalHttpClient: Opening HTTP connection - Method: POST, URL: https://www.528btc.com/e/extend/api/index.php?c=coin&id=1&limit=30&m=kline&slug=bitcoin&sortByDate=true&sortByDateRule=false&start=&symbol=BTC&type=2
I (12020) UniversalHttpClient: Using default SSL verification
I (12510) WXT185Display: Screensaver timer callback triggered
I (12510) WXT185Display: Crypto update timer triggered
I (12580) WXT185Display: Checking device state for network ready
I (12580) WXT185Display: Network is ready, current state: 3
I (12580) WXT185Display: Updating crypto data from BiJie service
I (12580) WXT185Display: Drawing K-line chart
W (12590) WXT185Display: No market data available for currency ID: 1
I (12820) esp-x509-crt-bundle: Certificate validated


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d17
--- 0x40048d17: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bde4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bde4h (1687012) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be04
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49be0c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be0c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049be0c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be0c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eabc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eac4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eac4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eac4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eac4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4798
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47a0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47a0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47a0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47a0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47c0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bde4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d857d6fa5...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (1700) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1700) waveshare_lcd_1_85: IO expander not available for touch reset
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (1900) waveshare_lcd_1_85: Initialize QSPI bus
I (1900) waveshare_lcd_1_85: Install panel IO
I (1900) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1930) st77916: LCD panel create success, version: 1.0.1
I (2180) Display: Power management not supported
I (2180) WXT185Display: Initializing WXT185 Display
I (2180) WXT185Display: Theme: light
I (2230) WXT185Display: Turning display on
I (2230) WXT185Display: Initialize LVGL library
I (2230) WXT185Display: Initialize LVGL port
I (2230) LVGL: Starting LVGL task
I (2230) WXT185Display: Adding LCD display
I (2240) WXT185Display: Initialized default settings:
I (2240) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2250) WXT185Display: Last activity time initialized to: ld
I (2250) WXT185Display: Screensaver timer created
I (2260) WXT185Display: Crypto update timer created
I (2260) WXT185Display: Screensaver time update timer created
I (2270) WXT185Display: BiJieCoins initialized
I (2270) WXT185Display: Setting up WXT185 UI
I (2270) WXT185Display: Created page view container
I (2280) WXT185Display: Enabling horizontal scrolling
I (2280) WXT185Display: Added touch event handlers to page view
I (2290) WXT185Display: Created common components
I (2290) WXT185Display: Creating chat page
I (2300) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2310) WXT185Display: Chat page creation completed
I (2310) WXT185Display: Created chat page
I (2310) WXT185Display: Creating crypto page
I (2320) WXT185Display: Added touch event handlers to crypto page begin
I (2360) WXT185Display: Crypto page creation completed
I (2360) WXT185Display: Created crypto page
I (2360) WXT185Display: Creating settings page
I (2360) WXT185Display: Settings page background created
I (2370) WXT185Display: Added touch event handlers to settings page begin
I (2380) WXT185Display: Settings title label created
I (2380) WXT185Display: Theme label created
I (2390) WXT185Display: Theme roller created
I (2400) WXT185Display: Default crypto label created
I (2400) WXT185Display: Default crypto roller created
I (2410) WXT185Display: K-line time label created
I (2410) WXT185Display: K-line time roller created
I (2420) WXT185Display: Screensaver label created
I (2420) WXT185Display: Screensaver switch created
I (2420) WXT185Display: Realtime crypto label created
I (2420) WXT185Display: Realtime crypto switch created
I (2430) WXT185Display: KLine crypto label created
I (2430) WXT185Display: KLine crypto switch created
I (2440) WXT185Display: Save button created
I (2440) WXT185Display: Save button label created
I (2440) WXT185Display: Settings page creation completed
I (2450) WXT185Display: Created settings page
I (2450) WXT185Display: Creating screensaver page
I (2460) WXT185Display: Added touch event handlers to screensaver page start
I (2460) WXT185Display: Added touch event handlers to screensaver page end
I (2480) WXT185Display: Screensaver page creation completed
I (2480) WXT185Display: Created screensaver page
I (2480) WXT185Display: Applying theme
I (2480) WXT185Display: Applying crypto page theme
I (2490) WXT185Display: Applying settings page theme
I (2490) WXT185Display: Applying screensaver theme
I (2500) WXT185Display: Theme applied successfully
I (2500) WXT185Display: Applied theme
I (2510) WXT185Display: Started screensaver timer
I (2510) WXT185Display: Crypto update timer started
I (2510) WXT185Display: Started crypto update timer
I (2520) WXT185Display: Connecting to BiJie coins service
I (2520) WXT185Display: Checking device state for network ready
I (2530) WXT185Display: Connected to BiJie coins
I (2530) WXT185Display: Switching to page 1
I (2540) WXT185Display: Switching to crypto page
I (2550) WXT185Display: WXT185 UI setup completed
I (2550) WXT185Display: WXT185Display constructor completed
I (2550) button: IoT Button Version: 4.1.3
I (2560) waveshare_lcd_1_85: Initializing touch controller...
I (2560) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2570) waveshare_lcd_1_85: Initialize touch controller CST816S
I (2580) CST816S: IC id: 181
I (2600) waveshare_lcd_1_85: Touch panel initialized successfully
I (2600) MCP: Add tool: self.ui.uppage
I (2600) MCP: Add tool: self.ui.downpage
I (2600) Backlight: Set brightness to 75
I (2610) Application: STATE: starting
I (2610) WXT185Display: Device state changed from 0 to 1
I (2610) WXT185Display: Other device state change, treating as user activity
I (2620) WXT185Display: User activity detected, updating last activity time
I (2630) NoAudioCodec: Simplex channels created
I (2630) AudioCodec: Set input enable to true
I (2640) AudioCodec: Set output enable to true
I (2640) AudioCodec: Audio codec started
I (2660) pp: pp rom version: e7ae62f
I (2660) net80211: net80211 rom version: e7ae62f
I (2670) wifi:wifi driver task: 3fcde7ec, prio:23, stack:6144, core=0
I (2670) wifi:wifi firmware version: f3dbad7
I (2670) wifi:wifi certification version: v7.0
I (2670) wifi:config NVS flash: disabled
I (2670) wifi:config nano formatting: enabled
I (2680) wifi:Init data frame dynamic rx buffer num: 8
I (2680) wifi:Init dynamic rx mgmt buffer num: 5
I (2690) wifi:Init management short buffer num: 32
I (2690) wifi:Init dynamic tx buffer num: 32
I (2690) wifi:Init static tx FG buffer num: 2
I (2700) wifi:Init static rx buffer size: 1600
I (2700) wifi:Init static rx buffer num: 6
I (2710) wifi:Init dynamic rx buffer num: 8
I (2710) wifi_init: rx ba win: 6
I (2710) wifi_init: accept mbox: 6
I (2720) wifi_init: tcpip mbox: 32
I (2720) wifi_init: udp mbox: 6
I (2720) wifi_init: tcp mbox: 6
I (2730) wifi_init: tcp tx win: 5760
I (2730) wifi_init: tcp rx win: 5760
I (2730) wifi_init: tcp mss: 1440
I (2740) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2780) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2780) wifi:enable tsf
I (2990) WXT185Display: Scroll end: (360, 0)
I (2990) WXT185Display: Current page index: 1
I (3510) WXT185Display: Screensaver timer callback triggered
I (3510) WXT185Display: Device is in starting mode, skip screensaver
I (4510) WXT185Display: Screensaver timer callback triggered
I (4510) WXT185Display: Device is in starting mode, skip screensaver
I (5200) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -48, Channel: 11, Authmode: 3
I (5200) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -78, Channel: 11, Authmode: 3
W (5200) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5510) WXT185Display: Screensaver timer callback triggered
I (5510) WXT185Display: Device is in starting mode, skip screensaver
I (6500) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6500) wifi:state: init -> auth (0xb0)
I (6510) WXT185Display: Screensaver timer callback triggered
I (6510) WXT185Display: Device is in starting mode, skip screensaver
I (6510) wifi:state: auth -> assoc (0x0)
I (6520) wifi:state: assoc -> run (0x10)
I (6540) wifi:connected with BSO, aid = 9, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (6540) wifi:security: WPA2-PSK, phy: bgn, rssi: -78
I (6540) wifi:pm start, type: 1

I (6540) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6550) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6570) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (6670) wifi:<ba-add>idx:0 (ifx:0, c4:17:0e:4b:bd:b8), tid:0, ssn:0, winSize:64
I (7510) WXT185Display: Screensaver timer callback triggered
I (7510) WXT185Display: Device is in starting mode, skip screensaver
I (7510) WXT185Display: Crypto update timer triggered
I (7520) WXT185Display: Checking device state for network ready
I (7630) wifi: Got IP: 192.168.3.147
E (8520) WXT185Display: Network is not ready after waiting
W (8520) WXT185Display: Network not ready, skipping crypto data update
I (8520) WXT185Display: Screensaver timer callback triggered
I (8520) WXT185Display: Device is in starting mode, skip screensaver
I (8530) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (8540) Application: STATE: activating
I (8540) WXT185Display: Device state changed from 1 to 8
I (8540) WXT185Display: Other device state change, treating as user activity
I (8550) WXT185Display: User activity detected, updating last activity time
I (8560) Ota: Current version: 1.8.5
I (8720) esp-x509-crt-bundle: Certificate validated
I (9120) Ota: Current is the latest version
I (9130) Ota: Running partition: ota_0
I (9130) MCP: Add tool: self.get_device_status
I (9130) MCP: Add tool: self.audio_speaker.set_volume
I (9130) MCP: Add tool: self.screen.set_brightness
I (9140) MCP: Add tool: self.screen.set_theme
I (9140) MQTT: Connecting to endpoint mqtt.xiaozhi.me
I (9270) esp-x509-crt-bundle: Certificate validated
I (9510) WXT185Display: Screensaver timer callback triggered
I (9510) WXT185Display: Device is in activating mode, skip screensaver
I (9730) MQTT: Connected to endpoint
I (9730) Application: STATE: idle
I (9730) WXT185Display: Device state changed from 8 to 3
I (9730) WXT185Display: Device entered idle state
I (9740) WXT185Display: Device idle, updating activity time for screensaver
I (9750) WXT185Display: Setting emotion: neutral
I (9750) MODEL_LOADER: The storage free size is 20864 KB
I (9750) MODEL_LOADER: The partition size is 960 KB
I (9760) MODEL_LOADER: Successfully load srmodels
I (9760) AfeWakeWord: Model 0: wn9_nihaoxiaozhi_tts
I (9770) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v4, mode:0, p:0, (Jun 16 2025 16:18:15)
I (9840) AFE: AFE Version: (1MIC_V250121)
I (9850) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (9850) AFE: AFE Pipeline: [input] ->  -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| -> [output]
I (9860) AfeWakeWord: Audio detection task started, feed size: 512 fetch size: 512
I (9880) WXT185Display: Setting chat message - Role: system, Content: ...
I (9880) WXT185Display: User activity detected, updating last activity time
I (9890) AudioService: Resampling audio from 16000 to 24000
I (9890) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
I (9910) SystemInfo: free sram: 67859 minimal sram: 66803
I (10510) WXT185Display: Screensaver timer callback triggered
I (10530) WXT185Display: Network is ready, current state: 3
I (10530) BiJieCoins: Connecting to BiJie WebSocket for currency 1: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (10530) UniversalWebSocket: Connecting to WebSocket server: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (11270) esp-x509-crt-bundle: Certificate validated


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048e22
--- 0x40048e22: uart_rx_readbuff in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bde4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bde4h (1687012) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be04
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49be0c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be0c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049be0c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be0c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eabc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eac4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eac4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eac4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eac4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4798
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47a0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47a0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47a0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47a0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47c0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bde4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d857d6fa5...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (1700) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1700) waveshare_lcd_1_85: IO expander not available for touch reset
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (1900) waveshare_lcd_1_85: Initialize QSPI bus
I (1900) waveshare_lcd_1_85: Install panel IO
I (1900) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1930) st77916: LCD panel create success, version: 1.0.1
I (2180) Display: Power management not supported
I (2180) WXT185Display: Initializing WXT185 Display
I (2180) WXT185Display: Theme: light
I (2230) WXT185Display: Turning display on
I (2230) WXT185Display: Initialize LVGL library
I (2230) WXT185Display: Initialize LVGL port
I (2230) LVGL: Starting LVGL task
I (2230) WXT185Display: Adding LCD display
I (2240) WXT185Display: Initialized default settings:
I (2240) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2250) WXT185Display: Last activity time initialized to: ld
I (2250) WXT185Display: Screensaver timer created
I (2260) WXT185Display: Crypto update timer created
I (2260) WXT185Display: Screensaver time update timer created
I (2270) WXT185Display: BiJieCoins initialized
I (2270) WXT185Display: Setting up WXT185 UI
I (2270) WXT185Display: Created page view container
I (2280) WXT185Display: Enabling horizontal scrolling
I (2280) WXT185Display: Added touch event handlers to page view
I (2290) WXT185Display: Created common components
I (2290) WXT185Display: Creating chat page
I (2300) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2310) WXT185Display: Chat page creation completed
I (2310) WXT185Display: Created chat page
I (2310) WXT185Display: Creating crypto page
I (2320) WXT185Display: Added touch event handlers to crypto page begin
I (2360) WXT185Display: Crypto page creation completed
I (2360) WXT185Display: Created crypto page
I (2360) WXT185Display: Creating settings page
I (2360) WXT185Display: Settings page background created
I (2370) WXT185Display: Added touch event handlers to settings page begin
I (2380) WXT185Display: Settings title label created
I (2380) WXT185Display: Theme label created
I (2390) WXT185Display: Theme roller created
I (2400) WXT185Display: Default crypto label created
I (2400) WXT185Display: Default crypto roller created
I (2410) WXT185Display: K-line time label created
I (2410) WXT185Display: K-line time roller created
I (2420) WXT185Display: Screensaver label created
I (2420) WXT185Display: Screensaver switch created
I (2420) WXT185Display: Realtime crypto label created
I (2420) WXT185Display: Realtime crypto switch created
I (2430) WXT185Display: KLine crypto label created
I (2430) WXT185Display: KLine crypto switch created
I (2440) WXT185Display: Save button created
I (2440) WXT185Display: Save button label created
I (2440) WXT185Display: Settings page creation completed
I (2450) WXT185Display: Created settings page
I (2450) WXT185Display: Creating screensaver page
I (2460) WXT185Display: Added touch event handlers to screensaver page start
I (2460) WXT185Display: Added touch event handlers to screensaver page end
I (2480) WXT185Display: Screensaver page creation completed
I (2480) WXT185Display: Created screensaver page
I (2480) WXT185Display: Applying theme
I (2480) WXT185Display: Applying crypto page theme
I (2490) WXT185Display: Applying settings page theme
I (2490) WXT185Display: Applying screensaver theme
I (2500) WXT185Display: Theme applied successfully
I (2500) WXT185Display: Applied theme
I (2510) WXT185Display: Started screensaver timer
I (2510) WXT185Display: Crypto update timer started
I (2510) WXT185Display: Started crypto update timer
I (2520) WXT185Display: Connecting to BiJie coins service
I (2520) WXT185Display: Checking device state for network ready
I (2530) WXT185Display: Connected to BiJie coins
I (2530) WXT185Display: Switching to page 1
I (2540) WXT185Display: Switching to crypto page
I (2550) WXT185Display: WXT185 UI setup completed
I (2550) WXT185Display: WXT185Display constructor completed
I (2550) button: IoT Button Version: 4.1.3
I (2560) waveshare_lcd_1_85: Initializing touch controller...
I (2560) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2570) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2580) i2c.master: I2C transaction unexpected nack detected
E (2580) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2590) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2590) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2600) CST816S: read_id(181): I2C read failed
E (2610) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2610) CST816S: Initialization failed!
E (2610) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2620) MCP: Add tool: self.ui.uppage
I (2630) MCP: Add tool: self.ui.downpage
I (2630) Backlight: Set brightness to 75
I (2630) Application: STATE: starting
I (2640) WXT185Display: Device state changed from 0 to 1
I (2640) WXT185Display: Other device state change, treating as user activity
I (2650) WXT185Display: User activity detected, updating last activity time
I (2660) NoAudioCodec: Simplex channels created
I (2660) AudioCodec: Set input enable to true
I (2660) AudioCodec: Set output enable to true
I (2670) AudioCodec: Audio codec started
I (2680) pp: pp rom version: e7ae62f
I (2680) net80211: net80211 rom version: e7ae62f
I (2690) wifi:wifi driver task: 3fcde238, prio:23, stack:6144, core=0
I (2690) wifi:wifi firmware version: f3dbad7
I (2690) wifi:wifi certification version: v7.0
I (2690) wifi:config NVS flash: disabled
I (2700) wifi:config nano formatting: enabled
I (2700) wifi:Init data frame dynamic rx buffer num: 8
I (2710) wifi:Init dynamic rx mgmt buffer num: 5
I (2710) wifi:Init management short buffer num: 32
I (2720) wifi:Init dynamic tx buffer num: 32
I (2720) wifi:Init static tx FG buffer num: 2
I (2720) wifi:Init static rx buffer size: 1600
I (2730) wifi:Init static rx buffer num: 6
I (2730) wifi:Init dynamic rx buffer num: 8
I (2740) wifi_init: rx ba win: 6
I (2740) wifi_init: accept mbox: 6
I (2740) wifi_init: tcpip mbox: 32
I (2740) wifi_init: udp mbox: 6
I (2750) wifi_init: tcp mbox: 6
I (2750) wifi_init: tcp tx win: 5760
I (2750) wifi_init: tcp rx win: 5760
I (2760) wifi_init: tcp mss: 1440
I (2760) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2810) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2810) wifi:enable tsf
I (3000) WXT185Display: Scroll end: (360, 0)
I (3000) WXT185Display: Current page index: 1
I (3510) WXT185Display: Screensaver timer callback triggered
I (3510) WXT185Display: Device is in starting mode, skip screensaver
I (4510) WXT185Display: Screensaver timer callback triggered
I (4510) WXT185Display: Device is in starting mode, skip screensaver
I (5230) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -53, Channel: 11, Authmode: 3
I (5230) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -77, Channel: 11, Authmode: 3
W (5230) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5510) WXT185Display: Screensaver timer callback triggered
I (5510) WXT185Display: Device is in starting mode, skip screensaver
I (6520) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6520) wifi:state: init -> auth (0xb0)
I (6520) WXT185Display: Screensaver timer callback triggered
I (6530) WXT185Display: Device is in starting mode, skip screensaver
I (6530) wifi:state: auth -> assoc (0x0)
I (6550) wifi:state: assoc -> run (0x10)
I (6570) wifi:connected with BSO, aid = 10, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (6570) wifi:security: WPA2-PSK, phy: bgn, rssi: -52
I (6570) wifi:pm start, type: 1

I (6570) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6580) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6590) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (6890) wifi:<ba-add>idx:0 (ifx:0, c2:b3:ec:f5:56:c2), tid:0, ssn:0, winSize:64
I (7510) WXT185Display: Screensaver timer callback triggered
I (7510) WXT185Display: Device is in starting mode, skip screensaver
I (7510) WXT185Display: Crypto update timer triggered
I (7660) wifi: Got IP: 192.168.3.147
I (7660) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (7660) WXT185Display: Checking device state for network ready
E (8660) WXT185Display: Network is not ready after waiting
W (8660) WXT185Display: Network not ready, skipping crypto data update
I (8660) WXT185Display: Screensaver timer callback triggered
I (8660) WXT185Display: Device is in starting mode, skip screensaver
I (8670) Application: STATE: activating
I (8670) WXT185Display: Device state changed from 1 to 8
I (8680) WXT185Display: Other device state change, treating as user activity
I (8680) WXT185Display: User activity detected, updating last activity time
I (8690) Ota: Current version: 1.8.5
I (8940) esp-x509-crt-bundle: Certificate validated


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d14
--- 0x40048d14: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bde4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bde4h (1687012) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be04
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49be0c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be0c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049be0c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be0c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eabc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eac4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eac4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eac4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eac4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4798
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47a0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47a0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47a0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47a0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47c0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bde4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  d857d6fa5...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (1700) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1700) waveshare_lcd_1_85: IO expander not available for touch reset
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1900) waveshare_lcd_1_85: I2C device added successfully
I (1900) waveshare_lcd_1_85: Initialize QSPI bus
I (1900) waveshare_lcd_1_85: Install panel IO
I (1900) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1930) st77916: LCD panel create success, version: 1.0.1
I (2180) Display: Power management not supported
I (2180) WXT185Display: Initializing WXT185 Display
I (2180) WXT185Display: Theme: light
I (2230) WXT185Display: Turning display on
I (2230) WXT185Display: Initialize LVGL library
I (2230) WXT185Display: Initialize LVGL port
I (2230) LVGL: Starting LVGL task
I (2230) WXT185Display: Adding LCD display
I (2240) WXT185Display: Initialized default settings:
I (2240) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2250) WXT185Display: Last activity time initialized to: ld
I (2250) WXT185Display: Screensaver timer created
I (2260) WXT185Display: Crypto update timer created
I (2260) WXT185Display: Screensaver time update timer created
I (2270) WXT185Display: BiJieCoins initialized
I (2270) WXT185Display: Setting up WXT185 UI
I (2270) WXT185Display: Created page view container
I (2280) WXT185Display: Enabling horizontal scrolling
I (2280) WXT185Display: Added touch event handlers to page view
I (2290) WXT185Display: Created common components
I (2290) WXT185Display: Creating chat page
I (2300) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2310) WXT185Display: Chat page creation completed
I (2310) WXT185Display: Created chat page
I (2310) WXT185Display: Creating crypto page
I (2320) WXT185Display: Added touch event handlers to crypto page begin
I (2360) WXT185Display: Crypto page creation completed
I (2360) WXT185Display: Created crypto page
I (2360) WXT185Display: Creating settings page
I (2360) WXT185Display: Settings page background created
I (2370) WXT185Display: Added touch event handlers to settings page begin
I (2380) WXT185Display: Settings title label created
I (2380) WXT185Display: Theme label created
I (2390) WXT185Display: Theme roller created
I (2400) WXT185Display: Default crypto label created
I (2400) WXT185Display: Default crypto roller created
I (2410) WXT185Display: K-line time label created
I (2410) WXT185Display: K-line time roller created
I (2420) WXT185Display: Screensaver label created
I (2420) WXT185Display: Screensaver switch created
I (2420) WXT185Display: Realtime crypto label created
I (2420) WXT185Display: Realtime crypto switch created
I (2430) WXT185Display: KLine crypto label created
I (2430) WXT185Display: KLine crypto switch created
I (2440) WXT185Display: Save button created
I (2440) WXT185Display: Save button label created
I (2440) WXT185Display: Settings page creation completed
I (2450) WXT185Display: Created settings page
I (2450) WXT185Display: Creating screensaver page
I (2460) WXT185Display: Added touch event handlers to screensaver page start
I (2460) WXT185Display: Added touch event handlers to screensaver page end
I (2480) WXT185Display: Screensaver page creation completed
I (2480) WXT185Display: Created screensaver page
I (2480) WXT185Display: Applying theme
I (2480) WXT185Display: Applying crypto page theme
I (2490) WXT185Display: Applying settings page theme
I (2490) WXT185Display: Applying screensaver theme
I (2500) WXT185Display: Theme applied successfully
I (2500) WXT185Display: Applied theme
I (2510) WXT185Display: Started screensaver timer
I (2510) WXT185Display: Crypto update timer started
I (2510) WXT185Display: Started crypto update timer
I (2520) WXT185Display: Connecting to BiJie coins service
I (2520) WXT185Display: Checking device state for network ready
I (2530) WXT185Display: Connected to BiJie coins
I (2530) WXT185Display: Switching to page 1
I (2540) WXT185Display: Switching to crypto page
I (2550) WXT185Display: WXT185 UI setup completed
I (2550) WXT185Display: WXT185Display constructor completed
I (2550) button: IoT Button Version: 4.1.3
I (2560) waveshare_lcd_1_85: Initializing touch controller...
I (2560) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2570) waveshare_lcd_1_85: Initialize touch controller CST816S
I (2580) CST816S: IC id: 181
I (2600) waveshare_lcd_1_85: Touch panel initialized successfully
I (2600) MCP: Add tool: self.ui.uppage
I (2600) MCP: Add tool: self.ui.downpage
I (2600) Backlight: Set brightness to 75
I (2610) Application: STATE: starting
I (2610) WXT185Display: Device state changed from 0 to 1
I (2610) WXT185Display: Other device state change, treating as user activity
I (2620) WXT185Display: User activity detected, updating last activity time
I (2630) NoAudioCodec: Simplex channels created
I (2630) AudioCodec: Set input enable to true
I (2640) AudioCodec: Set output enable to true
I (2640) AudioCodec: Audio codec started
I (2660) pp: pp rom version: e7ae62f
I (2660) net80211: net80211 rom version: e7ae62f
I (2670) wifi:wifi driver task: 3fcde86c, prio:23, stack:6144, core=0
I (2670) wifi:wifi firmware version: f3dbad7
I (2670) wifi:wifi certification version: v7.0
I (2670) wifi:config NVS flash: disabled
I (2670) wifi:config nano formatting: enabled
I (2680) wifi:Init data frame dynamic rx buffer num: 8
I (2680) wifi:Init dynamic rx mgmt buffer num: 5
I (2690) wifi:Init management short buffer num: 32
I (2690) wifi:Init dynamic tx buffer num: 32
I (2690) wifi:Init static tx FG buffer num: 2
I (2700) wifi:Init static rx buffer size: 1600
I (2700) wifi:Init static rx buffer num: 6
I (2710) wifi:Init dynamic rx buffer num: 8
I (2710) wifi_init: rx ba win: 6
I (2710) wifi_init: accept mbox: 6
I (2720) wifi_init: tcpip mbox: 32
I (2720) wifi_init: udp mbox: 6
I (2720) wifi_init: tcp mbox: 6
I (2730) wifi_init: tcp tx win: 5760
I (2730) wifi_init: tcp rx win: 5760
I (2730) wifi_init: tcp mss: 1440
I (2740) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2780) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2780) wifi:enable tsf
I (2990) WXT185Display: Scroll end: (360, 0)
I (2990) WXT185Display: Current page index: 1
I (3510) WXT185Display: Screensaver timer callback triggered
I (3510) WXT185Display: Device is in starting mode, skip screensaver
I (4510) WXT185Display: Screensaver timer callback triggered
I (4510) WXT185Display: Device is in starting mode, skip screensaver
I (5200) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -50, Channel: 11, Authmode: 3
I (5200) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -79, Channel: 11, Authmode: 3
W (5200) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5510) WXT185Display: Screensaver timer callback triggered
I (5510) WXT185Display: Device is in starting mode, skip screensaver
I (6490) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6490) wifi:state: init -> auth (0xb0)
I (6510) WXT185Display: Screensaver timer callback triggered
I (6510) WXT185Display: Device is in starting mode, skip screensaver
I (7490) wifi:state: auth -> init (0x200)
I (7500) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7500) wifi: Reconnecting BSO (attempt 1 / 5)
I (7510) WXT185Display: Screensaver timer callback triggered
I (7510) WXT185Display: Device is in starting mode, skip screensaver
I (7510) WXT185Display: Crypto update timer triggered
I (7520) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7520) wifi:state: init -> auth (0xb0)
I (7530) wifi:state: auth -> assoc (0x0)
I (7540) wifi:state: assoc -> run (0x10)
I (7570) wifi:connected with BSO, aid = 9, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (7570) wifi:security: WPA2-PSK, phy: bgn, rssi: -80
I (7570) wifi:pm start, type: 1

I (7570) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (7580) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (7670) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7730) wifi:<ba-add>idx:0 (ifx:0, c4:17:0e:4b:bd:b8), tid:0, ssn:0, winSize:64
I (7760) WXT185Display: Checking device state for network ready
I (8510) WXT185Display: Screensaver timer callback triggered
I (8510) WXT185Display: Device is in starting mode, skip screensaver
I (8670) wifi: Got IP: 192.168.3.147
E (8760) WXT185Display: Network is not ready after waiting
W (8760) WXT185Display: Network not ready, skipping crypto data update
I (8760) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (8760) Application: STATE: activating
I (8770) WXT185Display: Device state changed from 1 to 8
I (8770) WXT185Display: Other device state change, treating as user activity
I (8780) WXT185Display: User activity detected, updating last activity time
I (8790) Ota: Current version: 1.8.5
I (9000) esp-x509-crt-bundle: Certificate validated
I (9510) WXT185Display: Screensaver timer callback triggered
I (9510) WXT185Display: Device is in activating mode, skip screensaver
I (9770) Ota: Current is the latest version
I (9770) Ota: Running partition: ota_0
I (9770) MCP: Add tool: self.get_device_status
I (9770) MCP: Add tool: self.audio_speaker.set_volume
I (9780) MCP: Add tool: self.screen.set_brightness
I (9780) MCP: Add tool: self.screen.set_theme
I (9790) MQTT: Connecting to endpoint mqtt.xiaozhi.me
I (10070) esp-x509-crt-bundle: Certificate validated
I (10510) WXT185Display: Screensaver timer callback triggered
I (10510) WXT185Display: Device is in activating mode, skip screensaver
I (10660) MQTT: Connected to endpoint
I (10660) Application: STATE: idle
I (10660) WXT185Display: Device state changed from 8 to 3
I (10660) WXT185Display: Device entered idle state
I (10670) WXT185Display: Device idle, updating activity time for screensaver
I (10680) WXT185Display: Setting emotion: neutral
I (10680) MODEL_LOADER: The storage free size is 20864 KB
I (10680) MODEL_LOADER: The partition size is 960 KB
I (10690) MODEL_LOADER: Successfully load srmodels
I (10690) AfeWakeWord: Model 0: wn9_nihaoxiaozhi_tts
I (10700) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v4, mode:0, p:0, (Jun 16 2025 16:18:15)
I (10770) AFE: AFE Version: (1MIC_V250121)
I (10770) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (10780) AFE: AFE Pipeline: [input] ->  -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| -> [output]
I (10790) AfeWakeWord: Audio detection task started, feed size: 512 fetch size: 512
I (10810) WXT185Display: Setting chat message - Role: system, Content: ...
I (10810) WXT185Display: User activity detected, updating last activity time
I (10810) AudioService: Resampling audio from 16000 to 24000
I (10820) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
I (10830) SystemInfo: free sram: 67739 minimal sram: 66787
I (11510) WXT185Display: Screensaver timer callback triggered
I (11530) WXT185Display: Network is ready, current state: 3
I (11530) BiJieCoins: Connecting to BiJie WebSocket for currency 1: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (11530) UniversalWebSocket: Connecting to WebSocket server: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (12260) WXT185Display: KLine frequency button event handler called
I (12260) WXT185Display: KLine frequency button 7 clicked
I (12270) WXT185Display: Drawing K-line chart
W (12270) WXT185Display: No market data available for currency ID: 1
I (12430) WXT185Display: Touch event handler called, code: 1
I (12430) WXT185Display: User activity detected, updating last activity time
I (12430) WXT185Display: Touch pressed at (104, 339)
I (12440) WXT185Display: Handling touch start at (104, 339)
I (12470) esp-x509-crt-bundle: Certificate validated
I (12510) WXT185Display: Screensaver timer callback triggered
I (12520) WXT185Display: Crypto update timer triggered
I (12520) WXT185Display: Checking device state for network ready
I (12520) WXT185Display: Network is ready, current state: 3
I (12520) WXT185Display: Connecting to BiJie coins service
W (12530) WXT185Display: Already connecting to BiJie coins, skipping
I (12530) WXT185Display: Updating crypto data from BiJie service
W (12540) WXT185Display: BiJie coins service not connected
I (12540) WXT185Display: Drawing K-line chart
W (12550) WXT185Display: No market data available for currency ID: 1
I (12750) WXT185Display: Touch event handler called, code: 8
I (12750) WXT185Display: User activity detected, updating last activity time
I (12750) WXT185Display: Touch released at (171, 95)
I (12750) WXT185Display: Handling touch end at (171, 95)
I (13510) WXT185Display: Screensaver timer callback triggered
I (13520) WXT185Display: Connected to BiJie coins WebSocket for currency 1
I (13520) WXT185Display: Getting K-line data for currency 1
I (13520) WXT185Display: Getting initial K-line data for currency 1
W (13530) BiJieCoins: K-line data request for currency 1 is already in progress, returning existing data
I (13540) WXT185Display: Received initial K-line data with 0 points
I (13540) WXT185Display: Drawing K-line chart
W (13550) WXT185Display: No market data available for currency ID: 1
I (13520) BiJieCoins: Fetching K-line data from: https://www.528btc.com/e/extend/api/index.php
I (13560) BiJieCoins: Network interface: 0x3fca79a0
I (13570) UniversalHttpClient: Creating UniversalHttpClient with network interface: 0x3fca79a0
I (13570) BiJieCoins: Created UniversalHttpClient: 0x3fcccc08
I (13580) BiJieCoins: No proxy configured for K-line request
I (13590) BiJieCoins: Opening HTTP connection
I (13590) UniversalHttpClient: Opening HTTP connection - Method: POST, URL: https://www.528btc.com/e/extend/api/index.php?c=coin&id=1&limit=30&m=kline&slug=bitcoin&sortByDate=true&sortByDateRule=false&start=&symbol=BTC&type=4
I (13610) UniversalHttpClient: Using default SSL verification
I (13840) BiJieCoins: Received message for currency 1: {"timestamp":1755353880,"open":117550,"high":117604.07,"low":117550,"close":117604.07,"turnover":674883.6526343,"change":0.05,"change24h":0.17,"change7d":0.54,"change30d":-0.98,"change1h":-0.02,"changeYear":23.26,"changeNow":310.56,"currencyId":1,"circulationMarket":2344095678665.584}
I (13860) WXT185Display: Received market data callback for currency ID: 1
I (14510) WXT185Display: Screensaver timer callback triggered
I (14710) esp-x509-crt-bundle: Certificate validated
I (15510) WXT185Display: Screensaver timer callback triggered
I (15570) UniversalHttpClient: HTTP connected
I (15850) UniversalHttpClient: HTTP finished
I (15850) UniversalHttpClient: HTTP request completed successfully - Status: 200, Content-Length: -1
I (15860) BiJieCoins: Getting HTTP status code
I (15860) BiJieCoins: HTTP status code: 200
I (15860) BiJieCoins: Reading HTTP response data
I (15870) BiJieCoins: Response data size: 2675


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490d7
--- 0x400490d7: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa454 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa454h (2073684) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa474
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5b9c data starts 0x2fa47c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa47c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa47c vaddr=3fc9dd00 size=05b9ch ( 23452) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa47c, size=0x5b9c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bdd4 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bdd4h (1686996) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bdf4
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2ce0 data starts 0x49bdfc
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bdfc load_addr 0x3fca389c
I (548) esp_image: segment 3: paddr=0049bdfc vaddr=3fca389c size=02ce0h ( 11488) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bdfc, size=0x2ce0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eadc
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eae4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eae4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eae4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eae4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b47b8
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b47c0
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b47c0 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b47c0 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b47c0, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b47e0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa454
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bdd4
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  3d70b2605...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1800) waveshare_lcd_1_85: IO expander not available for touch reset
I (1910) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (2010) waveshare_lcd_1_85: I2C device added successfully
I (2010) waveshare_lcd_1_85: Initialize QSPI bus
I (2010) waveshare_lcd_1_85: Install panel IO
I (2010) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2040) st77916: LCD panel create success, version: 1.0.1
I (2290) Display: Power management not supported
I (2290) WXT185Display: Initializing WXT185 Display
I (2290) WXT185Display: Theme: light
I (2340) WXT185Display: Turning display on
I (2340) WXT185Display: Initialize LVGL library
I (2340) WXT185Display: Initialize LVGL port
I (2340) LVGL: Starting LVGL task
I (2340) WXT185Display: Adding LCD display
I (2350) WXT185Display: Initialized default settings:
I (2350) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2360) WXT185Display: Last activity time initialized to: ld
I (2360) WXT185Display: Screensaver timer created
I (2370) WXT185Display: Crypto update timer created
I (2370) WXT185Display: Screensaver time update timer created
I (2380) WXT185Display: BiJieCoins initialized
I (2380) WXT185Display: Setting up WXT185 UI
I (2380) WXT185Display: Created page view container
I (2390) WXT185Display: Enabling horizontal scrolling
I (2390) WXT185Display: Added touch event handlers to page view
I (2400) WXT185Display: Created common components
I (2400) WXT185Display: Creating chat page
I (2410) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2420) WXT185Display: Chat page creation completed
I (2420) WXT185Display: Created chat page
I (2420) WXT185Display: Creating crypto page
I (2430) WXT185Display: Added touch event handlers to crypto page begin
I (2470) WXT185Display: Crypto page creation completed
I (2470) WXT185Display: Created crypto page
I (2470) WXT185Display: Creating settings page
I (2470) WXT185Display: Settings page background created
I (2480) WXT185Display: Added touch event handlers to settings page begin
I (2490) WXT185Display: Settings title label created
I (2490) WXT185Display: Theme label created
I (2500) WXT185Display: Theme roller created
I (2510) WXT185Display: Default crypto label created
I (2510) WXT185Display: Default crypto roller created
I (2520) WXT185Display: K-line time label created
I (2520) WXT185Display: K-line time roller created
I (2530) WXT185Display: Screensaver label created
I (2530) WXT185Display: Screensaver switch created
I (2530) WXT185Display: Realtime crypto label created
I (2530) WXT185Display: Realtime crypto switch created
I (2540) WXT185Display: KLine crypto label created
I (2540) WXT185Display: KLine crypto switch created
I (2550) WXT185Display: Save button created
I (2550) WXT185Display: Save button label created
I (2550) WXT185Display: Settings page creation completed
I (2560) WXT185Display: Created settings page
I (2560) WXT185Display: Creating screensaver page
I (2570) WXT185Display: Added touch event handlers to screensaver page start
I (2570) WXT185Display: Added touch event handlers to screensaver page end
I (2590) WXT185Display: Screensaver page creation completed
I (2590) WXT185Display: Created screensaver page
I (2590) WXT185Display: Applying theme
I (2590) WXT185Display: Applying crypto page theme
I (2600) WXT185Display: Applying settings page theme
I (2600) WXT185Display: Applying screensaver theme
I (2610) WXT185Display: Theme applied successfully
I (2610) WXT185Display: Applied theme
I (2620) WXT185Display: Started screensaver timer
I (2620) WXT185Display: Crypto update timer started
I (2620) WXT185Display: Started crypto update timer
I (2630) WXT185Display: Connecting to BiJie coins service
I (2630) WXT185Display: Checking device state for network ready
I (2640) WXT185Display: Connected to BiJie coins
I (2640) WXT185Display: Switching to page 1
I (2650) WXT185Display: Switching to crypto page
I (2660) WXT185Display: WXT185 UI setup completed
I (2660) WXT185Display: WXT185Display constructor completed
I (2660) button: IoT Button Version: 4.1.3
I (2670) waveshare_lcd_1_85: Initializing touch controller...
I (2670) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2680) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2690) i2c.master: I2C transaction unexpected nack detected
E (2690) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2700) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2700) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2710) CST816S: read_id(181): I2C read failed
E (2720) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2720) CST816S: Initialization failed!
E (2730) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2730) MCP: Add tool: self.ui.uppage
I (2740) MCP: Add tool: self.ui.downpage
I (2740) Backlight: Set brightness to 75
I (2750) Application: STATE: starting
I (2750) WXT185Display: Device state changed from 0 to 1
I (2750) WXT185Display: Other device state change, treating as user activity
I (2760) WXT185Display: User activity detected, updating last activity time
I (2770) NoAudioCodec: Simplex channels created
I (2770) AudioCodec: Set input enable to true
I (2770) AudioCodec: Set output enable to true
I (2780) AudioCodec: Audio codec started
I (2790) pp: pp rom version: e7ae62f
I (2790) net80211: net80211 rom version: e7ae62f
I (2800) wifi:wifi driver task: 3fcde258, prio:23, stack:6144, core=0
I (2800) wifi:wifi firmware version: f3dbad7
I (2800) wifi:wifi certification version: v7.0
I (2800) wifi:config NVS flash: disabled
I (2810) wifi:config nano formatting: enabled
I (2810) wifi:Init data frame dynamic rx buffer num: 8
I (2820) wifi:Init dynamic rx mgmt buffer num: 5
I (2820) wifi:Init management short buffer num: 32
I (2830) wifi:Init dynamic tx buffer num: 32
I (2830) wifi:Init static tx FG buffer num: 2
I (2830) wifi:Init static rx buffer size: 1600
I (2840) wifi:Init static rx buffer num: 6
I (2840) wifi:Init dynamic rx buffer num: 8
I (2850) wifi_init: rx ba win: 6
I (2850) wifi_init: accept mbox: 6
I (2850) wifi_init: tcpip mbox: 32
I (2850) wifi_init: udp mbox: 6
I (2860) wifi_init: tcp mbox: 6
I (2860) wifi_init: tcp tx win: 5760
I (2860) wifi_init: tcp rx win: 5760
I (2870) wifi_init: tcp mss: 1440
I (2870) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2920) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2920) wifi:enable tsf
I (3100) WXT185Display: Scroll end: (360, 0)
I (3100) WXT185Display: Current page index: 1


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048deb
--- 0x40048deb: uart_rx_readbuff in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa424 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa424h (2073636) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa444
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bcc data starts 0x2fa44c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa44c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa44c vaddr=3fc9dd00 size=05bcch ( 23500) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa44c, size=0x5bcc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bd74 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bd74h (1686900) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd94
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cb0 data starts 0x49bd9c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd9c load_addr 0x3fca38cc
I (548) esp_image: segment 3: paddr=0049bd9c vaddr=3fca38cc size=02cb0h ( 11440) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd9c, size=0x2cb0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ea4c
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49ea54
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49ea54 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049ea54 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049ea54, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4728
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4730
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4730 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4730 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4730, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4750
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa424
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bd74
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  68fd9b7ba...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1800) waveshare_lcd_1_85: IO expander not available for touch reset
I (1910) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1910) waveshare_lcd_1_85: I2C device added successfully
I (1910) waveshare_lcd_1_85: Initialize QSPI bus
I (1910) waveshare_lcd_1_85: Install panel IO
I (1920) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1950) st77916: LCD panel create success, version: 1.0.1
I (2190) Display: Power management not supported
I (2190) WXT185Display: Initializing WXT185 Display
I (2190) WXT185Display: Theme: light
I (2240) WXT185Display: Turning display on
I (2240) WXT185Display: Initialize LVGL library
I (2240) WXT185Display: Initialize LVGL port
I (2240) LVGL: Starting LVGL task
I (2240) WXT185Display: Adding LCD display
I (2250) WXT185Display: Initialized default settings:
I (2250) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2260) WXT185Display: Last activity time initialized to: ld
I (2260) WXT185Display: Screensaver timer created
I (2270) WXT185Display: Crypto update timer created
I (2270) WXT185Display: Screensaver time update timer created
I (2280) WXT185Display: BiJieCoins initialized
I (2280) WXT185Display: Setting up WXT185 UI
I (2280) WXT185Display: Created page view container
I (2290) WXT185Display: Enabling horizontal scrolling
I (2290) WXT185Display: Added touch event handlers to page view
I (2300) WXT185Display: Created common components
I (2300) WXT185Display: Creating chat page
I (2310) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2320) WXT185Display: Chat page creation completed
I (2320) WXT185Display: Created chat page
I (2320) WXT185Display: Creating crypto page
I (2330) WXT185Display: Added touch event handlers to crypto page begin
I (2370) WXT185Display: Crypto page creation completed
I (2370) WXT185Display: Created crypto page
I (2370) WXT185Display: Creating settings page
I (2370) WXT185Display: Settings page background created
I (2380) WXT185Display: Added touch event handlers to settings page begin
I (2390) WXT185Display: Settings title label created
I (2390) WXT185Display: Theme label created
I (2400) WXT185Display: Theme roller created
I (2410) WXT185Display: Default crypto label created
I (2410) WXT185Display: Default crypto roller created
I (2420) WXT185Display: K-line time label created
I (2420) WXT185Display: K-line time roller created
I (2430) WXT185Display: Screensaver label created
I (2430) WXT185Display: Screensaver switch created
I (2430) WXT185Display: Realtime crypto label created
I (2440) WXT185Display: Realtime crypto switch created
I (2440) WXT185Display: KLine crypto label created
I (2440) WXT185Display: KLine crypto switch created
I (2450) WXT185Display: Save button created
I (2450) WXT185Display: Save button label created
I (2450) WXT185Display: Settings page creation completed
I (2460) WXT185Display: Created settings page
I (2460) WXT185Display: Creating screensaver page
I (2470) WXT185Display: Added touch event handlers to screensaver page start
I (2470) WXT185Display: Added touch event handlers to screensaver page end
I (2490) WXT185Display: Screensaver page creation completed
I (2490) WXT185Display: Created screensaver page
I (2490) WXT185Display: Applying theme
I (2490) WXT185Display: Applying crypto page theme
I (2500) WXT185Display: Applying settings page theme
I (2500) WXT185Display: Applying screensaver theme
I (2510) WXT185Display: Theme applied successfully
I (2510) WXT185Display: Applied theme
I (2520) WXT185Display: Started screensaver timer
I (2520) WXT185Display: Crypto update timer started
I (2520) WXT185Display: Started crypto update timer
I (2530) WXT185Display: Connecting to BiJie coins service
I (2530) WXT185Display: Checking device state for network ready
I (2540) WXT185Display: Connected to BiJie coins
I (2540) WXT185Display: Switching to page 1
I (2550) WXT185Display: Switching to crypto page
I (2560) WXT185Display: WXT185 UI setup completed
I (2560) WXT185Display: WXT185Display constructor completed
I (2560) button: IoT Button Version: 4.1.3
I (2570) waveshare_lcd_1_85: Initializing touch controller...
I (2570) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2580) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2590) i2c.master: I2C transaction unexpected nack detected
E (2590) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2600) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2600) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2610) CST816S: read_id(181): I2C read failed
E (2620) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2620) CST816S: Initialization failed!
E (2630) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE
I (2630) MCP: Add tool: self.ui.uppage
I (2640) MCP: Add tool: self.ui.downpage
I (2640) Backlight: Set brightness to 75
I (2650) Application: STATE: starting
I (2650) WXT185Display: Device state changed from 0 to 1
I (2650) WXT185Display: Other device state change, treating as user activity
I (2660) WXT185Display: User activity detected, updating last activity time
I (2670) NoAudioCodec: Simplex channels created
I (2670) AudioCodec: Set input enable to true
I (2670) AudioCodec: Set output enable to true
I (2680) AudioCodec: Audio codec started
I (2690) pp: pp rom version: e7ae62f
I (2690) net80211: net80211 rom version: e7ae62f
I (2700) wifi:wifi driver task: 3fcde1e8, prio:23, stack:6144, core=0
I (2700) wifi:wifi firmware version: f3dbad7
I (2700) wifi:wifi certification version: v7.0
I (2700) wifi:config NVS flash: disabled
I (2710) wifi:config nano formatting: enabled
I (2710) wifi:Init data frame dynamic rx buffer num: 8
I (2720) wifi:Init dynamic rx mgmt buffer num: 5
I (2720) wifi:Init management short buffer num: 32
I (2730) wifi:Init dynamic tx buffer num: 32
I (2730) wifi:Init static tx FG buffer num: 2
I (2730) wifi:Init static rx buffer size: 1600
I (2740) wifi:Init static rx buffer num: 6
I (2740) wifi:Init dynamic rx buffer num: 8
I (2750) wifi_init: rx ba win: 6
I (2750) wifi_init: accept mbox: 6
I (2750) wifi_init: tcpip mbox: 32
I (2760) wifi_init: udp mbox: 6
I (2760) wifi_init: tcp mbox: 6
I (2760) wifi_init: tcp tx win: 5760
I (2760) wifi_init: tcp rx win: 5760
I (2770) wifi_init: tcp mss: 1440
I (2770) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2820) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2820) wifi:enable tsf
I (3000) WXT185Display: Scroll end: (360, 0)
I (3000) WXT185Display: Current page index: 1
I (3520) WXT185Display: Screensaver timer callback triggered
I (3520) WXT185Display: Device is in starting mode, skip screensaver
I (4520) WXT185Display: Screensaver timer callback triggered
I (4520) WXT185Display: Device is in starting mode, skip screensaver
I (5240) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -49, Channel: 11, Authmode: 3
I (5240) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -88, Channel: 11, Authmode: 3
W (5240) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5520) WXT185Display: Screensaver timer callback triggered
I (5520) WXT185Display: Device is in starting mode, skip screensaver


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d14
--- 0x40048d14: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa394 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa394h (2073492) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa3b4
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5c5c data starts 0x2fa3bc
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa3bc load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa3bc vaddr=3fc9dd00 size=05c5ch ( 23644) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa3bc, size=0x5c5c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bce8 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bce8h (1686760) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd08
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2c20 data starts 0x49bd10
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd10 load_addr 0x3fca395c
I (548) esp_image: segment 3: paddr=0049bd10 vaddr=3fca395c size=02c20h ( 11296) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd10, size=0x2c20, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e930
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e938
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e938 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e938 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e938, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b460c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4614
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4614 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4614 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4614, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4634
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa394
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bce8
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  51817e8a6...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1810) waveshare_lcd_1_85: Initialize QSPI bus
I (1820) waveshare_lcd_1_85: Install panel IO
I (1820) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1850) st77916: LCD panel create success, version: 1.0.1
I (2100) Display: Power management not supported
I (2100) WXT185Display: Initializing WXT185 Display
I (2100) WXT185Display: Theme: light
I (2150) WXT185Display: Turning display on
I (2150) WXT185Display: Initialize LVGL library
I (2150) WXT185Display: Initialize LVGL port
I (2150) LVGL: Starting LVGL task
I (2150) WXT185Display: Adding LCD display
I (2160) WXT185Display: Initialized default settings:
I (2160) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2170) WXT185Display: Last activity time initialized to: ld
I (2170) WXT185Display: Screensaver timer created
I (2180) WXT185Display: Crypto update timer created
I (2180) WXT185Display: Screensaver time update timer created
I (2190) WXT185Display: BiJieCoins initialized
I (2190) WXT185Display: Setting up WXT185 UI
I (2190) WXT185Display: Created page view container
I (2200) WXT185Display: Enabling horizontal scrolling
I (2200) WXT185Display: Added touch event handlers to page view
I (2210) WXT185Display: Created common components
I (2210) WXT185Display: Creating chat page
I (2220) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2230) WXT185Display: Chat page creation completed
I (2230) WXT185Display: Created chat page
I (2230) WXT185Display: Creating crypto page
I (2240) WXT185Display: Added touch event handlers to crypto page begin
I (2280) WXT185Display: Crypto page creation completed
I (2280) WXT185Display: Created crypto page
I (2280) WXT185Display: Creating settings page
I (2280) WXT185Display: Settings page background created
I (2290) WXT185Display: Added touch event handlers to settings page begin
I (2300) WXT185Display: Settings title label created
I (2300) WXT185Display: Theme label created
I (2310) WXT185Display: Theme roller created
I (2320) WXT185Display: Default crypto label created
I (2320) WXT185Display: Default crypto roller created
I (2330) WXT185Display: K-line time label created
I (2330) WXT185Display: K-line time roller created
I (2340) WXT185Display: Screensaver label created
I (2340) WXT185Display: Screensaver switch created
I (2340) WXT185Display: Realtime crypto label created
I (2340) WXT185Display: Realtime crypto switch created
I (2350) WXT185Display: KLine crypto label created
I (2350) WXT185Display: KLine crypto switch created
I (2360) WXT185Display: Save button created
I (2360) WXT185Display: Save button label created
I (2360) WXT185Display: Settings page creation completed
I (2370) WXT185Display: Created settings page
I (2370) WXT185Display: Creating screensaver page
I (2380) WXT185Display: Added touch event handlers to screensaver page start
I (2380) WXT185Display: Added touch event handlers to screensaver page end
I (2400) WXT185Display: Screensaver page creation completed
I (2400) WXT185Display: Created screensaver page
I (2400) WXT185Display: Applying theme
I (2400) WXT185Display: Applying crypto page theme
I (2410) WXT185Display: Applying settings page theme
I (2410) WXT185Display: Applying screensaver theme
I (2420) WXT185Display: Theme applied successfully
I (2420) WXT185Display: Applied theme
I (2430) WXT185Display: Started screensaver timer
I (2430) WXT185Display: Crypto update timer started
I (2430) WXT185Display: Started crypto update timer
I (2440) WXT185Display: Connecting to BiJie coins service
I (2440) WXT185Display: Checking device state for network ready
I (2450) WXT185Display: Connected to BiJie coins
I (2450) WXT185Display: Switching to page 1
I (2460) WXT185Display: Switching to crypto page
I (2470) WXT185Display: WXT185 UI setup completed
I (2470) WXT185Display: WXT185Display constructor completed
I (2470) button: IoT Button Version: 4.1.3
I (2480) waveshare_lcd_1_85: Initializing touch controller...
I (2480) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2490) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2500) i2c.master: I2C transaction unexpected nack detected
E (2500) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2510) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2510) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2520) CST816S: read_id(181): I2C read failed
E (2530) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2530) CST816S: Initialization failed!
W (2540) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2650) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2660) i2c.master: I2C transaction unexpected nack detected
E (2660) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2660) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2660) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2670) CST816S: read_id(181): I2C read failed
E (2670) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2680) CST816S: Initialization failed!
W (2680) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2790) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2800) i2c.master: I2C transaction unexpected nack detected
E (2800) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2800) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2800) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2810) CST816S: read_id(181): I2C read failed
E (2820) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2820) CST816S: Initialization failed!
W (2830) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (2840) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (2840) MCP: Add tool: self.ui.uppage
I (2850) MCP: Add tool: self.ui.downpage
I (2850) Backlight: Set brightness to 75
I (2860) Application: STATE: starting
I (2860) WXT185Display: Device state changed from 0 to 1
I (2860) WXT185Display: Other device state change, treating as user activity
I (2870) WXT185Display: User activity detected, updating last activity time
I (2870) WXT185Display: Scroll end: (360, 0)
I (2880) NoAudioCodec: Simplex channels created
I (2880) WXT185Display: Current page index: 1
I (2890) AudioCodec: Set input enable to true
I (2890) AudioCodec: Set output enable to true
I (2900) AudioCodec: Audio codec started
I (2910) pp: pp rom version: e7ae62f
I (2910) net80211: net80211 rom version: e7ae62f
I (2930) wifi:wifi driver task: 3fcde170, prio:23, stack:6144, core=0
I (2930) wifi:wifi firmware version: f3dbad7
I (2930) wifi:wifi certification version: v7.0
I (2930) wifi:config NVS flash: disabled
I (2930) wifi:config nano formatting: enabled
I (2940) wifi:Init data frame dynamic rx buffer num: 8
I (2940) wifi:Init dynamic rx mgmt buffer num: 5
I (2950) wifi:Init management short buffer num: 32
I (2950) wifi:Init dynamic tx buffer num: 32
I (2950) wifi:Init static tx FG buffer num: 2
I (2960) wifi:Init static rx buffer size: 1600
I (2960) wifi:Init static rx buffer num: 6
I (2970) wifi:Init dynamic rx buffer num: 8
I (2970) wifi_init: rx ba win: 6
I (2970) wifi_init: accept mbox: 6
I (2980) wifi_init: tcpip mbox: 32
I (2980) wifi_init: udp mbox: 6
I (2980) wifi_init: tcp mbox: 6
I (2990) wifi_init: tcp tx win: 5760
I (3000) wifi_init: tcp rx win: 5760
I (3000) wifi_init: tcp mss: 1440
I (3000) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3040) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3040) wifi:enable tsf
I (3430) WXT185Display: Screensaver timer callback triggered
I (3430) WXT185Display: Device is in starting mode, skip screensaver
I (4430) WXT185Display: Screensaver timer callback triggered
I (4430) WXT185Display: Device is in starting mode, skip screensaver
I (5430) WXT185Display: Screensaver timer callback triggered
I (5430) WXT185Display: Device is in starting mode, skip screensaver
I (5460) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -54, Channel: 11, Authmode: 3
I (5460) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -87, Channel: 11, Authmode: 3
W (5460) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6430) WXT185Display: Screensaver timer callback triggered
I (6430) WXT185Display: Device is in starting mode, skip screensaver
I (6800) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6800) wifi:state: init -> auth (0xb0)
I (6820) wifi:state: auth -> assoc (0x0)
I (6820) wifi:state: assoc -> run (0x10)
I (6840) wifi:connected with BSO, aid = 10, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (6840) wifi:security: WPA2-PSK, phy: bgn, rssi: -50
I (6850) wifi:pm start, type: 1

I (6850) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6860) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6930) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7430) WXT185Display: Screensaver timer callback triggered
I (7430) WXT185Display: Device is in starting mode, skip screensaver
I (7430) wifi:<ba-add>idx:0 (ifx:0, c2:b3:ec:f5:56:c2), tid:0, ssn:0, winSize:64
I (7430) WXT185Display: Crypto update timer triggered
I (7510) WXT185Display: Checking device state for network ready
I (7930) wifi: Got IP: 192.168.3.147
E (8510) WXT185Display: Network is not ready after waiting
W (8510) WXT185Display: Network not ready, skipping crypto data update
I (8510) WXT185Display: Screensaver timer callback triggered
I (8510) WXT185Display: Device is in starting mode, skip screensaver
I (8520) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (8530) Application: STATE: activating
I (8530) WXT185Display: Device state changed from 1 to 8
I (8530) WXT185Display: Other device state change, treating as user activity
I (8540) WXT185Display: User activity detected, updating last activity time
I (8550) Ota: Current version: 1.8.5
I (8660) esp-x509-crt-bundle: Certificate validated


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d46
--- 0x40048d46: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa394 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa394h (2073492) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa3b4
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5c5c data starts 0x2fa3bc
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa3bc load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa3bc vaddr=3fc9dd00 size=05c5ch ( 23644) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa3bc, size=0x5c5c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bce8 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bce8h (1686760) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd08
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2c20 data starts 0x49bd10
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd10 load_addr 0x3fca395c
I (548) esp_image: segment 3: paddr=0049bd10 vaddr=3fca395c size=02c20h ( 11296) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd10, size=0x2c20, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e930
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e938
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e938 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e938 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e938, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b460c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4614
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4614 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4614 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4614, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4634
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa394
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bce8
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 11
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  51817e8a6...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (945) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1810) waveshare_lcd_1_85: Initialize QSPI bus
I (1820) waveshare_lcd_1_85: Install panel IO
I (1820) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1850) st77916: LCD panel create success, version: 1.0.1
I (2100) Display: Power management not supported
I (2100) WXT185Display: Initializing WXT185 Display
I (2100) WXT185Display: Theme: light
I (2150) WXT185Display: Turning display on
I (2150) WXT185Display: Initialize LVGL library
I (2150) WXT185Display: Initialize LVGL port
I (2150) LVGL: Starting LVGL task
I (2150) WXT185Display: Adding LCD display
I (2160) WXT185Display: Initialized default settings:
I (2160) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2170) WXT185Display: Last activity time initialized to: ld
I (2170) WXT185Display: Screensaver timer created
I (2180) WXT185Display: Crypto update timer created
I (2180) WXT185Display: Screensaver time update timer created
I (2190) WXT185Display: BiJieCoins initialized
I (2190) WXT185Display: Setting up WXT185 UI
I (2190) WXT185Display: Created page view container
I (2200) WXT185Display: Enabling horizontal scrolling
I (2200) WXT185Display: Added touch event handlers to page view
I (2210) WXT185Display: Created common components
I (2210) WXT185Display: Creating chat page
I (2220) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2230) WXT185Display: Chat page creation completed
I (2230) WXT185Display: Created chat page
I (2230) WXT185Display: Creating crypto page
I (2240) WXT185Display: Added touch event handlers to crypto page begin
I (2280) WXT185Display: Crypto page creation completed
I (2280) WXT185Display: Created crypto page
I (2280) WXT185Display: Creating settings page
I (2280) WXT185Display: Settings page background created
I (2290) WXT185Display: Added touch event handlers to settings page begin
I (2300) WXT185Display: Settings title label created
I (2300) WXT185Display: Theme label created
I (2310) WXT185Display: Theme roller created
I (2320) WXT185Display: Default crypto label created
I (2320) WXT185Display: Default crypto roller created
I (2330) WXT185Display: K-line time label created
I (2330) WXT185Display: K-line time roller created
I (2340) WXT185Display: Screensaver label created
I (2340) WXT185Display: Screensaver switch created
I (2340) WXT185Display: Realtime crypto label created
I (2340) WXT185Display: Realtime crypto switch created
I (2350) WXT185Display: KLine crypto label created
I (2350) WXT185Display: KLine crypto switch created
I (2360) WXT185Display: Save button created
I (2360) WXT185Display: Save button label created
I (2360) WXT185Display: Settings page creation completed
I (2370) WXT185Display: Created settings page
I (2370) WXT185Display: Creating screensaver page
I (2380) WXT185Display: Added touch event handlers to screensaver page start
I (2380) WXT185Display: Added touch event handlers to screensaver page end
I (2400) WXT185Display: Screensaver page creation completed
I (2400) WXT185Display: Created screensaver page
I (2400) WXT185Display: Applying theme
I (2400) WXT185Display: Applying crypto page theme
I (2410) WXT185Display: Applying settings page theme
I (2410) WXT185Display: Applying screensaver theme
I (2420) WXT185Display: Theme applied successfully
I (2420) WXT185Display: Applied theme
I (2430) WXT185Display: Started screensaver timer
I (2430) WXT185Display: Crypto update timer started
I (2430) WXT185Display: Started crypto update timer
I (2440) WXT185Display: Connecting to BiJie coins service
I (2440) WXT185Display: Checking device state for network ready
I (2450) WXT185Display: Connected to BiJie coins
I (2450) WXT185Display: Switching to page 1
I (2460) WXT185Display: Switching to crypto page
I (2470) WXT185Display: WXT185 UI setup completed
I (2470) WXT185Display: WXT185Display constructor completed
I (2470) button: IoT Button Version: 4.1.3
I (2480) waveshare_lcd_1_85: Initializing touch controller...
I (2480) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2490) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2500) i2c.master: I2C transaction unexpected nack detected
E (2500) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2510) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2510) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2520) CST816S: read_id(181): I2C read failed
E (2530) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2530) CST816S: Initialization failed!
W (2540) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2650) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2660) i2c.master: I2C transaction unexpected nack detected
E (2660) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2660) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2660) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2670) CST816S: read_id(181): I2C read failed
E (2670) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2680) CST816S: Initialization failed!
W (2680) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2790) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2800) i2c.master: I2C transaction unexpected nack detected
E (2800) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2800) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2800) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2810) CST816S: read_id(181): I2C read failed
E (2820) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2820) CST816S: Initialization failed!
W (2830) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (2840) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (2840) MCP: Add tool: self.ui.uppage
I (2850) MCP: Add tool: self.ui.downpage
I (2850) Backlight: Set brightness to 75
I (2860) Application: STATE: starting
I (2860) WXT185Display: Device state changed from 0 to 1
I (2860) WXT185Display: Other device state change, treating as user activity
I (2870) WXT185Display: User activity detected, updating last activity time
I (2870) WXT185Display: Scroll end: (360, 0)
I (2880) NoAudioCodec: Simplex channels created
I (2880) WXT185Display: Current page index: 1
I (2890) AudioCodec: Set input enable to true
I (2890) AudioCodec: Set output enable to true
I (2900) AudioCodec: Audio codec started
I (2910) pp: pp rom version: e7ae62f
I (2910) net80211: net80211 rom version: e7ae62f
I (2930) wifi:wifi driver task: 3fcde128, prio:23, stack:6144, core=0
I (2930) wifi:wifi firmware version: f3dbad7
I (2930) wifi:wifi certification version: v7.0
I (2930) wifi:config NVS flash: disabled
I (2930) wifi:config nano formatting: enabled
I (2940) wifi:Init data frame dynamic rx buffer num: 8
I (2940) wifi:Init dynamic rx mgmt buffer num: 5
I (2950) wifi:Init management short buffer num: 32
I (2950) wifi:Init dynamic tx buffer num: 32
I (2950) wifi:Init static tx FG buffer num: 2
I (2960) wifi:Init static rx buffer size: 1600
I (2960) wifi:Init static rx buffer num: 6
I (2970) wifi:Init dynamic rx buffer num: 8
I (2970) wifi_init: rx ba win: 6
I (2970) wifi_init: accept mbox: 6
I (2980) wifi_init: tcpip mbox: 32
I (2980) wifi_init: udp mbox: 6
I (2980) wifi_init: tcp mbox: 6
I (3000) wifi_init: tcp tx win: 5760
I (3000) wifi_init: tcp rx win: 5760
I (3000) wifi_init: tcp mss: 1440
I (3000) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3040) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3040) wifi:enable tsf
I (3430) WXT185Display: Screensaver timer callback triggered
I (3430) WXT185Display: Device is in starting mode, skip screensaver
I (4430) WXT185Display: Screensaver timer callback triggered
I (4430) WXT185Display: Device is in starting mode, skip screensaver
I (5430) WXT185Display: Screensaver timer callback triggered
I (5430) WXT185Display: Device is in starting mode, skip screensaver
I (5460) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -49, Channel: 11, Authmode: 3
I (5460) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -85, Channel: 11, Authmode: 3
W (5460) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6430) WXT185Display: Screensaver timer callback triggered
I (6430) WXT185Display: Device is in starting mode, skip screensaver
I (6750) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6750) wifi:state: init -> auth (0xb0)
I (7430) WXT185Display: Screensaver timer callback triggered
I (7430) WXT185Display: Device is in starting mode, skip screensaver
I (7430) WXT185Display: Crypto update timer triggered
I (7510) WXT185Display: Checking device state for network ready
I (7750) wifi:state: auth -> init (0x200)
I (7760) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7760) wifi: Reconnecting BSO (attempt 1 / 5)
I (7770) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7770) wifi:state: init -> auth (0xb0)
I (7780) wifi:state: auth -> assoc (0x0)
I (7780) wifi:state: assoc -> run (0x10)
I (7800) wifi:connected with BSO, aid = 8, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (7800) wifi:security: WPA2-PSK, phy: bgn, rssi: -84
I (7800) wifi:pm start, type: 1

I (7800) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (7810) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (7850) wifi:AP's beacon interval = 102400 us, DTIM period = 1


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048e22
--- 0x40048e22: uart_rx_readbuff in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa394 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa394h (2073492) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa3b4
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5c5c data starts 0x2fa3bc
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa3bc load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa3bc vaddr=3fc9dd00 size=05c5ch ( 23644) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa3bc, size=0x5c5c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bce8 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bce8h (1686760) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd08
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2c20 data starts 0x49bd10
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd10 load_addr 0x3fca395c
I (548) esp_image: segment 3: paddr=0049bd10 vaddr=3fca395c size=02c20h ( 11296) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd10, size=0x2c20, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e930
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e938
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e938 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e938 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e938, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b460c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4614
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4614 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4614 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4614, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4634
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa394
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bce8
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  51817e8a6...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1810) waveshare_lcd_1_85: Initialize QSPI bus
I (1820) waveshare_lcd_1_85: Install panel IO
I (1820) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1850) st77916: LCD panel create success, version: 1.0.1
I (2100) Display: Power management not supported
I (2100) WXT185Display: Initializing WXT185 Display
I (2100) WXT185Display: Theme: light
I (2150) WXT185Display: Turning display on
I (2150) WXT185Display: Initialize LVGL library
I (2150) WXT185Display: Initialize LVGL port
I (2150) LVGL: Starting LVGL task
I (2150) WXT185Display: Adding LCD display
I (2160) WXT185Display: Initialized default settings:
I (2160) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2170) WXT185Display: Last activity time initialized to: ld
I (2170) WXT185Display: Screensaver timer created
I (2180) WXT185Display: Crypto update timer created
I (2180) WXT185Display: Screensaver time update timer created
I (2190) WXT185Display: BiJieCoins initialized
I (2190) WXT185Display: Setting up WXT185 UI
I (2190) WXT185Display: Created page view container
I (2200) WXT185Display: Enabling horizontal scrolling
I (2200) WXT185Display: Added touch event handlers to page view
I (2210) WXT185Display: Created common components
I (2210) WXT185Display: Creating chat page
I (2220) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2230) WXT185Display: Chat page creation completed
I (2230) WXT185Display: Created chat page
I (2230) WXT185Display: Creating crypto page
I (2240) WXT185Display: Added touch event handlers to crypto page begin
I (2280) WXT185Display: Crypto page creation completed
I (2280) WXT185Display: Created crypto page
I (2280) WXT185Display: Creating settings page
I (2280) WXT185Display: Settings page background created
I (2290) WXT185Display: Added touch event handlers to settings page begin
I (2300) WXT185Display: Settings title label created
I (2300) WXT185Display: Theme label created
I (2310) WXT185Display: Theme roller created
I (2320) WXT185Display: Default crypto label created
I (2320) WXT185Display: Default crypto roller created
I (2330) WXT185Display: K-line time label created
I (2330) WXT185Display: K-line time roller created
I (2340) WXT185Display: Screensaver label created
I (2340) WXT185Display: Screensaver switch created
I (2340) WXT185Display: Realtime crypto label created
I (2340) WXT185Display: Realtime crypto switch created
I (2350) WXT185Display: KLine crypto label created
I (2350) WXT185Display: KLine crypto switch created
I (2360) WXT185Display: Save button created
I (2360) WXT185Display: Save button label created
I (2360) WXT185Display: Settings page creation completed
I (2370) WXT185Display: Created settings page
I (2370) WXT185Display: Creating screensaver page
I (2380) WXT185Display: Added touch event handlers to screensaver page start
I (2380) WXT185Display: Added touch event handlers to screensaver page end
I (2400) WXT185Display: Screensaver page creation completed
I (2400) WXT185Display: Created screensaver page
I (2400) WXT185Display: Applying theme
I (2400) WXT185Display: Applying crypto page theme
I (2410) WXT185Display: Applying settings page theme
I (2410) WXT185Display: Applying screensaver theme
I (2420) WXT185Display: Theme applied successfully
I (2420) WXT185Display: Applied theme
I (2430) WXT185Display: Started screensaver timer
I (2430) WXT185Display: Crypto update timer started
I (2430) WXT185Display: Started crypto update timer
I (2440) WXT185Display: Connecting to BiJie coins service
I (2440) WXT185Display: Checking device state for network ready
I (2450) WXT185Display: Connected to BiJie coins
I (2450) WXT185Display: Switching to page 1
I (2460) WXT185Display: Switching to crypto page
I (2470) WXT185Display: WXT185 UI setup completed
I (2470) WXT185Display: WXT185Display constructor completed
I (2470) button: IoT Button Version: 4.1.3
I (2480) waveshare_lcd_1_85: Initializing touch controller...
I (2480) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2490) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2500) i2c.master: I2C transaction unexpected nack detected
E (2500) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2510) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2510) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2520) CST816S: read_id(181): I2C read failed
E (2530) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2530) CST816S: Initialization failed!
W (2540) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2650) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2660) i2c.master: I2C transaction unexpected nack detected
E (2660) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2660) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2660) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2670) CST816S: read_id(181): I2C read failed
E (2670) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2680) CST816S: Initialization failed!
W (2680) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2790) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2800) i2c.master: I2C transaction unexpected nack detected
E (2800) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2800) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2800) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2810) CST816S: read_id(181): I2C read failed
E (2820) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2820) CST816S: Initialization failed!
W (2830) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (2840) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (2840) MCP: Add tool: self.ui.uppage
I (2850) MCP: Add tool: self.ui.downpage
I (2850) Backlight: Set brightness to 75
I (2860) Application: STATE: starting
I (2860) WXT185Display: Device state changed from 0 to 1
I (2860) WXT185Display: Other device state change, treating as user activity
I (2870) WXT185Display: User activity detected, updating last activity time
I (2870) WXT185Display: Scroll end: (360, 0)
I (2880) NoAudioCodec: Simplex channels created
I (2880) WXT185Display: Current page index: 1
I (2880) AudioCodec: Set input enable to true
I (2890) AudioCodec: Set output enable to true
I (2900) AudioCodec: Audio codec started
I (2910) pp: pp rom version: e7ae62f
I (2910) net80211: net80211 rom version: e7ae62f
I (2930) wifi:wifi driver task: 3fcde160, prio:23, stack:6144, core=0
I (2930) wifi:wifi firmware version: f3dbad7
I (2930) wifi:wifi certification version: v7.0
I (2930) wifi:config NVS flash: disabled
I (2930) wifi:config nano formatting: enabled
I (2940) wifi:Init data frame dynamic rx buffer num: 8
I (2940) wifi:Init dynamic rx mgmt buffer num: 5
I (2950) wifi:Init management short buffer num: 32
I (2950) wifi:Init dynamic tx buffer num: 32
I (2950) wifi:Init static tx FG buffer num: 2
I (2960) wifi:Init static rx buffer size: 1600
I (2960) wifi:Init static rx buffer num: 6
I (2970) wifi:Init dynamic rx buffer num: 8
I (2970) wifi_init: rx ba win: 6
I (2970) wifi_init: accept mbox: 6
I (2980) wifi_init: tcpip mbox: 32
I (2980) wifi_init: udp mbox: 6
I (2980) wifi_init: tcp mbox: 6
I (3000) wifi_init: tcp tx win: 5760
I (3000) wifi_init: tcp rx win: 5760
I (3000) wifi_init: tcp mss: 1440
I (3000) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3040) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3040) wifi:enable tsf
I (3430) WXT185Display: Screensaver timer callback triggered
I (3430) WXT185Display: Device is in starting mode, skip screensaver
I (4430) WXT185Display: Screensaver timer callback triggered
I (4430) WXT185Display: Device is in starting mode, skip screensaver
I (5430) WXT185Display: Screensaver timer callback triggered
I (5430) WXT185Display: Device is in starting mode, skip screensaver
I (5460) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -44, Channel: 11, Authmode: 3
I (5460) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -88, Channel: 11, Authmode: 3
W (5460) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6430) WXT185Display: Screensaver timer callback triggered
I (6430) WXT185Display: Device is in starting mode, skip screensaver
I (6750) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6750) wifi:state: init -> auth (0xb0)
I (6760) wifi:state: auth -> assoc (0x0)
I (6760) wifi:state: assoc -> run (0x10)
I (6780) wifi:connected with BSO, aid = 10, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (6780) wifi:security: WPA2-PSK, phy: bgn, rssi: -46
I (6790) wifi:pm start, type: 1

I (6790) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6800) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6810) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7430) WXT185Display: Screensaver timer callback triggered
I (7430) WXT185Display: Device is in starting mode, skip screensaver
I (7430) WXT185Display: Crypto update timer triggered


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490d2
--- 0x400490d2: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa394 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa394h (2073492) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa3b4
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5c5c data starts 0x2fa3bc
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa3bc load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa3bc vaddr=3fc9dd00 size=05c5ch ( 23644) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa3bc, size=0x5c5c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (463) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bce8 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bce8h (1686760) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd08
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2c20 data starts 0x49bd10
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd10 load_addr 0x3fca395c
I (548) esp_image: segment 3: paddr=0049bd10 vaddr=3fca395c size=02c20h ( 11296) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd10, size=0x2c20, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e930
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e938
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e938 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e938 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e938, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b460c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4614
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4614 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4614 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4614, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4634
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa394
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bce8
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  51817e8a6...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1800) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1810) waveshare_lcd_1_85: Initialize QSPI bus
I (1820) waveshare_lcd_1_85: Install panel IO
I (1820) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1850) st77916: LCD panel create success, version: 1.0.1
I (2100) Display: Power management not supported
I (2100) WXT185Display: Initializing WXT185 Display
I (2100) WXT185Display: Theme: light
I (2150) WXT185Display: Turning display on
I (2150) WXT185Display: Initialize LVGL library
I (2150) WXT185Display: Initialize LVGL port
I (2150) LVGL: Starting LVGL task
I (2150) WXT185Display: Adding LCD display
I (2160) WXT185Display: Initialized default settings:
I (2160) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2170) WXT185Display: Last activity time initialized to: ld
I (2170) WXT185Display: Screensaver timer created
I (2180) WXT185Display: Crypto update timer created
I (2180) WXT185Display: Screensaver time update timer created
I (2190) WXT185Display: BiJieCoins initialized
I (2190) WXT185Display: Setting up WXT185 UI
I (2190) WXT185Display: Created page view container
I (2200) WXT185Display: Enabling horizontal scrolling
I (2200) WXT185Display: Added touch event handlers to page view
I (2210) WXT185Display: Created common components
I (2210) WXT185Display: Creating chat page
I (2220) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2230) WXT185Display: Chat page creation completed
I (2230) WXT185Display: Created chat page
I (2230) WXT185Display: Creating crypto page
I (2240) WXT185Display: Added touch event handlers to crypto page begin
I (2280) WXT185Display: Crypto page creation completed
I (2280) WXT185Display: Created crypto page
I (2280) WXT185Display: Creating settings page
I (2280) WXT185Display: Settings page background created
I (2290) WXT185Display: Added touch event handlers to settings page begin
I (2300) WXT185Display: Settings title label created
I (2300) WXT185Display: Theme label created
I (2310) WXT185Display: Theme roller created
I (2320) WXT185Display: Default crypto label created
I (2320) WXT185Display: Default crypto roller created
I (2330) WXT185Display: K-line time label created
I (2330) WXT185Display: K-line time roller created
I (2340) WXT185Display: Screensaver label created
I (2340) WXT185Display: Screensaver switch created
I (2340) WXT185Display: Realtime crypto label created
I (2340) WXT185Display: Realtime crypto switch created
I (2350) WXT185Display: KLine crypto label created
I (2350) WXT185Display: KLine crypto switch created
I (2360) WXT185Display: Save button created
I (2360) WXT185Display: Save button label created
I (2360) WXT185Display: Settings page creation completed
I (2370) WXT185Display: Created settings page
I (2370) WXT185Display: Creating screensaver page
I (2380) WXT185Display: Added touch event handlers to screensaver page start
I (2380) WXT185Display: Added touch event handlers to screensaver page end
I (2400) WXT185Display: Screensaver page creation completed
I (2400) WXT185Display: Created screensaver page
I (2400) WXT185Display: Applying theme
I (2400) WXT185Display: Applying crypto page theme
I (2410) WXT185Display: Applying settings page theme
I (2410) WXT185Display: Applying screensaver theme
I (2420) WXT185Display: Theme applied successfully
I (2420) WXT185Display: Applied theme
I (2430) WXT185Display: Started screensaver timer
I (2430) WXT185Display: Crypto update timer started
I (2430) WXT185Display: Started crypto update timer
I (2440) WXT185Display: Connecting to BiJie coins service
I (2440) WXT185Display: Checking device state for network ready
I (2450) WXT185Display: Connected to BiJie coins
I (2450) WXT185Display: Switching to page 1
I (2460) WXT185Display: Switching to crypto page
I (2470) WXT185Display: WXT185 UI setup completed
I (2470) WXT185Display: WXT185Display constructor completed
I (2470) button: IoT Button Version: 4.1.3
I (2480) waveshare_lcd_1_85: Initializing touch controller...
I (2480) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2490) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2500) i2c.master: I2C transaction unexpected nack detected
E (2500) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2510) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2510) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2520) CST816S: read_id(181): I2C read failed
E (2530) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2530) CST816S: Initialization failed!
W (2540) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2650) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2660) i2c.master: I2C transaction unexpected nack detected
E (2660) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2660) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2660) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2670) CST816S: read_id(181): I2C read failed
E (2670) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2680) CST816S: Initialization failed!
W (2680) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2790) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2800) i2c.master: I2C transaction unexpected nack detected
E (2800) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2800) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2800) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2810) CST816S: read_id(181): I2C read failed
E (2820) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2820) CST816S: Initialization failed!
W (2830) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (2840) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (2840) MCP: Add tool: self.ui.uppage
I (2850) MCP: Add tool: self.ui.downpage
I (2850) Backlight: Set brightness to 75
I (2860) Application: STATE: starting
I (2860) WXT185Display: Device state changed from 0 to 1
I (2860) WXT185Display: Other device state change, treating as user activity
I (2870) WXT185Display: User activity detected, updating last activity time
I (2870) WXT185Display: Scroll end: (360, 0)
I (2880) NoAudioCodec: Simplex channels created
I (2880) WXT185Display: Current page index: 1
I (2890) AudioCodec: Set input enable to true
I (2890) AudioCodec: Set output enable to true
I (2900) AudioCodec: Audio codec started
I (2910) pp: pp rom version: e7ae62f
I (2910) net80211: net80211 rom version: e7ae62f
I (2930) wifi:wifi driver task: 3fcde220, prio:23, stack:6144, core=0
I (2930) wifi:wifi firmware version: f3dbad7
I (2930) wifi:wifi certification version: v7.0
I (2930) wifi:config NVS flash: disabled
I (2930) wifi:config nano formatting: enabled
I (2940) wifi:Init data frame dynamic rx buffer num: 8
I (2940) wifi:Init dynamic rx mgmt buffer num: 5
I (2950) wifi:Init management short buffer num: 32
I (2950) wifi:Init dynamic tx buffer num: 32
I (2950) wifi:Init static tx FG buffer num: 2
I (2960) wifi:Init static rx buffer size: 1600
I (2960) wifi:Init static rx buffer num: 6
I (2970) wifi:Init dynamic rx buffer num: 8
I (2970) wifi_init: rx ba win: 6
I (2970) wifi_init: accept mbox: 6
I (2980) wifi_init: tcpip mbox: 32
I (2980) wifi_init: udp mbox: 6
I (2980) wifi_init: tcp mbox: 6
I (2990) wifi_init: tcp tx win: 5760
I (3000) wifi_init: tcp rx win: 5760
I (3000) wifi_init: tcp mss: 1440
I (3000) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3040) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3040) wifi:enable tsf
I (3430) WXT185Display: Screensaver timer callback triggered
I (3430) WXT185Display: Device is in starting mode, skip screensaver
I (4430) WXT185Display: Screensaver timer callback triggered
I (4430) WXT185Display: Device is in starting mode, skip screensaver
I (5430) WXT185Display: Screensaver timer callback triggered
I (5430) WXT185Display: Device is in starting mode, skip screensaver
I (5460) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -35, Channel: 11, Authmode: 3
I (5460) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -81, Channel: 11, Authmode: 3
W (5460) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6430) WXT185Display: Screensaver timer callback triggered
I (6430) WXT185Display: Device is in starting mode, skip screensaver
I (6750) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6750) wifi:state: init -> auth (0xb0)
I (6770) wifi:state: auth -> assoc (0x0)
I (6780) wifi:state: assoc -> run (0x10)
I (6800) wifi:connected with BSO, aid = 10, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (6800) wifi:security: WPA2-PSK, phy: bgn, rssi: -43
I (6800) wifi:pm start, type: 1

I (6800) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (6810) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (6840) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7430) WXT185Display: Screensaver timer callback triggered
I (7430) WXT185Display: Device is in starting mode, skip screensaver
I (7430) WXT185Display: Crypto update timer triggered
I (7510) WXT185Display: Checking device state for network ready
I (7860) wifi:<ba-add>idx:0 (ifx:0, c2:b3:ec:f5:56:c2), tid:0, ssn:0, winSize:64
I (7880) wifi: Got IP: 192.168.3.147


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d0b
--- 0x40048d0b: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa4f4 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa4f4h (2073844) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa514
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5afc data starts 0x2fa51c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa51c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa51c vaddr=3fc9dd00 size=05afch ( 23292) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa51c, size=0x5afc, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19be2c data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19be2ch (1687084) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be4c
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2d80 data starts 0x49be54
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be54 load_addr 0x3fca37fc
I (548) esp_image: segment 3: paddr=0049be54 vaddr=3fca37fc size=02d80h ( 11648) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be54, size=0x2d80, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ebd4
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49ebdc
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49ebdc load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049ebdc vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049ebdc, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (662) esp_image: loading segment header 5 at offset 0x4b48b0
D (662) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b48b8
V (675) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b48b8 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b48b8 vaddr=600fe000 size=00020h (    32) load
D (694) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b48b8, size=0x20, will be mapped to vaddr=0x3c000000
V (708) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b48d8
I (725) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (735) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (742) boot: calling set_cache_and_start_app
D (746) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa4f4
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19be2c
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (810) octal_psram: density      : 0x03 (64 Mbit)
I (812) octal_psram: good-die     : 0x01 (Pass)
I (816) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (839) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (844) octal_psram: DriveStrength: 0x00 (1/1)
I (849) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (875) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (882) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  f1765e9dd...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (899) efuse_init: Max chip rev:     v0.99
I (903) efuse_init: Chip rev:         v0.2
I (907) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (929) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (939) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (955) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1800) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1800) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1800) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
W (1800) waveshare_lcd_1_85: IO expander not available for touch reset
I (1910) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (2010) waveshare_lcd_1_85: I2C device added successfully
I (2010) waveshare_lcd_1_85: Initialize QSPI bus
I (2010) waveshare_lcd_1_85: Install panel IO
I (2010) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2040) st77916: LCD panel create success, version: 1.0.1
I (2290) Display: Power management not supported
I (2290) WXT185Display: Initializing WXT185 Display
I (2290) WXT185Display: Theme: light
I (2340) WXT185Display: Turning display on
I (2340) WXT185Display: Initialize LVGL library
I (2340) WXT185Display: Initialize LVGL port
I (2340) LVGL: Starting LVGL task
I (2340) WXT185Display: Adding LCD display
I (2350) WXT185Display: Initialized default settings:
I (2350) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2360) WXT185Display: Last activity time initialized to: ld
I (2360) WXT185Display: Screensaver timer created
I (2370) WXT185Display: Crypto update timer created
I (2370) WXT185Display: Screensaver time update timer created
I (2380) WXT185Display: BiJieCoins initialized
I (2380) WXT185Display: Setting up WXT185 UI
I (2380) WXT185Display: Created page view container
I (2390) WXT185Display: Enabling horizontal scrolling
I (2390) WXT185Display: Added touch event handlers to page view
I (2400) WXT185Display: Created common components
I (2400) WXT185Display: Creating chat page
I (2410) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2420) WXT185Display: Chat page creation completed
I (2420) WXT185Display: Created chat page
I (2420) WXT185Display: Creating crypto page
I (2430) WXT185Display: Added touch event handlers to crypto page begin
I (2470) WXT185Display: Crypto page creation completed
I (2470) WXT185Display: Created crypto page
I (2470) WXT185Display: Creating settings page
I (2470) WXT185Display: Settings page background created
I (2480) WXT185Display: Added touch event handlers to settings page begin
I (2490) WXT185Display: Settings title label created
I (2490) WXT185Display: Theme label created
I (2500) WXT185Display: Theme roller created
I (2510) WXT185Display: Default crypto label created
I (2510) WXT185Display: Default crypto roller created
I (2520) WXT185Display: K-line time label created
I (2520) WXT185Display: K-line time roller created
I (2530) WXT185Display: Screensaver label created
I (2530) WXT185Display: Screensaver switch created
I (2530) WXT185Display: Realtime crypto label created
I (2530) WXT185Display: Realtime crypto switch created
I (2540) WXT185Display: KLine crypto label created
I (2540) WXT185Display: KLine crypto switch created
I (2550) WXT185Display: Save button created
I (2550) WXT185Display: Save button label created
I (2550) WXT185Display: Settings page creation completed
I (2560) WXT185Display: Created settings page
I (2560) WXT185Display: Creating screensaver page
I (2570) WXT185Display: Added touch event handlers to screensaver page start
I (2570) WXT185Display: Added touch event handlers to screensaver page end
I (2590) WXT185Display: Screensaver page creation completed
I (2590) WXT185Display: Created screensaver page
I (2590) WXT185Display: Applying theme
I (2590) WXT185Display: Applying crypto page theme
I (2600) WXT185Display: Applying settings page theme
I (2600) WXT185Display: Applying screensaver theme
I (2610) WXT185Display: Theme applied successfully
I (2610) WXT185Display: Applied theme
I (2620) WXT185Display: Started screensaver timer
I (2620) WXT185Display: Crypto update timer started
I (2620) WXT185Display: Started crypto update timer
I (2630) WXT185Display: Connecting to BiJie coins service
I (2630) WXT185Display: Checking device state for network ready
I (2640) WXT185Display: Connected to BiJie coins
I (2640) WXT185Display: Switching to page 1
I (2650) WXT185Display: Switching to crypto page
I (2660) WXT185Display: WXT185 UI setup completed
I (2660) WXT185Display: WXT185Display constructor completed
I (2660) button: IoT Button Version: 4.1.3
I (2670) waveshare_lcd_1_85: Initializing touch controller...
I (2670) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2680) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2690) i2c.master: I2C transaction unexpected nack detected
E (2690) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2700) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2700) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2710) CST816S: read_id(181): I2C read failed
E (2720) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2720) CST816S: Initialization failed!
W (2720) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2840) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2850) i2c.master: I2C transaction unexpected nack detected
E (2850) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2850) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2850) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2860) CST816S: read_id(181): I2C read failed
E (2860) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2870) CST816S: Initialization failed!
W (2870) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2980) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2990) i2c.master: I2C transaction unexpected nack detected
E (2990) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2990) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2990) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (3000) CST816S: read_id(181): I2C read failed
E (3010) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3010) CST816S: Initialization failed!
W (3020) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (3030) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (3030) MCP: Add tool: self.ui.uppage
I (3040) MCP: Add tool: self.ui.downpage
I (3040) Backlight: Set brightness to 75
I (3050) Application: STATE: starting
I (3050) WXT185Display: Device state changed from 0 to 1
I (3050) WXT185Display: Other device state change, treating as user activity
I (3060) WXT185Display: User activity detected, updating last activity time
I (3060) WXT185Display: Scroll end: (360, 0)
I (3070) NoAudioCodec: Simplex channels created
I (3070) WXT185Display: Current page index: 1
I (3070) AudioCodec: Set input enable to true
I (3080) AudioCodec: Set output enable to true
I (3090) AudioCodec: Audio codec started
I (3100) pp: pp rom version: e7ae62f
I (3100) net80211: net80211 rom version: e7ae62f
I (3120) wifi:wifi driver task: 3fcde1a4, prio:23, stack:6144, core=0
I (3120) wifi:wifi firmware version: f3dbad7
I (3120) wifi:wifi certification version: v7.0
I (3120) wifi:config NVS flash: disabled
I (3120) wifi:config nano formatting: enabled
I (3130) wifi:Init data frame dynamic rx buffer num: 8
I (3130) wifi:Init dynamic rx mgmt buffer num: 5
I (3140) wifi:Init management short buffer num: 32
I (3140) wifi:Init dynamic tx buffer num: 32
I (3140) wifi:Init static tx FG buffer num: 2
I (3150) wifi:Init static rx buffer size: 1600
I (3150) wifi:Init static rx buffer num: 6
I (3160) wifi:Init dynamic rx buffer num: 8
I (3160) wifi_init: rx ba win: 6
I (3160) wifi_init: accept mbox: 6
I (3170) wifi_init: tcpip mbox: 32
I (3170) wifi_init: udp mbox: 6
I (3170) wifi_init: tcp mbox: 6
I (3180) wifi_init: tcp tx win: 5760
I (3180) wifi_init: tcp rx win: 5760
I (3190) wifi_init: tcp mss: 1440
I (3190) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3230) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3230) wifi:enable tsf
I (3620) WXT185Display: Screensaver timer callback triggered
I (3620) WXT185Display: Device is in starting mode, skip screensaver
I (4620) WXT185Display: Screensaver timer callback triggered
I (4620) WXT185Display: Device is in starting mode, skip screensaver
I (5620) WXT185Display: Screensaver timer callback triggered
I (5620) WXT185Display: Device is in starting mode, skip screensaver
I (5650) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -42, Channel: 11, Authmode: 3
I (5650) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -82, Channel: 11, Authmode: 3
W (5650) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6620) WXT185Display: Screensaver timer callback triggered
I (6620) WXT185Display: Device is in starting mode, skip screensaver
I (6940) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6950) wifi:state: init -> auth (0xb0)
I (7620) WXT185Display: Screensaver timer callback triggered
I (7620) WXT185Display: Device is in starting mode, skip screensaver
I (7620) WXT185Display: Crypto update timer triggered
I (7710) WXT185Display: Checking device state for network ready
I (7950) wifi:state: auth -> init (0x200)
I (7950) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7950) wifi: Reconnecting BSO (attempt 1 / 5)
I (8020) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (8020) wifi:state: init -> auth (0xb0)
I (8020) wifi:state: auth -> assoc (0x0)
I (8030) wifi:state: assoc -> run (0x10)
I (8040) wifi:connected with BSO, aid = 8, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (8040) wifi:security: WPA2-PSK, phy: bgn, rssi: -87
I (8050) wifi:pm start, type: 1

I (8050) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (8060) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (8120) wifi:AP's beacon interval = 102400 us, DTIM period = 1
E (8710) WXT185Display: Network is not ready after waiting
W (8710) WXT185Display: Network not ready, skipping crypto data update
I (8710) WXT185Display: Screensaver timer callback triggered
I (8710) WXT185Display: Device is in starting mode, skip screensaver


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490d5
--- 0x400490d5: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa574 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa574h (2073972) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa594
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5a7c data starts 0x2fa59c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa59c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa59c vaddr=3fc9dd00 size=05a7ch ( 23164) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa59c, size=0x5a7c, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19be74 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19be74h (1687156) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be94
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2e00 data starts 0x49be9c
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be9c load_addr 0x3fca377c
I (548) esp_image: segment 3: paddr=0049be9c vaddr=3fca377c size=02e00h ( 11776) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be9c, size=0x2e00, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ec9c
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eca4
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eca4 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eca4 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eca4, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4978
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4980
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4980 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4980 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4980, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b49a0
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa574
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19be74
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  059a9d1c6...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1000) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1600) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1810) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1810) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1810) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
Guru Meditation Error: Core  0 panic'ed (LoadProhibited). Exception was unhandled.

Core  0 register dump:
PC      : 0x42024067  PS      : 0x00060830  A0      : 0x82024620  A1      : 0x3fcb1950
--- 0x42024067: CustomBoard::cst816_reset() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:395
--- (inlined by) CustomBoard::InitializeI2cTouch() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:474
A2      : 0x3fcec8c4  A3      : 0x00000640  A4      : 0x3fcec8e8  A5      : 0x00000000
A6      : 0x00000000  A7      : 0x3c1ad15d  A8      : 0x82024067  A9      : 0x3fcb1930
A10     : 0x00000712  A11     : 0x3c1ad15d  A12     : 0x3c1ad6fe  A13     : 0x00000712
A14     : 0x3c1ad15d  A15     : 0x00000015  SAR     : 0x00000004  EXCCAUSE: 0x0000001c
EXCVADDR: 0x0000002c  LBEG    : 0x40056f5c  LEND    : 0x40056f72  LCOUNT  : 0xffffffff
--- 0x40056f5c: memcpy in ROM
--- 0x40056f72: memcpy in ROM


Backtrace: 0x42024064:0x3fcb1950 0x4202461d:0x3fcb19c0 0x42024709:0x3fcb1a20 0x4200f43f:0x3fcb1a40 0x420154de:0x3fcb1a60 0x42021931:0x3fcb1be0 0x42199b47:0x3fcb1c00 0x40383c81:0x3fcb1c30
--- 0x42024064: CustomBoard::cst816_reset() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:395
--- (inlined by) CustomBoard::InitializeI2cTouch() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:474
--- 0x4202461d: CustomBoard::CustomBoard() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:670
--- 0x42024709: create_board() at E:/AI/xiaozhi-esp32/main/boards/esp32-s3-touch-lcd-1.85/esp32-s3-touch-lcd-1.85.cc:710
--- 0x4200f43f: Board::GetInstance() at E:/AI/xiaozhi-esp32/main/boards/common/board.h:32
--- 0x420154de: Application::Start() at E:/AI/xiaozhi-esp32/main/application.cc:330
--- 0x42021931: app_main at E:/AI/xiaozhi-esp32/main/main.cc:29
--- 0x42199b47: main_task



ELF file SHA256: 059a9d1c6
 at E:/Espressif/frameworks/esp-idf-v5.5/components/freertos/app_startup.c:208
--- 0x40383c81: vPortTaskWrapper at E:/Espressif/frameworks/esp-idf-v5.5/components/freertos/FreeRTOS-Kernel/portable/xtensa/port.c:139

I (1891) esp_core_dump_uart: Print core dump to uart...
I (1896) esp_core_dump_uart: Press Enter to print core dump to UART...
--- Initiating core dump!
--- Core dump started (further output muted)
--- Received  12 kB...

e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x400490d5
--- 0x400490d5: usb_uart_device_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa560 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa560h (2073952) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa580
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5a90 data starts 0x2fa588
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa588 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa588 vaddr=3fc9dd00 size=05a90h ( 23184) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa588, size=0x5a90, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19be6c data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19be6ch (1687148) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be8c
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2dec data starts 0x49be94
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be94 load_addr 0x3fca3790
I (548) esp_image: segment 3: paddr=0049be94 vaddr=3fca3790 size=02dech ( 11756) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be94, size=0x2dec, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ec80
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49ec88
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49ec88 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049ec88 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049ec88, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b495c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4964
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4964 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4964 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4964, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4984
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa560
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19be6c
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  6736cf7fd...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1000) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1600) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1810) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1810) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1810) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1810) waveshare_lcd_1_85: Resetting CST816 touch controller
I (1940) waveshare_lcd_1_85: CST816 reset completed via EXIO1
I (2040) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (2140) waveshare_lcd_1_85: I2C device added successfully
I (2140) waveshare_lcd_1_85: Initialize QSPI bus
I (2140) waveshare_lcd_1_85: Install panel IO
I (2140) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2170) st77916: LCD panel create success, version: 1.0.1
I (2420) Display: Power management not supported
I (2420) WXT185Display: Initializing WXT185 Display
I (2420) WXT185Display: Theme: light
I (2470) WXT185Display: Turning display on
I (2470) WXT185Display: Initialize LVGL library
I (2470) WXT185Display: Initialize LVGL port
I (2470) LVGL: Starting LVGL task
I (2470) WXT185Display: Adding LCD display
I (2480) WXT185Display: Initialized default settings:
I (2480) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2490) WXT185Display: Last activity time initialized to: ld
I (2490) WXT185Display: Screensaver timer created
I (2500) WXT185Display: Crypto update timer created
I (2500) WXT185Display: Screensaver time update timer created
I (2510) WXT185Display: BiJieCoins initialized
I (2510) WXT185Display: Setting up WXT185 UI
I (2510) WXT185Display: Created page view container
I (2520) WXT185Display: Enabling horizontal scrolling
I (2520) WXT185Display: Added touch event handlers to page view
I (2530) WXT185Display: Created common components
I (2530) WXT185Display: Creating chat page
I (2540) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2550) WXT185Display: Chat page creation completed
I (2550) WXT185Display: Created chat page
I (2550) WXT185Display: Creating crypto page
I (2560) WXT185Display: Added touch event handlers to crypto page begin
I (2600) WXT185Display: Crypto page creation completed
I (2600) WXT185Display: Created crypto page
I (2600) WXT185Display: Creating settings page
I (2600) WXT185Display: Settings page background created
I (2610) WXT185Display: Added touch event handlers to settings page begin
I (2620) WXT185Display: Settings title label created
I (2620) WXT185Display: Theme label created
I (2630) WXT185Display: Theme roller created
I (2640) WXT185Display: Default crypto label created
I (2640) WXT185Display: Default crypto roller created
I (2650) WXT185Display: K-line time label created
I (2650) WXT185Display: K-line time roller created
I (2660) WXT185Display: Screensaver label created
I (2660) WXT185Display: Screensaver switch created
I (2660) WXT185Display: Realtime crypto label created
I (2660) WXT185Display: Realtime crypto switch created
I (2670) WXT185Display: KLine crypto label created
I (2670) WXT185Display: KLine crypto switch created
I (2680) WXT185Display: Save button created
I (2680) WXT185Display: Save button label created
I (2680) WXT185Display: Settings page creation completed
I (2690) WXT185Display: Created settings page
I (2690) WXT185Display: Creating screensaver page
I (2700) WXT185Display: Added touch event handlers to screensaver page start
I (2700) WXT185Display: Added touch event handlers to screensaver page end
I (2720) WXT185Display: Screensaver page creation completed
I (2720) WXT185Display: Created screensaver page
I (2720) WXT185Display: Applying theme
I (2720) WXT185Display: Applying crypto page theme
I (2730) WXT185Display: Applying settings page theme
I (2730) WXT185Display: Applying screensaver theme
I (2740) WXT185Display: Theme applied successfully
I (2740) WXT185Display: Applied theme
I (2750) WXT185Display: Started screensaver timer
I (2750) WXT185Display: Crypto update timer started
I (2750) WXT185Display: Started crypto update timer
I (2760) WXT185Display: Connecting to BiJie coins service
I (2760) WXT185Display: Checking device state for network ready
I (2770) WXT185Display: Connected to BiJie coins
I (2770) WXT185Display: Switching to page 1
I (2780) WXT185Display: Switching to crypto page
I (2790) WXT185Display: WXT185 UI setup completed
I (2790) WXT185Display: WXT185Display constructor completed
I (2790) button: IoT Button Version: 4.1.3
I (2800) waveshare_lcd_1_85: Initializing touch controller...
I (2800) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2810) waveshare_lcd_1_85: Initialize touch controller CST816S


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048dfc
--- 0x40048dfc: uart_rx_readbuff in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa560 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa560h (2073952) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa580
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5a90 data starts 0x2fa588
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa588 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa588 vaddr=3fc9dd00 size=05a90h ( 23184) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa588, size=0x5a90, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19be6c data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19be6ch (1687148) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49be8c
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2dec data starts 0x49be94
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49be94 load_addr 0x3fca3790
I (548) esp_image: segment 3: paddr=0049be94 vaddr=3fca3790 size=02dech ( 11756) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049be94, size=0x2dec, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ec80
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49ec88
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49ec88 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049ec88 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049ec88, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b495c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4964
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4964 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4964 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4964, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4984
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa560
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19be6c
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  6736cf7fd...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1000) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1600) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1810) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1810) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1810) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1810) waveshare_lcd_1_85: Resetting CST816 touch controller
I (1940) waveshare_lcd_1_85: CST816 reset completed via EXIO1
I (2040) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (2140) waveshare_lcd_1_85: I2C device added successfully
I (2140) waveshare_lcd_1_85: Initialize QSPI bus
I (2140) waveshare_lcd_1_85: Install panel IO
I (2140) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2170) st77916: LCD panel create success, version: 1.0.1
I (2420) Display: Power management not supported
I (2420) WXT185Display: Initializing WXT185 Display
I (2420) WXT185Display: Theme: light
I (2470) WXT185Display: Turning display on
I (2470) WXT185Display: Initialize LVGL library
I (2470) WXT185Display: Initialize LVGL port
I (2470) LVGL: Starting LVGL task
I (2470) WXT185Display: Adding LCD display
I (2480) WXT185Display: Initialized default settings:
I (2480) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2490) WXT185Display: Last activity time initialized to: ld
I (2490) WXT185Display: Screensaver timer created
I (2500) WXT185Display: Crypto update timer created
I (2500) WXT185Display: Screensaver time update timer created
I (2510) WXT185Display: BiJieCoins initialized
I (2510) WXT185Display: Setting up WXT185 UI
I (2510) WXT185Display: Created page view container
I (2520) WXT185Display: Enabling horizontal scrolling
I (2520) WXT185Display: Added touch event handlers to page view
I (2530) WXT185Display: Created common components
I (2530) WXT185Display: Creating chat page
I (2540) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2550) WXT185Display: Chat page creation completed
I (2550) WXT185Display: Created chat page
I (2550) WXT185Display: Creating crypto page
I (2560) WXT185Display: Added touch event handlers to crypto page begin
I (2600) WXT185Display: Crypto page creation completed
I (2600) WXT185Display: Created crypto page
I (2600) WXT185Display: Creating settings page
I (2600) WXT185Display: Settings page background created
I (2610) WXT185Display: Added touch event handlers to settings page begin
I (2620) WXT185Display: Settings title label created
I (2620) WXT185Display: Theme label created
I (2630) WXT185Display: Theme roller created
I (2640) WXT185Display: Default crypto label created
I (2640) WXT185Display: Default crypto roller created
I (2650) WXT185Display: K-line time label created
I (2650) WXT185Display: K-line time roller created
I (2660) WXT185Display: Screensaver label created
I (2660) WXT185Display: Screensaver switch created
I (2660) WXT185Display: Realtime crypto label created
I (2660) WXT185Display: Realtime crypto switch created
I (2670) WXT185Display: KLine crypto label created
I (2670) WXT185Display: KLine crypto switch created
I (2680) WXT185Display: Save button created
I (2680) WXT185Display: Save button label created
I (2680) WXT185Display: Settings page creation completed
I (2690) WXT185Display: Created settings page
I (2690) WXT185Display: Creating screensaver page
I (2700) WXT185Display: Added touch event handlers to screensaver page start
I (2700) WXT185Display: Added touch event handlers to screensaver page end
I (2720) WXT185Display: Screensaver page creation completed
I (2720) WXT185Display: Created screensaver page
I (2720) WXT185Display: Applying theme
I (2720) WXT185Display: Applying crypto page theme
I (2730) WXT185Display: Applying settings page theme
I (2730) WXT185Display: Applying screensaver theme
I (2740) WXT185Display: Theme applied successfully
I (2740) WXT185Display: Applied theme
I (2750) WXT185Display: Started screensaver timer
I (2750) WXT185Display: Crypto update timer started
I (2750) WXT185Display: Started crypto update timer
I (2760) WXT185Display: Connecting to BiJie coins service
I (2760) WXT185Display: Checking device state for network ready
I (2770) WXT185Display: Connected to BiJie coins
I (2770) WXT185Display: Switching to page 1
I (2780) WXT185Display: Switching to crypto page
I (2790) WXT185Display: WXT185 UI setup completed
I (2790) WXT185Display: WXT185Display constructor completed
I (2790) button: IoT Button Version: 4.1.3
I (2800) waveshare_lcd_1_85: Initializing touch controller...
I (2800) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2810) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2820) i2c.master: I2C transaction unexpected nack detected
E (2820) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2830) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2830) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2840) CST816S: read_id(181): I2C read failed
E (2850) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2850) CST816S: Initialization failed!
W (2860) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2970) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2980) i2c.master: I2C transaction unexpected nack detected
E (2980) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2980) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2980) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2990) CST816S: read_id(181): I2C read failed
E (2990) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3000) CST816S: Initialization failed!
W (3000) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (3110) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (3120) i2c.master: I2C transaction unexpected nack detected
E (3120) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (3120) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (3130) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (3130) CST816S: read_id(181): I2C read failed
E (3140) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3140) CST816S: Initialization failed!
W (3150) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (3160) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (3160) MCP: Add tool: self.ui.uppage
I (3170) MCP: Add tool: self.ui.downpage
I (3170) Backlight: Set brightness to 75
I (3180) Application: STATE: starting
I (3180) WXT185Display: Device state changed from 0 to 1
I (3180) WXT185Display: Other device state change, treating as user activity
I (3190) WXT185Display: User activity detected, updating last activity time
I (3190) WXT185Display: Scroll end: (360, 0)
I (3200) NoAudioCodec: Simplex channels created
I (3200) WXT185Display: Current page index: 1
I (3210) AudioCodec: Set input enable to true
I (3210) AudioCodec: Set output enable to true
I (3220) AudioCodec: Audio codec started
I (3230) pp: pp rom version: e7ae62f
I (3230) net80211: net80211 rom version: e7ae62f
I (3240) wifi:wifi driver task: 3fcde294, prio:23, stack:6144, core=0
I (3240) wifi:wifi firmware version: f3dbad7
I (3240) wifi:wifi certification version: v7.0
I (3240) wifi:config NVS flash: disabled
I (3250) wifi:config nano formatting: enabled
I (3250) wifi:Init data frame dynamic rx buffer num: 8
I (3260) wifi:Init dynamic rx mgmt buffer num: 5
I (3260) wifi:Init management short buffer num: 32
I (3260) wifi:Init dynamic tx buffer num: 32
I (3270) wifi:Init static tx FG buffer num: 2
I (3270) wifi:Init static rx buffer size: 1600
I (3280) wifi:Init static rx buffer num: 6
I (3280) wifi:Init dynamic rx buffer num: 8
I (3290) wifi_init: rx ba win: 6
I (3290) wifi_init: accept mbox: 6
I (3290) wifi_init: tcpip mbox: 32
I (3290) wifi_init: udp mbox: 6
I (3300) wifi_init: tcp mbox: 6
I (3300) wifi_init: tcp tx win: 5760
I (3300) wifi_init: tcp rx win: 5760
I (3310) wifi_init: tcp mss: 1440
I (3310) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3360) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3360) wifi:enable tsf
I (3750) WXT185Display: Screensaver timer callback triggered
I (3750) WXT185Display: Device is in starting mode, skip screensaver
I (4750) WXT185Display: Screensaver timer callback triggered
I (4750) WXT185Display: Device is in starting mode, skip screensaver
I (5750) WXT185Display: Screensaver timer callback triggered
I (5750) WXT185Display: Device is in starting mode, skip screensaver
I (5770) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -40, Channel: 11, Authmode: 3
I (5770) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -83, Channel: 11, Authmode: 3
W (5780) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6750) WXT185Display: Screensaver timer callback triggered
I (6750) WXT185Display: Device is in starting mode, skip screensaver
I (7070) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7070) wifi:state: init -> auth (0xb0)
I (7070) wifi:state: auth -> assoc (0x0)
I (7080) wifi:state: assoc -> run (0x10)
I (7100) wifi:connected with BSO, aid = 3, channel 11, BW20, bssid = c2:b3:ec:f5:56:c2
I (7100) wifi:security: WPA2-PSK, phy: bgn, rssi: -43
I (7100) wifi:pm start, type: 1

I (7100) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (7110) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (7120) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7160) wifi:<ba-add>idx:0 (ifx:0, c2:b3:ec:f5:56:c2), tid:0, ssn:0, winSize:64
I (7750) WXT185Display: Screensaver timer callback triggered
I (7750) WXT185Display: Device is in starting mode, skip screensaver
I (7750) WXT185Display: Crypto update timer triggered


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048ede
--- 0x40048ede: recv_packet in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa560 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa560h (2073952) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa580
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5a90 data starts 0x2fa588
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa588 load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa588 vaddr=3fc9dd00 size=05a90h ( 23184) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa588, size=0x5a90, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bd5c data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bd5ch (1686876) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bd7c
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2dec data starts 0x49bd84
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bd84 load_addr 0x3fca3790
I (548) esp_image: segment 3: paddr=0049bd84 vaddr=3fca3790 size=02dech ( 11756) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bd84, size=0x2dec, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49eb70
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49eb78
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49eb78 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049eb78 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049eb78, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b484c
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (670) esp_image: segment data length 0x20 data starts 0x4b4854
V (676) esp_image: MMU page size 0x10000
V (679) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4854 load_addr 0x600fe000
I (687) esp_image: segment 5: paddr=004b4854 vaddr=600fe000 size=00020h (    32) load
D (695) esp_image: free data page_count 0x00000200
D (699) bootloader_flash: rodata starts from paddr=0x004b4854, size=0x20, will be mapped to vaddr=0x3c000000
V (709) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (719) esp_image: image start 0x00100000 end of last section 0x004b4874
I (726) boot: Loaded app from partition at offset 0x100000
I (731) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (739) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (751) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa560
V (758) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (768) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (778) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bd5c
--- 0x42000020: _stext at ??:?
V (785) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (795) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (810) octal_psram: vendor id    : 0x0d (AP)
I (810) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (821) octal_psram: VCC          : 0x01 (3V)
I (825) octal_psram: SRF          : 0x01 (Fast Refresh)
I (830) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (835) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (853) esp_psram: Found 8MB PSRAM device
I (857) esp_psram: Speed: 80MHz
I (860) cpu_start: Multicore app
I (875) cpu_start: Pro cpu start user code
I (875) cpu_start: cpu freq: 240000000 Hz
I (875) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (879) app_init: App version:      1.8.5
I (883) app_init: Compile time:     Aug 16 2025 15:35:20
I (888) app_init: ELF file SHA256:  faca6a278...
I (892) app_init: ESP-IDF:          v5.5
I (896) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (914) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (919) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (924) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (937) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (944) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (949) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (960) main_task: Started on CPU0
I (970) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (970) main_task: Calling app_main()
I (1000) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1000) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1600) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1600) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1600) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1810) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1810) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1810) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1810) waveshare_lcd_1_85: Resetting CST816 touch controller
I (1940) waveshare_lcd_1_85: CST816 reset completed via EXIO1
I (2040) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (2140) waveshare_lcd_1_85: I2C device added successfully
I (2140) waveshare_lcd_1_85: Initialize QSPI bus
I (2140) waveshare_lcd_1_85: Install panel IO
I (2140) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (2170) st77916: LCD panel create success, version: 1.0.1
I (2420) Display: Power management not supported
I (2420) WXT185Display: Initializing WXT185 Display
I (2420) WXT185Display: Theme: light
I (2470) WXT185Display: Turning display on
I (2470) WXT185Display: Initialize LVGL library
I (2470) WXT185Display: Initialize LVGL port
I (2470) LVGL: Starting LVGL task
I (2470) WXT185Display: Adding LCD display
I (2480) WXT185Display: Initialized default settings:
I (2480) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2490) WXT185Display: Last activity time initialized to: ld
I (2490) WXT185Display: Screensaver timer created
I (2500) WXT185Display: Crypto update timer created
I (2500) WXT185Display: Screensaver time update timer created
I (2510) WXT185Display: BiJieCoins initialized
I (2510) WXT185Display: Setting up WXT185 UI
I (2510) WXT185Display: Created page view container
I (2520) WXT185Display: Enabling horizontal scrolling
I (2520) WXT185Display: Added touch event handlers to page view
I (2530) WXT185Display: Created common components
I (2530) WXT185Display: Creating chat page
I (2540) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2550) WXT185Display: Chat page creation completed
I (2550) WXT185Display: Created chat page
I (2550) WXT185Display: Creating crypto page
I (2560) WXT185Display: Added touch event handlers to crypto page begin
I (2600) WXT185Display: Crypto page creation completed
I (2600) WXT185Display: Created crypto page
I (2600) WXT185Display: Creating settings page
I (2600) WXT185Display: Settings page background created
I (2610) WXT185Display: Added touch event handlers to settings page begin
I (2620) WXT185Display: Settings title label created
I (2620) WXT185Display: Theme label created
I (2630) WXT185Display: Theme roller created
I (2640) WXT185Display: Default crypto label created
I (2640) WXT185Display: Default crypto roller created
I (2650) WXT185Display: K-line time label created
I (2650) WXT185Display: K-line time roller created
I (2660) WXT185Display: Screensaver label created
I (2660) WXT185Display: Screensaver switch created
I (2660) WXT185Display: Realtime crypto label created
I (2660) WXT185Display: Realtime crypto switch created
I (2670) WXT185Display: KLine crypto label created
I (2670) WXT185Display: KLine crypto switch created
I (2680) WXT185Display: Save button created
I (2680) WXT185Display: Save button label created
I (2680) WXT185Display: Settings page creation completed
I (2690) WXT185Display: Created settings page
I (2690) WXT185Display: Creating screensaver page
I (2700) WXT185Display: Added touch event handlers to screensaver page start
I (2700) WXT185Display: Added touch event handlers to screensaver page end
I (2720) WXT185Display: Screensaver page creation completed
I (2720) WXT185Display: Created screensaver page
I (2720) WXT185Display: Applying theme
I (2720) WXT185Display: Applying crypto page theme
I (2730) WXT185Display: Applying settings page theme
I (2730) WXT185Display: Applying screensaver theme
I (2740) WXT185Display: Theme applied successfully
I (2740) WXT185Display: Applied theme
I (2750) WXT185Display: Started screensaver timer
I (2750) WXT185Display: Crypto update timer started
I (2750) WXT185Display: Started crypto update timer
I (2760) WXT185Display: Connecting to BiJie coins service
I (2760) WXT185Display: Checking device state for network ready
I (2770) WXT185Display: Connected to BiJie coins
I (2770) WXT185Display: Switching to page 1
I (2780) WXT185Display: Switching to crypto page
I (2790) WXT185Display: WXT185 UI setup completed
I (2790) WXT185Display: Crypto update timer started
I (2790) WXT185Display: WXT185Display constructor completed
I (2800) button: IoT Button Version: 4.1.3
I (2800) waveshare_lcd_1_85: Initializing touch controller...
I (2810) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2810) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2820) i2c.master: I2C transaction unexpected nack detected
E (2820) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2830) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2840) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2850) CST816S: read_id(181): I2C read failed
E (2850) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2860) CST816S: Initialization failed!
W (2860) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2970) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2980) i2c.master: I2C transaction unexpected nack detected
E (2980) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2980) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2980) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2990) CST816S: read_id(181): I2C read failed
E (2990) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3000) CST816S: Initialization failed!
W (3000) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (3110) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (3120) i2c.master: I2C transaction unexpected nack detected
E (3120) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (3120) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (3120) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (3130) CST816S: read_id(181): I2C read failed
E (3140) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (3140) CST816S: Initialization failed!
W (3150) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (3160) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (3160) MCP: Add tool: self.ui.uppage
I (3170) MCP: Add tool: self.ui.downpage
I (3170) Backlight: Set brightness to 75
I (3170) Application: STATE: starting
I (3180) WXT185Display: Device state changed from 0 to 1
I (3180) WXT185Display: Other device state change, treating as user activity
I (3190) WXT185Display: User activity detected, updating last activity time
I (3190) WXT185Display: Scroll end: (360, 0)
I (3200) NoAudioCodec: Simplex channels created
I (3200) WXT185Display: Current page index: 1
I (3200) AudioCodec: Set input enable to true
I (3210) AudioCodec: Set output enable to true
I (3220) AudioCodec: Audio codec started
I (3230) pp: pp rom version: e7ae62f
I (3230) net80211: net80211 rom version: e7ae62f
I (3240) wifi:wifi driver task: 3fcde2a0, prio:23, stack:6144, core=0
I (3240) wifi:wifi firmware version: f3dbad7
I (3240) wifi:wifi certification version: v7.0
I (3240) wifi:config NVS flash: disabled
I (3250) wifi:config nano formatting: enabled
I (3250) wifi:Init data frame dynamic rx buffer num: 8
I (3260) wifi:Init dynamic rx mgmt buffer num: 5
I (3260) wifi:Init management short buffer num: 32
I (3260) wifi:Init dynamic tx buffer num: 32
I (3270) wifi:Init static tx FG buffer num: 2
I (3270) wifi:Init static rx buffer size: 1600
I (3280) wifi:Init static rx buffer num: 6
I (3280) wifi:Init dynamic rx buffer num: 8
I (3290) wifi_init: rx ba win: 6
I (3290) wifi_init: accept mbox: 6
I (3290) wifi_init: tcpip mbox: 32
I (3290) wifi_init: udp mbox: 6
I (3300) wifi_init: tcp mbox: 6
I (3300) wifi_init: tcp tx win: 5760
I (3300) wifi_init: tcp rx win: 5760
I (3320) wifi_init: tcp mss: 1440
I (3320) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3360) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3360) wifi:enable tsf
I (3750) WXT185Display: Screensaver timer callback triggered
I (3750) WXT185Display: Device is in starting mode, skip screensaver
I (4750) WXT185Display: Screensaver timer callback triggered
I (4750) WXT185Display: Device is in starting mode, skip screensaver
I (5750) WXT185Display: Screensaver timer callback triggered
I (5750) WXT185Display: Device is in starting mode, skip screensaver
I (5780) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -35, Channel: 11, Authmode: 3
I (5780) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -80, Channel: 11, Authmode: 3
W (5780) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (6750) WXT185Display: Screensaver timer callback triggered
I (6750) WXT185Display: Device is in starting mode, skip screensaver
I (7070) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7070) wifi:state: init -> auth (0xb0)
I (7750) WXT185Display: Screensaver timer callback triggered
I (7750) WXT185Display: Device is in starting mode, skip screensaver
I (7790) WXT185Display: Crypto update timer triggered
I (7830) WXT185Display: Checking device state for network ready
I (8070) wifi:state: auth -> init (0x200)
I (8070) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (8080) wifi: Reconnecting BSO (attempt 1 / 5)
I (8090) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (8090) wifi:state: init -> auth (0xb0)
I (8100) wifi:state: auth -> assoc (0x0)
I (8100) wifi:state: assoc -> run (0x10)
I (8120) wifi:connected with BSO, aid = 8, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (8120) wifi:security: WPA2-PSK, phy: bgn, rssi: -87
I (8120) wifi:pm start, type: 1

I (8120) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (8130) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (8140) wifi:AP's beacon interval = 102400 us, DTIM period = 1
E (8830) WXT185Display: Network is not ready after waiting
W (8830) WXT185Display: Network not ready, skipping crypto data update
I (8830) WXT185Display: Screensaver timer callback triggered
I (8830) WXT185Display: Device is in starting mode, skip screensaver
I (9070) wifi:<ba-add>idx:0 (ifx:0, c4:17:0e:4b:bd:b8), tid:0, ssn:4, winSize:64
I (9200) wifi: Got IP: 192.168.3.147
I (9200) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (9200) Application: STATE: activating
I (9200) WXT185Display: Device state changed from 1 to 8
I (9200) WXT185Display: Other device state change, treating as user activity
I (9210) WXT185Display: User activity detected, updating last activity time
I (9220) Ota: Current version: 1.8.5
I (9390) esp-x509-crt-bundle: Certificate validated
I (9750) WXT185Display: Screensaver timer callback triggered
I (9750) WXT185Display: Device is in activating mode, skip screensaver
I (10750) WXT185Display: Screensaver timer callback triggered
I (10750) WXT185Display: Device is in activating mode, skip screensaver
I (11750) WXT185Display: Screensaver timer callback triggered
I (11750) WXT185Display: Device is in activating mode, skip screensaver
I (12750) WXT185Display: Screensaver timer callback triggered
I (12750) WXT185Display: Device is in activating mode, skip screensaver
I (12790) WXT185Display: Crypto update timer triggered
I (12880) WXT185Display: Checking device state for network ready
E (13880) WXT185Display: Network is not ready after waiting
W (13880) WXT185Display: Network not ready, skipping crypto data update
I (13880) WXT185Display: Screensaver timer callback triggered
I (13880) WXT185Display: Device is in activating mode, skip screensaver
I (14750) WXT185Display: Screensaver timer callback triggered
I (14750) WXT185Display: Device is in activating mode, skip screensaver
I (15750) WXT185Display: Screensaver timer callback triggered
I (15750) WXT185Display: Device is in activating mode, skip screensaver
I (16230) AudioCodec: Set input enable to false
I (16230) AudioCodec: Set output enable to false
I (16750) WXT185Display: Screensaver timer callback triggered
I (16750) WXT185Display: Device is in activating mode, skip screensaver
I (17750) WXT185Display: Screensaver timer callback triggered
I (17750) WXT185Display: Device is in activating mode, skip screensaver
I (17790) WXT185Display: Crypto update timer triggered
I (17960) WXT185Display: Checking device state for network ready
E (18960) WXT185Display: Network is not ready after waiting
W (18960) WXT185Display: Network not ready, skipping crypto data update
I (18960) SystemInfo: free sram: 96339 minimal sram: 94579
I (18960) WXT185Display: Screensaver timer callback triggered
I (18970) WXT185Display: Device is in activating mode, skip screensaver
I (19750) WXT185Display: Screensaver timer callback triggered
I (19750) WXT185Display: Device is in activating mode, skip screensaver
I (20750) WXT185Display: Screensaver timer callback triggered
I (20750) WXT185Display: Device is in activating mode, skip screensaver
I (21750) WXT185Display: Screensaver timer callback triggered
I (21750) WXT185Display: Device is in activating mode, skip screensaver
I (22750) WXT185Display: Screensaver timer callback triggered
I (22750) WXT185Display: Device is in activating mode, skip screensaver
I (22790) WXT185Display: Crypto update timer triggered
I (23040) WXT185Display: Checking device state for network ready
E (24040) WXT185Display: Network is not ready after waiting
W (24040) WXT185Display: Network not ready, skipping crypto data update
I (24040) WXT185Display: Screensaver timer callback triggered
I (24040) WXT185Display: Device is in activating mode, skip screensaver
I (24750) WXT185Display: Screensaver timer callback triggered
I (24750) WXT185Display: Device is in activating mode, skip screensaver
I (25750) WXT185Display: Screensaver timer callback triggered
I (25750) WXT185Display: Device is in activating mode, skip screensaver
I (26750) WXT185Display: Screensaver timer callback triggered
I (26750) WXT185Display: Device is in activating mode, skip screensaver
I (27750) WXT185Display: Screensaver timer callback triggered
I (27750) WXT185Display: Device is in activating mode, skip screensaver
I (27790) WXT185Display: Crypto update timer triggered
I (28120) WXT185Display: Checking device state for network ready
E (29120) WXT185Display: Network is not ready after waiting
W (29120) WXT185Display: Network not ready, skipping crypto data update
I (29120) SystemInfo: free sram: 96483 minimal sram: 94579
I (29120) WXT185Display: Screensaver timer callback triggered
I (29130) WXT185Display: Device is in activating mode, skip screensaver
I (29750) WXT185Display: Screensaver timer callback triggered
I (29750) WXT185Display: Device is in activating mode, skip screensaver
I (30750) WXT185Display: Screensaver timer callback triggered
I (30750) WXT185Display: Device is in activating mode, skip screensaver
I (31750) WXT185Display: Screensaver timer callback triggered
I (31750) WXT185Display: Device is in activating mode, skip screensaver
I (32120) Ota: Current is the latest version
I (32120) Ota: Running partition: ota_0
I (32120) MCP: Add tool: self.get_device_status
I (32120) MCP: Add tool: self.audio_speaker.set_volume
I (32120) MCP: Add tool: self.screen.set_brightness
I (32130) MCP: Add tool: self.screen.set_theme
I (32130) MQTT: Connecting to endpoint mqtt.xiaozhi.me
I (32450) esp-x509-crt-bundle: Certificate validated
I (32750) WXT185Display: Screensaver timer callback triggered
I (32750) WXT185Display: Device is in activating mode, skip screensaver
I (32790) WXT185Display: Crypto update timer triggered
I (33040) MQTT: Connected to endpoint
I (33040) Application: STATE: idle
I (33040) WXT185Display: Device state changed from 8 to 3
I (33040) WXT185Display: Device entered idle state
I (33040) WXT185Display: Device idle, updating activity time for screensaver
I (33050) WXT185Display: Checking device state for network ready
I (33050) WXT185Display: Network is ready, current state: 3
I (33060) WXT185Display: Connecting to BiJie coins service
W (33070) WXT185Display: Already connecting to BiJie coins, skipping
I (33070) WXT185Display: Updating crypto data from BiJie service
W (33080) WXT185Display: BiJie coins service not connected
I (33080) WXT185Display: Drawing K-line chart
W (33090) WXT185Display: No market data available for currency ID: 1
I (33120) WXT185Display: Setting emotion: neutral
I (33120) MODEL_LOADER: The storage free size is 20864 KB
I (33120) MODEL_LOADER: The partition size is 960 KB
I (33120) MODEL_LOADER: Successfully load srmodels
I (33130) AfeWakeWord: Model 0: wn9_nihaoxiaozhi_tts
I (33130) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v4, mode:0, p:0, (Jun 16 2025 16:18:15)
I (33200) AFE: AFE Version: (1MIC_V250121)
I (33200) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (33210) AFE: AFE Pipeline: [input] ->  -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| -> [output]
I (33220) AfeWakeWord: Audio detection task started, feed size: 512 fetch size: 512
I (33220) AudioCodec: Set input enable to true
I (33220) WXT185Display: Setting chat message - Role: system, Content: ...
I (33240) WXT185Display: User activity detected, updating last activity time
I (33250) AudioService: Resampling audio from 16000 to 24000
I (33250) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
I (33260) AudioCodec: Set output enable to true
I (33270) SystemInfo: free sram: 67911 minimal sram: 66867
I (33750) WXT185Display: Screensaver timer callback triggered
E (33770) WXT185Display: Network is not ready after waiting
E (33770) WXT185Display: Network is not ready, aborting BiJie coins connection
--- To exit from IDF monitor please use "Ctrl+]". Alternatively, you can use Ctrl+T Ctrl+X to exit.
I (34750) WXT185Display: Screensaver timer callback triggered
I (35750) WXT185Display: Screensaver timer callback triggered
I (36750) WXT185Display: Screensaver timer callback triggered
I (37750) WXT185Display: Screensaver timer callback triggered
I (37790) WXT185Display: Crypto update timer triggered
I (37840) WXT185Display: Checking device state for network ready
I (37840) WXT185Display: Network is ready, current state: 3
I (37840) WXT185Display: Connecting to BiJie coins service
W (37840) WXT185Display: Already connecting to BiJie coins, skipping
I (37850) WXT185Display: Updating crypto data from BiJie service
W (37850) WXT185Display: BiJie coins service not connected
I (37860) WXT185Display: Drawing K-line chart
W (37860) WXT185Display: No market data available for currency ID: 1
I (38750) WXT185Display: Screensaver timer callback triggered
I (39750) WXT185Display: Screensaver timer callback triggered
I (40750) WXT185Display: Screensaver timer callback triggered
I (41750) WXT185Display: Screensaver timer callback triggered
I (42230) SystemInfo: free sram: 74411 minimal sram: 64859
I (42750) WXT185Display: Screensaver timer callback triggered
I (42790) WXT185Display: Crypto update timer triggered
I (43000) WXT185Display: Checking device state for network ready
I (43000) WXT185Display: Network is ready, current state: 3
I (43000) WXT185Display: Connecting to BiJie coins service
W (43000) WXT185Display: Already connecting to BiJie coins, skipping
I (43010) WXT185Display: Updating crypto data from BiJie service
W (43010) WXT185Display: BiJie coins service not connected
I (43020) WXT185Display: Drawing K-line chart
W (43020) WXT185Display: No market data available for currency ID: 1
I (43750) WXT185Display: Screensaver timer callback triggered
I (43750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (43750) WXT185Display: Entering screensaver mode begin
I (43750) WXT185Display: Screensaver time update timer started
I (43760) WXT185Display: Updating screensaver content
W (43760) WXT185Display: No market data available for currency ID: 1
I (43770) WXT185Display: Screensaver content updated
I (43770) WXT185Display: Entered screensaver mode end
I (44750) WXT185Display: Screensaver timer callback triggered
I (44750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (45750) WXT185Display: Screensaver timer callback triggered
I (45750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (46750) WXT185Display: Screensaver timer callback triggered
I (46750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (47750) WXT185Display: Screensaver timer callback triggered
I (47750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (47790) WXT185Display: Crypto update timer triggered
I (48050) WXT185Display: Checking device state for network ready
I (48050) WXT185Display: Network is ready, current state: 3
I (48050) WXT185Display: Connecting to BiJie coins service
W (48050) WXT185Display: Already connecting to BiJie coins, skipping
I (48060) WXT185Display: Updating crypto data from BiJie service
W (48060) WXT185Display: BiJie coins service not connected
I (48070) WXT185Display: Updating screensaver content
W (48070) WXT185Display: No market data available for currency ID: 1
I (48080) WXT185Display: Screensaver content updated
I (48080) WXT185Display: Drawing K-line chart
W (48090) WXT185Display: No market data available for currency ID: 1
I (48750) WXT185Display: Screensaver timer callback triggered
I (48750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (49260) AudioCodec: Set output enable to false
I (49750) WXT185Display: Screensaver timer callback triggered
I (49750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (50750) WXT185Display: Screensaver timer callback triggered
I (50750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (51750) WXT185Display: Screensaver timer callback triggered
I (51750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (52230) SystemInfo: free sram: 73803 minimal sram: 64859
I (52750) WXT185Display: Screensaver timer callback triggered
I (52750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (52790) WXT185Display: Crypto update timer triggered
I (52860) WXT185Display: Checking device state for network ready
I (52860) WXT185Display: Network is ready, current state: 3
I (52860) WXT185Display: Connecting to BiJie coins service
W (52860) WXT185Display: Already connecting to BiJie coins, skipping
I (52870) WXT185Display: Updating crypto data from BiJie service
W (52870) WXT185Display: BiJie coins service not connected
I (52880) WXT185Display: Updating screensaver content
W (52880) WXT185Display: No market data available for currency ID: 1
I (52890) WXT185Display: Screensaver content updated
I (52890) WXT185Display: Drawing K-line chart
W (52900) WXT185Display: No market data available for currency ID: 1
I (53750) WXT185Display: Screensaver timer callback triggered
I (53750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (54750) WXT185Display: Screensaver timer callback triggered
I (54750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (55750) WXT185Display: Screensaver timer callback triggered
I (55750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (56750) WXT185Display: Screensaver timer callback triggered
I (56750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (57750) WXT185Display: Screensaver timer callback triggered
I (57750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (57790) WXT185Display: Crypto update timer triggered
I (57920) WXT185Display: Checking device state for network ready
I (57920) WXT185Display: Network is ready, current state: 3
I (57920) WXT185Display: Connecting to BiJie coins service
W (57920) WXT185Display: Already connecting to BiJie coins, skipping
I (57930) WXT185Display: Updating crypto data from BiJie service
W (57930) WXT185Display: BiJie coins service not connected
I (57940) WXT185Display: Updating screensaver content
W (57940) WXT185Display: No market data available for currency ID: 1
I (57950) WXT185Display: Screensaver content updated
I (57950) WXT185Display: Drawing K-line chart
W (57960) WXT185Display: No market data available for currency ID: 1
I (58750) WXT185Display: Screensaver timer callback triggered
I (58750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (59750) WXT185Display: Screensaver timer callback triggered
I (59750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (60750) WXT185Display: Screensaver timer callback triggered
I (60750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (61750) WXT185Display: Screensaver timer callback triggered
I (61750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (62230) SystemInfo: free sram: 74319 minimal sram: 64859
I (62750) WXT185Display: Screensaver timer callback triggered
I (62750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (62790) WXT185Display: Crypto update timer triggered
I (63200) WXT185Display: Checking device state for network ready
I (63200) WXT185Display: Network is ready, current state: 3
I (63200) WXT185Display: Connecting to BiJie coins service
W (63200) WXT185Display: Already connecting to BiJie coins, skipping
I (63210) WXT185Display: Updating crypto data from BiJie service
W (63210) WXT185Display: BiJie coins service not connected
I (63220) WXT185Display: Updating screensaver content
W (63220) WXT185Display: No market data available for currency ID: 1
I (63230) WXT185Display: Screensaver content updated
I (63230) WXT185Display: Drawing K-line chart
W (63240) WXT185Display: No market data available for currency ID: 1
I (63750) WXT185Display: Screensaver timer callback triggered
I (63750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (64750) WXT185Display: Screensaver timer callback triggered
I (64750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (65750) WXT185Display: Screensaver timer callback triggered
I (65750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (66750) WXT185Display: Screensaver timer callback triggered
I (66750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (67750) WXT185Display: Screensaver timer callback triggered
I (67750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (67790) WXT185Display: Crypto update timer triggered
I (67850) WXT185Display: Checking device state for network ready
I (67850) WXT185Display: Network is ready, current state: 3
I (67850) WXT185Display: Connecting to BiJie coins service
W (67850) WXT185Display: Already connecting to BiJie coins, skipping
I (67860) WXT185Display: Updating crypto data from BiJie service
W (67860) WXT185Display: BiJie coins service not connected
I (67870) WXT185Display: Updating screensaver content
W (67870) WXT185Display: No market data available for currency ID: 1
I (67880) WXT185Display: Screensaver content updated
I (67880) WXT185Display: Drawing K-line chart
W (67890) WXT185Display: No market data available for currency ID: 1
I (68750) WXT185Display: Screensaver timer callback triggered
I (68750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (69750) WXT185Display: Screensaver timer callback triggered
I (69750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (70750) WXT185Display: Screensaver timer callback triggered
I (70750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (71750) WXT185Display: Screensaver timer callback triggered
I (71750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (72230) SystemInfo: free sram: 73815 minimal sram: 64859
I (72750) WXT185Display: Screensaver timer callback triggered
I (72750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (72790) WXT185Display: Crypto update timer triggered
I (73170) WXT185Display: Checking device state for network ready
I (73170) WXT185Display: Network is ready, current state: 3
I (73170) WXT185Display: Connecting to BiJie coins service
W (73170) WXT185Display: Already connecting to BiJie coins, skipping
I (73180) WXT185Display: Updating crypto data from BiJie service
W (73180) WXT185Display: BiJie coins service not connected
I (73190) WXT185Display: Updating screensaver content
W (73190) WXT185Display: No market data available for currency ID: 1
I (73200) WXT185Display: Screensaver content updated
I (73200) WXT185Display: Drawing K-line chart
W (73210) WXT185Display: No market data available for currency ID: 1
I (73750) WXT185Display: Screensaver timer callback triggered
I (73750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (74750) WXT185Display: Screensaver timer callback triggered
I (74750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (75750) WXT185Display: Screensaver timer callback triggered
I (75750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (76750) WXT185Display: Screensaver timer callback triggered
I (76750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (77750) WXT185Display: Screensaver timer callback triggered
I (77750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (77790) WXT185Display: Crypto update timer triggered
I (77820) WXT185Display: Checking device state for network ready
I (77820) WXT185Display: Network is ready, current state: 3
I (77820) WXT185Display: Connecting to BiJie coins service
W (77820) WXT185Display: Already connecting to BiJie coins, skipping
I (77830) WXT185Display: Updating crypto data from BiJie service
W (77830) WXT185Display: BiJie coins service not connected
I (77840) WXT185Display: Updating screensaver content
W (77840) WXT185Display: No market data available for currency ID: 1
I (77850) WXT185Display: Screensaver content updated
I (77850) WXT185Display: Drawing K-line chart
W (77860) WXT185Display: No market data available for currency ID: 1
I (78750) WXT185Display: Screensaver timer callback triggered
I (78750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (79750) WXT185Display: Screensaver timer callback triggered
I (79750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (80750) WXT185Display: Screensaver timer callback triggered
I (80750) WXT185Display: Screensaver timeout reached, entering screensaver mode
I (81750) WXT185Display: Screensaver timer callback triggered
I (81750) WXT185Display: Screensaver timeout reached, entering screensaver mode

Traceback (most recent call last):
  File "E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py", line 11, in <module>
    sys.exit(subprocess.run([sys.executable, '-m', 'esp_idf_monitor'] + sys.argv[1:]).returncode)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "subprocess.py", line 550, in run
  File "subprocess.py", line 1199, in communicate
  File "subprocess.py", line 1262, in wait
  File "subprocess.py", line 1543, in _wait
KeyboardInterrupt
idf_monitor failed with exit code 3221225786, output of the command is in the E:\AI\xiaozhi-esp32\build\log\idf_py_stderr_output_24644 and E:\AI\xiaozhi-esp32\build\log\idf_py_stdout_output_24644

e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d17
--- 0x40048d17: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa444 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa444h (2073668) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa464
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x5bac data starts 0x2fa46c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa46c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa46c vaddr=3fc9dd00 size=05bach ( 23468) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa46c, size=0x5bac, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bc90 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bc90h (1686672) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bcb0
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x2cd0 data starts 0x49bcb8
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bcb8 load_addr 0x3fca38ac
I (548) esp_image: segment 3: paddr=0049bcb8 vaddr=3fca38ac size=02cd0h ( 11472) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bcb8, size=0x2cd0, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49e988
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49e990
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49e990 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049e990 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049e990, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4664
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (664) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (671) esp_image: segment data length 0x20 data starts 0x4b466c
V (676) esp_image: MMU page size 0x10000
V (680) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b466c load_addr 0x600fe000
I (688) esp_image: segment 5: paddr=004b466c vaddr=600fe000 size=00020h (    32) load
D (696) esp_image: free data page_count 0x00000200
D (700) bootloader_flash: rodata starts from paddr=0x004b466c, size=0x20, will be mapped to vaddr=0x3c000000
V (710) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (720) esp_image: image start 0x00100000 end of last section 0x004b468c
I (726) boot: Loaded app from partition at offset 0x100000
I (732) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (740) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (752) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa444
V (759) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (769) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (779) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bc90
--- 0x42000020: _stext at ??:?
V (786) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (796) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (811) octal_psram: vendor id    : 0x0d (AP)
I (811) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (822) octal_psram: VCC          : 0x01 (3V)
I (826) octal_psram: SRF          : 0x01 (Fast Refresh)
I (831) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (836) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (854) esp_psram: Found 8MB PSRAM device
I (858) esp_psram: Speed: 80MHz
I (861) cpu_start: Multicore app
I (876) cpu_start: Pro cpu start user code
I (876) cpu_start: cpu freq: 240000000 Hz
I (876) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (880) app_init: App version:      1.8.5
I (884) app_init: Compile time:     Aug 16 2025 15:35:20
I (889) app_init: ELF file SHA256:  3cfcf5a07...
I (893) app_init: ESP-IDF:          v5.5
I (897) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (915) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (920) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (925) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (938) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (945) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (950) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (961) main_task: Started on CPU0
I (971) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (971) main_task: Calling app_main()
I (1001) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1001) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1601) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1601) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1601) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1811) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1811) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1811) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1811) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1921) waveshare_lcd_1_85: I2C device added successfully
I (1921) waveshare_lcd_1_85: Initialize QSPI bus
I (1921) waveshare_lcd_1_85: Install panel IO
I (1921) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1951) st77916: LCD panel create success, version: 1.0.1
I (2201) Display: Power management not supported
I (2201) WXT185Display: Initializing WXT185 Display
I (2201) WXT185Display: Theme: light
I (2251) WXT185Display: Turning display on
I (2251) WXT185Display: Initialize LVGL library
I (2251) WXT185Display: Initialize LVGL port
I (2251) LVGL: Starting LVGL task
I (2251) WXT185Display: Adding LCD display
I (2261) WXT185Display: Initialized default settings:
I (2261) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2271) WXT185Display: Last activity time initialized to: ld
I (2271) WXT185Display: Screensaver timer created
I (2281) WXT185Display: Crypto update timer created
I (2281) WXT185Display: Screensaver time update timer created
I (2291) WXT185Display: BiJieCoins initialized
I (2291) WXT185Display: Setting up WXT185 UI
I (2291) WXT185Display: Created page view container
I (2301) WXT185Display: Enabling horizontal scrolling
I (2301) WXT185Display: Added touch event handlers to page view
I (2311) WXT185Display: Created common components
I (2311) WXT185Display: Creating chat page
I (2321) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2331) WXT185Display: Chat page creation completed
I (2331) WXT185Display: Created chat page
I (2331) WXT185Display: Creating crypto page
I (2341) WXT185Display: Added touch event handlers to crypto page begin
I (2381) WXT185Display: Crypto page creation completed
I (2381) WXT185Display: Created crypto page
I (2381) WXT185Display: Creating settings page
I (2381) WXT185Display: Settings page background created
I (2391) WXT185Display: Added touch event handlers to settings page begin
I (2401) WXT185Display: Settings title label created
I (2401) WXT185Display: Theme label created
I (2411) WXT185Display: Theme roller created
I (2421) WXT185Display: Default crypto label created
I (2421) WXT185Display: Default crypto roller created
I (2431) WXT185Display: K-line time label created
I (2431) WXT185Display: K-line time roller created
I (2441) WXT185Display: Screensaver label created
I (2441) WXT185Display: Screensaver switch created
I (2441) WXT185Display: Realtime crypto label created
I (2451) WXT185Display: Realtime crypto switch created
I (2451) WXT185Display: KLine crypto label created
I (2451) WXT185Display: KLine crypto switch created
I (2461) WXT185Display: Save button created
I (2461) WXT185Display: Save button label created
I (2461) WXT185Display: Settings page creation completed
I (2471) WXT185Display: Created settings page
I (2471) WXT185Display: Creating screensaver page
I (2481) WXT185Display: Added touch event handlers to screensaver page start
I (2481) WXT185Display: Added touch event handlers to screensaver page end
I (2501) WXT185Display: Screensaver page creation completed
I (2501) WXT185Display: Created screensaver page
I (2501) WXT185Display: Applying theme
I (2501) WXT185Display: Applying crypto page theme
I (2511) WXT185Display: Applying settings page theme
I (2511) WXT185Display: Applying screensaver theme
I (2521) WXT185Display: Theme applied successfully
I (2521) WXT185Display: Applied theme
I (2531) WXT185Display: Started screensaver timer
I (2531) WXT185Display: Crypto update timer started
I (2531) WXT185Display: Started crypto update timer
I (2541) WXT185Display: Connecting to BiJie coins service
I (2541) WXT185Display: Checking device state for network ready
I (2551) WXT185Display: Connected to BiJie coins
I (2551) WXT185Display: Switching to page 1
I (2561) WXT185Display: Switching to crypto page
I (2571) WXT185Display: WXT185 UI setup completed
I (2571) WXT185Display: Crypto update timer started
I (2571) WXT185Display: WXT185Display constructor completed
I (2581) button: IoT Button Version: 4.1.3
I (2581) waveshare_lcd_1_85: Initializing touch controller...
I (2591) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2591) waveshare_lcd_1_85: Initialize touch controller CST816S
E (2601) i2c.master: I2C transaction unexpected nack detected
E (2611) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2611) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2621) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2631) CST816S: read_id(181): I2C read failed
E (2631) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2641) CST816S: Initialization failed!
W (2641) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 1 of 3)
I (2751) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 2)
E (2761) i2c.master: I2C transaction unexpected nack detected
E (2761) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2761) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2761) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2771) CST816S: read_id(181): I2C read failed
E (2781) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2781) CST816S: Initialization failed!
W (2781) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 2 of 3)
I (2891) waveshare_lcd_1_85: Retrying touch controller initialization (attempt 3)
E (2901) i2c.master: I2C transaction unexpected nack detected
E (2901) i2c.master: s_i2c_synchronous_transaction(945): I2C transaction failed
E (2901) i2c.master: i2c_master_transmit_receive(1248): I2C transaction failed
E (2911) lcd_panel.io.i2c: panel_io_i2c_rx_buffer(145): i2c transaction failed
E (2911) CST816S: read_id(181): I2C read failed
E (2921) CST816S: esp_lcd_touch_new_i2c_cst816s(86): Read ID failed
E (2921) CST816S: Initialization failed!
W (2931) waveshare_lcd_1_85: Failed to initialize CST816S touch controller: ESP_ERR_INVALID_STATE (attempt 3 of 3)
E (2941) waveshare_lcd_1_85: Failed to initialize CST816S touch controller after 3 attempts
I (2941) MCP: Add tool: self.ui.uppage
I (2951) MCP: Add tool: self.ui.downpage
I (2951) Backlight: Set brightness to 75
I (2961) Application: STATE: starting
I (2961) WXT185Display: Device state changed from 0 to 1
I (2961) WXT185Display: Other device state change, treating as user activity
I (2971) WXT185Display: User activity detected, updating last activity time
I (2971) WXT185Display: Scroll end: (360, 0)
I (2981) NoAudioCodec: Simplex channels created
I (2981) WXT185Display: Current page index: 1
I (2991) AudioCodec: Set input enable to true
I (2991) AudioCodec: Set output enable to true
I (3001) AudioCodec: Audio codec started
I (3011) pp: pp rom version: e7ae62f
I (3011) net80211: net80211 rom version: e7ae62f
I (3021) wifi:wifi driver task: 3fcde2a0, prio:23, stack:6144, core=0
I (3021) wifi:wifi firmware version: f3dbad7
I (3021) wifi:wifi certification version: v7.0
I (3021) wifi:config NVS flash: disabled
I (3031) wifi:config nano formatting: enabled
I (3031) wifi:Init data frame dynamic rx buffer num: 8
I (3041) wifi:Init dynamic rx mgmt buffer num: 5
I (3041) wifi:Init management short buffer num: 32
I (3051) wifi:Init dynamic tx buffer num: 32
I (3051) wifi:Init static tx FG buffer num: 2
I (3051) wifi:Init static rx buffer size: 1600
I (3061) wifi:Init static rx buffer num: 6
I (3061) wifi:Init dynamic rx buffer num: 8
I (3071) wifi_init: rx ba win: 6
I (3071) wifi_init: accept mbox: 6
I (3071) wifi_init: tcpip mbox: 32
I (3071) wifi_init: udp mbox: 6
I (3081) wifi_init: tcp mbox: 6
I (3081) wifi_init: tcp tx win: 5760
I (3081) wifi_init: tcp rx win: 5760
I (3091) wifi_init: tcp mss: 1440
I (3101) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (3141) wifi:mode : sta (30:ed:a0:2a:12:00)
I (3141) wifi:enable tsf
I (3531) WXT185Display: Screensaver timer callback triggered
I (3531) WXT185Display: Device is in starting mode, skip screensaver


e:\AI\xiaozhi-esp32>idf.py monitor
Executing action: monitor
Serial port COM8
Connecting...
Detecting chip type... ESP32-S3
Running idf_monitor in directory E:\AI\xiaozhi-esp32
Executing "E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe E:\Espressif\frameworks\esp-idf-v5.5\tools/idf_monitor.py -p COM8 -b 115200 --toolchain-prefix xtensa-esp32s3-elf- --decode-coredumps info --target esp32s3 --revision 0 E:\AI\xiaozhi-esp32\build\xiaozhi.elf E:\AI\xiaozhi-esp32\build\bootloader\bootloader.elf --force-color -m 'E:\Espressif\python_env\idf5.5_py3.11_env\Scripts\python.exe' 'E:\Espressif\frameworks\esp-idf-v5.5\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM8 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM8 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ESP-ROM:esp32s3-20210327
Build:Mar 27 2021
rst:0x15 (USB_UART_CHIP_RESET),boot:0xa (SPI_FAST_FLASH_BOOT)
Saved PC:0x40048d00
--- 0x40048d00: uart_rx_one_char in ROM
SPIWP:0xee
mode:DIO, clock div:2
load:0x3fce2820,len:0x23f4
load:0x403c8700,len:0xf68
--- 0x403c8700: _stext at ??:?
load:0x403cb700,len:0x39a4
entry 0x403c89f0
--- 0x403c89f0: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/bootloader/subproject/main/bootloader_start.c:25
I (32) boot: ESP-IDF v5.5 2nd stage bootloader
I (33) boot: compile time Aug 16 2025 15:29:24
I (33) boot: Multicore bootloader
D (33) bootloader_flash: non-XMC chip detected by SFDP Read (FF), skip.
D (39) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (45) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (52) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (58) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (65) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
D (71) bootloader_flash: mmu set block paddr=0x00000000 (was 0xffffffff)
I (77) boot: chip revision: v0.2
I (80) boot: efuse block revision: v1.3
D (84) boot.esp32s3: magic e9
D (87) boot.esp32s3: segments 03
D (90) boot.esp32s3: spi_mode 02
D (93) boot.esp32s3: spi_speed 00
D (96) boot.esp32s3: spi_size 04
I (99) boot.esp32s3: Boot SPI Speed : 40MHz
I (102) boot.esp32s3: SPI Mode       : DIO
I (106) boot.esp32s3: SPI Flash Size : 16MB
D (110) boot: Enabling RTCWDT(9000 ms)
I (114) boot: Enabling RNG early entropy source...
D (118) bootloader_flash: rodata starts from paddr=0x00008000, size=0xc00, will be mapped to vaddr=0x3c000000
V (128) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (138) boot: mapped partition table 0x8000 at 0x3c008000
D (143) flash_parts: partition table verified, 7 entries
I (148) boot: Partition Table:
I (151) boot: ## Label            Usage          Type ST Offset   Length
D (158) boot: load partition table entry 0x3c008000
D (162) boot: type=1 subtype=2
I (165) boot:  0 nvs              WiFi data        01 02 00009000 00004000
D (172) boot: load partition table entry 0x3c008020
D (176) boot: type=1 subtype=0
I (179) boot:  1 otadata          OTA data         01 00 0000d000 00002000
D (185) boot: load partition table entry 0x3c008040
D (190) boot: type=1 subtype=1
I (193) boot:  2 phy_init         RF data          01 01 0000f000 00001000
D (199) boot: load partition table entry 0x3c008060
D (204) boot: type=1 subtype=82
I (207) boot:  3 model            Unknown data     01 82 00010000 000f0000
D (214) boot: load partition table entry 0x3c008080
D (218) boot: type=0 subtype=10
I (221) boot:  4 ota_0            OTA app          00 10 00100000 00600000
D (228) boot: load partition table entry 0x3c0080a0
D (232) boot: type=0 subtype=11
I (235) boot:  5 ota_1            OTA app          00 11 00700000 00600000
I (242) boot: End of partition table
D (245) boot: OTA data offset 0xd000
D (248) bootloader_flash: rodata starts from paddr=0x0000d000, size=0x2000, will be mapped to vaddr=0x3c000000
V (258) bootloader_flash: after mapping, starting from paddr=0x00000000 and vaddr=0x3c000000, 0x10000 bytes are mapped
D (268) boot: otadata[0]: sequence values 0x00000001
D (273) boot: otadata[1]: sequence values 0xffffffff
D (278) boot_comm: Only otadata[0] is valid
D (282) boot: Active otadata[0]
D (285) boot: Mapping seq 0 -> OTA slot 0
D (288) boot: Trying partition index 0 offs 0x100000 size 0x600000
D (294) esp_image: reading image header @ 0x100000
D (299) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (305) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (312) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (318) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (325) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (331) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (338) esp_image: loading segment header 0 at offset 0x100018
D (343) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
D (350) bootloader_flash: mmu set block paddr=0x00100000 (was 0xffffffff)
V (356) esp_image: segment data length 0x1fa804 data starts 0x100020
V (362) esp_image: MMU page size 0x10000
V (366) esp_image: segment 0 map_segment 1 segment_data_offs 0x100020 load_addr 0x3c1a0020
I (374) esp_image: segment 0: paddr=00100020 vaddr=3c1a0020 size=1fa804h (2074628) map
D (382) esp_image: free data page_count 0x00000200
D (386) esp_image: skipping checksum for segment
V (390) esp_image: loading segment header 1 at offset 0x2fa824
D (396) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
D (403) bootloader_flash: mmu set block paddr=0x002f0000 (was 0xffffffff)
V (409) esp_image: segment data length 0x57ec data starts 0x2fa82c
V (415) esp_image: MMU page size 0x10000
V (419) esp_image: segment 1 map_segment 0 segment_data_offs 0x2fa82c load_addr 0x3fc9dd00
I (427) esp_image: segment 1: paddr=002fa82c vaddr=3fc9dd00 size=057ech ( 22508) load
D (434) esp_image: free data page_count 0x00000200
D (439) bootloader_flash: rodata starts from paddr=0x002fa82c, size=0x57ec, will be mapped to vaddr=0x3c000000
V (448) bootloader_flash: after mapping, starting from paddr=0x002f0000 and vaddr=0x3c000000, 0x20000 bytes are mapped
V (462) esp_image: loading segment header 2 at offset 0x300018
D (464) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
D (471) bootloader_flash: mmu set block paddr=0x00300000 (was 0xffffffff)
V (477) esp_image: segment data length 0x19bea0 data starts 0x300020
V (483) esp_image: MMU page size 0x10000
V (487) esp_image: segment 2 map_segment 1 segment_data_offs 0x300020 load_addr 0x42000020
--- 0x42000020: _stext at ??:?
I (495) esp_image: segment 2: paddr=00300020 vaddr=42000020 size=19bea0h (1687200) map
D (503) esp_image: free data page_count 0x00000200
D (507) esp_image: skipping checksum for segment
V (512) esp_image: loading segment header 3 at offset 0x49bec0
D (517) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (524) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (530) esp_image: segment data length 0x3090 data starts 0x49bec8
V (536) esp_image: MMU page size 0x10000
V (540) esp_image: segment 3 map_segment 0 segment_data_offs 0x49bec8 load_addr 0x3fca34ec
I (548) esp_image: segment 3: paddr=0049bec8 vaddr=3fca34ec size=03090h ( 12432) load
D (555) esp_image: free data page_count 0x00000200
D (560) bootloader_flash: rodata starts from paddr=0x0049bec8, size=0x3090, will be mapped to vaddr=0x3c000000
V (569) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (582) esp_image: loading segment header 4 at offset 0x49ef58
D (585) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
D (592) bootloader_flash: mmu set block paddr=0x00490000 (was 0xffffffff)
V (598) esp_image: segment data length 0x15cd4 data starts 0x49ef60
V (604) esp_image: MMU page size 0x10000
V (608) esp_image: segment 4 map_segment 0 segment_data_offs 0x49ef60 load_addr 0x40378000
--- 0x40378000: _WindowOverflow4 at E:/Espressif/frameworks/esp-idf-v5.5/components/xtensa/xtensa_vectors.S:2027
I (616) esp_image: segment 4: paddr=0049ef60 vaddr=40378000 size=15cd4h ( 89300) load
D (624) esp_image: free data page_count 0x00000200
D (628) bootloader_flash: rodata starts from paddr=0x0049ef60, size=0x15cd4, will be mapped to vaddr=0x3c000000
V (638) bootloader_flash: after mapping, starting from paddr=0x00490000 and vaddr=0x3c000000, 0x30000 bytes are mapped
V (663) esp_image: loading segment header 5 at offset 0x4b4c34
D (663) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
D (664) bootloader_flash: mmu set block paddr=0x004b0000 (was 0xffffffff)
V (671) esp_image: segment data length 0x20 data starts 0x4b4c3c
V (676) esp_image: MMU page size 0x10000
V (680) esp_image: segment 5 map_segment 0 segment_data_offs 0x4b4c3c load_addr 0x600fe000
I (688) esp_image: segment 5: paddr=004b4c3c vaddr=600fe000 size=00020h (    32) load
D (696) esp_image: free data page_count 0x00000200
D (700) bootloader_flash: rodata starts from paddr=0x004b4c3c, size=0x20, will be mapped to vaddr=0x3c000000
V (710) bootloader_flash: after mapping, starting from paddr=0x004b0000 and vaddr=0x3c000000, 0x10000 bytes are mapped
V (720) esp_image: image start 0x00100000 end of last section 0x004b4c5c
I (726) boot: Loaded app from partition at offset 0x100000
I (732) boot: Disabling RNG early entropy source...
D (736) boot: Mapping segment 0 as DROM
D (740) boot: Mapping segment 2 as IROM
D (743) boot: calling set_cache_and_start_app
D (747) boot: configure drom and irom and start
V (752) boot: rodata starts from paddr=0x00100020, vaddr=0x3c1a0020, size=0x1fa804
V (759) boot: after mapping rodata, starting from paddr=0x00100000 and vaddr=0x3c1a0000, 0x200000 bytes are mapped
V (769) boot: mapped one page of the rodata, from paddr=0x00100000 and vaddr=0x3dff0000, 0x10000 bytes are mapped
V (779) boot: text starts from paddr=0x00300020, vaddr=0x42000020, size=0x19bea0
--- 0x42000020: _stext at ??:?
V (786) boot: after mapping text, starting from paddr=0x00300000 and vaddr=0x42000000, 0x1a0000 bytes are mapped
D (796) boot: start: 0x40379774
--- 0x40379774: call_start_cpu0 at E:/Espressif/frameworks/esp-idf-v5.5/components/esp_system/port/cpu_start.c:357
I (811) octal_psram: vendor id    : 0x0d (AP)
I (811) octal_psram: dev id       : 0x02 (generation 3)
I (811) octal_psram: density      : 0x03 (64 Mbit)
I (813) octal_psram: good-die     : 0x01 (Pass)
I (817) octal_psram: Latency      : 0x01 (Fixed)
I (822) octal_psram: VCC          : 0x01 (3V)
I (826) octal_psram: SRF          : 0x01 (Fast Refresh)
I (831) octal_psram: BurstType    : 0x01 (Hybrid Wrap)
I (836) octal_psram: BurstLen     : 0x01 (32 Byte)
I (840) octal_psram: Readlatency  : 0x02 (10 cycles@Fixed)
I (845) octal_psram: DriveStrength: 0x00 (1/1)
I (850) MSPI Timing: PSRAM timing tuning index: 5
I (854) esp_psram: Found 8MB PSRAM device
I (858) esp_psram: Speed: 80MHz
I (861) cpu_start: Multicore app
I (876) cpu_start: Pro cpu start user code
I (876) cpu_start: cpu freq: 240000000 Hz
I (876) app_init: Application information:
I (876) app_init: Project name:     xiaozhi
I (880) app_init: App version:      1.8.5
I (884) app_init: Compile time:     Aug 16 2025 15:35:20
I (889) app_init: ELF file SHA256:  9b42c358a...
I (893) app_init: ESP-IDF:          v5.5
I (897) efuse_init: Min chip rev:     v0.0
I (900) efuse_init: Max chip rev:     v0.99
I (904) efuse_init: Chip rev:         v0.2
I (908) heap_init: Initializing. RAM available for dynamic allocation:
I (915) heap_init: At 3FCAD410 len 0003C300 (240 KiB): RAM
I (920) heap_init: At 3FCE9710 len 00005724 (21 KiB): RAM
I (925) heap_init: At 600FE020 len 00001FB8 (7 KiB): RTCRAM
I (930) esp_psram: Adding pool of 8192K of PSRAM memory to heap allocator
I (938) spi_flash: detected chip: winbond
I (940) spi_flash: flash io: dio
I (945) sleep_gpio: Configure to isolate all GPIO pins in sleep state
I (950) sleep_gpio: Enable automatic switching of GPIO sleep configuration
I (956) esp_core_dump_uart: Init core dump to UART
I (961) main_task: Started on CPU0
I (971) esp_psram: Reserving pool of 64K of internal memory for DMA/internal allocations
I (971) main_task: Calling app_main()
I (1001) Board: UUID=5e2d6a41-23e8-4250-af53-838145680552 SKU=esp32-s3-touch-lcd-1.85
I (1001) waveshare_lcd_1_85: Initialize TCA9554 bus
I (1601) waveshare_lcd_1_85: Initialize TCA9554 bus success, io_expander: 0x3fcec9e4
I (1601) waveshare_lcd_1_85: I2C bus created successfully (attempt 1)
W (1601) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND (attempt 1)
I (1811) waveshare_lcd_1_85: Retrying I2C initialization (attempt 2 of 3)
I (1811) waveshare_lcd_1_85: I2C bus created successfully (attempt 2)
I (1811) waveshare_lcd_1_85: CST816S touch controller found on I2C bus at address 0x15
I (1811) waveshare_lcd_1_85: CST816S touch controller responding after reset
I (1921) waveshare_lcd_1_85: I2C device added successfully
I (1921) waveshare_lcd_1_85: Initialize QSPI bus
I (1921) waveshare_lcd_1_85: Install panel IO
I (1921) waveshare_lcd_1_85: Install ST77916 panel driver
-------------------------------------- Version selection --------------------------------------
Register 0x04 data: 00 02 7f 7f
LCD communication parameters are set successfully -- SPI
Vendor-specific initialization for case 2.
------------------------------------- End of version selection-------------------------------------
I (1951) st77916: LCD panel create success, version: 1.0.1
I (2201) Display: Power management not supported
I (2201) WXT185Display: Initializing WXT185 Display
I (2201) WXT185Display: Theme: light
I (2251) WXT185Display: Turning display on
I (2251) WXT185Display: Initialize LVGL library
I (2251) WXT185Display: Initialize LVGL port
I (2251) LVGL: Starting LVGL task
I (2251) WXT185Display: Adding LCD display
I (2261) WXT185Display: Initialized default settings:
I (2261) WXT185Display: Theme: light, Crypto: 0, KLine Freq: 3
I (2271) WXT185Display: Last activity time initialized to: ld
I (2271) WXT185Display: Screensaver timer created
I (2281) WXT185Display: Crypto update timer created
I (2281) WXT185Display: Screensaver time update timer created
I (2291) WXT185Display: BiJieCoins initialized
I (2291) WXT185Display: Setting up WXT185 UI
I (2291) WXT185Display: Created page view container
I (2301) WXT185Display: Enabling horizontal scrolling
I (2301) WXT185Display: Added touch event handlers to page view
I (2311) WXT185Display: Created common components
I (2311) WXT185Display: Creating chat page
I (2321) WXT185Display: Enabling horizontal scrolling to chat page begin
I (2331) WXT185Display: Chat page creation completed
I (2331) WXT185Display: Created chat page
I (2331) WXT185Display: Creating crypto page
I (2341) WXT185Display: Added touch event handlers to crypto page begin
I (2381) WXT185Display: Crypto page creation completed
I (2381) WXT185Display: Created crypto page
I (2381) WXT185Display: Creating settings page
I (2381) WXT185Display: Settings page background created
I (2391) WXT185Display: Added touch event handlers to settings page begin
I (2401) WXT185Display: Settings title label created
I (2401) WXT185Display: Theme label created
I (2411) WXT185Display: Theme roller created
I (2421) WXT185Display: Default crypto label created
I (2421) WXT185Display: Default crypto roller created
I (2431) WXT185Display: K-line time label created
I (2431) WXT185Display: K-line time roller created
I (2441) WXT185Display: Screensaver label created
I (2441) WXT185Display: Screensaver switch created
I (2441) WXT185Display: Realtime crypto label created
I (2441) WXT185Display: Realtime crypto switch created
I (2451) WXT185Display: KLine crypto label created
I (2451) WXT185Display: KLine crypto switch created
I (2461) WXT185Display: Save button created
I (2461) WXT185Display: Save button label created
I (2461) WXT185Display: Settings page creation completed
I (2471) WXT185Display: Created settings page
I (2471) WXT185Display: Creating screensaver page
I (2481) WXT185Display: Added touch event handlers to screensaver page start
I (2481) WXT185Display: Added touch event handlers to screensaver page end
I (2501) WXT185Display: Screensaver page creation completed
I (2501) WXT185Display: Created screensaver page
I (2501) WXT185Display: Applying theme
I (2501) WXT185Display: Applying crypto page theme
I (2511) WXT185Display: Applying settings page theme
I (2511) WXT185Display: Applying screensaver theme
I (2521) WXT185Display: Theme applied successfully
I (2521) WXT185Display: Applied theme
I (2531) WXT185Display: Started screensaver timer
I (2531) WXT185Display: Crypto update timer started
I (2531) WXT185Display: Started crypto update timer
I (2541) WXT185Display: Connecting to BiJie coins service
I (2541) WXT185Display: Checking device state for network ready
I (2551) WXT185Display: Connected to BiJie coins
I (2551) WXT185Display: Switching to page 1
I (2561) WXT185Display: Switching to crypto page
I (2571) WXT185Display: WXT185 UI setup completed
I (2571) WXT185Display: Crypto update timer started
I (2571) WXT185Display: WXT185Display constructor completed
I (2581) button: IoT Button Version: 4.1.3
I (2581) waveshare_lcd_1_85: Initializing touch controller...
I (2591) waveshare_lcd_1_85: Touch I2C config - SDA: 1, SCL: 3, Port: 1, Address: 0x15
I (2591) waveshare_lcd_1_85: Initialize touch controller CST816S
I (2601) waveshare_lcd_1_85: Probing for CST816S touch controller at address 0x15 with 100kHz I2C speed
W (2611) waveshare_lcd_1_85: CST816S touch controller not found on I2C bus at address 0x15, error: ESP_ERR_NOT_FOUND
I (2621) waveshare_lcd_1_85: Retrying with 400kHz I2C speed
W (2621) waveshare_lcd_1_85: Retry with 400kHz I2C speed also failed, error: ESP_ERR_NOT_FOUND
I (2631) waveshare_lcd_1_85: Trying main I2C bus for touch controller
I (2641) waveshare_lcd_1_85: Main I2C config - SDA: 11, SCL: 10
E (2641) i2c.master: Cannot delete I2C bus(1): devices are still attached, please remove all devices and then delete bus
W (2661) waveshare_lcd_1_85: CST816S touch controller not found on main I2C bus at address 0x15 with 100kHz, error: ESP_ERR_NOT_FOUND
W (2671) waveshare_lcd_1_85: CST816S touch controller not found on main I2C bus at address 0x15 with 400kHz, error: ESP_ERR_NOT_FOUND
W (2681) waveshare_lcd_1_85: Touch controller initialization failed, skipping touch functionality
I (2691) MCP: Add tool: self.ui.uppage
I (2691) MCP: Add tool: self.ui.downpage
I (2691) Backlight: Set brightness to 75
I (2701) Application: STATE: starting
I (2701) WXT185Display: Device state changed from 0 to 1
I (2711) WXT185Display: Other device state change, treating as user activity
I (2711) WXT185Display: User activity detected, updating last activity time
I (2721) NoAudioCodec: Simplex channels created
I (2731) AudioCodec: Set input enable to true
I (2731) AudioCodec: Set output enable to true
I (2731) AudioCodec: Audio codec started
I (2751) pp: pp rom version: e7ae62f
I (2751) net80211: net80211 rom version: e7ae62f
I (2761) wifi:wifi driver task: 3fcde178, prio:23, stack:6144, core=0
I (2761) wifi:wifi firmware version: f3dbad7
I (2761) wifi:wifi certification version: v7.0
I (2761) wifi:config NVS flash: disabled
I (2761) wifi:config nano formatting: enabled
I (2771) wifi:Init data frame dynamic rx buffer num: 8
I (2771) wifi:Init dynamic rx mgmt buffer num: 5
I (2781) wifi:Init management short buffer num: 32
I (2781) wifi:Init dynamic tx buffer num: 32
I (2781) wifi:Init static tx FG buffer num: 2
I (2791) wifi:Init static rx buffer size: 1600
I (2791) wifi:Init static rx buffer num: 6
I (2801) wifi:Init dynamic rx buffer num: 8
I (2801) wifi_init: rx ba win: 6
I (2801) wifi_init: accept mbox: 6
I (2811) wifi_init: tcpip mbox: 32
I (2811) wifi_init: udp mbox: 6
I (2811) wifi_init: tcp mbox: 6
I (2821) wifi_init: tcp tx win: 5760
I (2821) wifi_init: tcp rx win: 5760
I (2821) wifi_init: tcp mss: 1440
I (2831) phy_init: phy_version 701,f4f1da3a,Mar  3 2025,15:50:10
I (2871) wifi:mode : sta (30:ed:a0:2a:12:00)
I (2871) wifi:enable tsf
I (2971) WXT185Display: Scroll end: (360, 0)
I (2971) WXT185Display: Current page index: 1
I (3531) WXT185Display: Screensaver timer callback triggered
I (3531) WXT185Display: Device is in starting mode, skip screensaver
I (4531) WXT185Display: Screensaver timer callback triggered
I (4531) WXT185Display: Device is in starting mode, skip screensaver
I (5291) wifi: Found AP: BSO, BSSID: c2:b3:ec:f5:56:c2, RSSI: -43, Channel: 11, Authmode: 3
I (5291) wifi: Found AP: BSO, BSSID: c4:17:0e:4b:bd:b8, RSSI: -88, Channel: 11, Authmode: 3
W (5301) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
I (5531) WXT185Display: Screensaver timer callback triggered
I (5531) WXT185Display: Device is in starting mode, skip screensaver
I (6591) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (6591) wifi:state: init -> auth (0xb0)
I (6591) WXT185Display: Screensaver timer callback triggered
I (6591) WXT185Display: Device is in starting mode, skip screensaver
I (7531) WXT185Display: Screensaver timer callback triggered
I (7531) WXT185Display: Device is in starting mode, skip screensaver
I (7571) WXT185Display: Crypto update timer triggered
I (7591) wifi:state: auth -> init (0x200)
I (7591) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7591) wifi: Reconnecting BSO (attempt 1 / 5)
I (7621) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (7621) wifi:state: init -> auth (0xb0)
I (7651) wifi:state: auth -> assoc (0x0)
I (7651) wifi:state: assoc -> run (0x10)
I (7681) wifi:connected with BSO, aid = 2, channel 11, BW20, bssid = c4:17:0e:4b:bd:b8
I (7681) wifi:security: WPA2-PSK, phy: bgn, rssi: -95
I (7681) wifi:pm start, type: 1

I (7681) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (7691) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
I (7771) wifi:AP's beacon interval = 102400 us, DTIM period = 1
I (7861) WXT185Display: Checking device state for network ready
I (7891) wifi:<ba-add>idx:0 (ifx:0, c4:17:0e:4b:bd:b8), tid:0, ssn:0, winSize:64
I (8531) WXT185Display: Screensaver timer callback triggered
I (8531) WXT185Display: Device is in starting mode, skip screensaver
E (8861) WXT185Display: Network is not ready after waiting
W (8861) WXT185Display: Network not ready, skipping crypto data update
I (8891) wifi: Got IP: 192.168.3.147
I (8891) esp_netif_handlers: sta ip: 192.168.3.147, mask: 255.255.255.0, gw: 192.168.3.1
I (8891) Application: STATE: activating
I (8891) WXT185Display: Device state changed from 1 to 8
I (8891) WXT185Display: Other device state change, treating as user activity
I (8901) WXT185Display: User activity detected, updating last activity time
I (8911) Ota: Current version: 1.8.5
I (9041) esp-x509-crt-bundle: Certificate validated
I (9531) WXT185Display: Screensaver timer callback triggered
I (9531) WXT185Display: Device is in activating mode, skip screensaver
I (9711) Ota: Current is the latest version
I (9711) Ota: Running partition: ota_0
I (9711) MCP: Add tool: self.get_device_status
I (9711) MCP: Add tool: self.audio_speaker.set_volume
I (9711) MCP: Add tool: self.screen.set_brightness
I (9721) MCP: Add tool: self.screen.set_theme
I (9721) MQTT: Connecting to endpoint mqtt.xiaozhi.me
I (9831) esp-x509-crt-bundle: Certificate validated
I (10281) MQTT: Connected to endpoint
I (10281) Application: STATE: idle
I (10281) WXT185Display: Device state changed from 8 to 3
I (10281) WXT185Display: Device entered idle state
I (10281) WXT185Display: Device idle, updating activity time for screensaver
I (10291) WXT185Display: Setting emotion: neutral
I (10301) MODEL_LOADER: The storage free size is 20864 KB
I (10301) MODEL_LOADER: The partition size is 960 KB
I (10301) MODEL_LOADER: Successfully load srmodels
I (10311) AfeWakeWord: Model 0: wn9_nihaoxiaozhi_tts
I (10311) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v4, mode:0, p:0, (Jun 16 2025 16:18:15)
I (10381) AFE: AFE Version: (1MIC_V250121)
I (10391) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (10391) AFE: AFE Pipeline: [input] ->  -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| -> [output]
I (10401) AfeWakeWord: Audio detection task started, feed size: 512 fetch size: 512
I (10421) WXT185Display: Setting chat message - Role: system, Content: ...
I (10421) WXT185Display: User activity detected, updating last activity time
I (10431) AudioService: Resampling audio from 16000 to 24000
I (10431) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
I (10451) SystemInfo: free sram: 68091 minimal sram: 67179
I (10531) WXT185Display: Screensaver timer callback triggered
I (10551) WXT185Display: Network is ready, current state: 3
I (10551) BiJieCoins: Connecting to BiJie WebSocket for currency 1: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (10551) UniversalWebSocket: Connecting to WebSocket server: wss://api.528btc.com.cn/xhj-gather-app/open/websocket/candle1m-1
I (11291) esp-x509-crt-bundle: Certificate validated
I (11531) WXT185Display: Screensaver timer callback triggered
I (11981) WXT185Display: Connected to BiJie coins WebSocket for currency 1
I (11981) WXT185Display: Getting K-line data for currency 1
I (11981) WXT185Display: Getting initial K-line data for currency 1
I (11981) BiJieCoins: Fetching K-line data from: https://www.528btc.com/e/extend/api/index.php
W (11991) BiJieCoins: K-line data request for currency 1 is already in progress, returning existing data
I (12001) BiJieCoins: Network interface: 0x3fca79a0
I (12011) WXT185Display: Received initial K-line data with 0 points
I (12011) UniversalHttpClient: Creating UniversalHttpClient with network interface: 0x3fca79a0
I (12021) WXT185Display: Drawing K-line chart
I (12031) BiJieCoins: Created UniversalHttpClient: 0x3fce879c
W (12031) WXT185Display: No market data available for currency ID: 1
I (12041) BiJieCoins: No proxy configured for K-line request
I (12051) BiJieCoins: Opening HTTP connection
I (12051) UniversalHttpClient: Opening HTTP connection - Method: POST, URL: https://www.528btc.com/e/extend/api/index.php?c=coin&id=1&limit=30&m=kline&slug=bitcoin&sortByDate=true&sortByDateRule=false&start=&symbol=BTC&type=2
I (12071) UniversalHttpClient: Using default SSL verification
I (12181) BiJieCoins: Received message for currency 1: {"timestamp":1755357540,"open":117730,"high":117750.38,"low":117729.99,"close":117750.38,"turnover":98097.2935432,"change":0.02,"change24h":0.41,"change7d":0.73,"change30d":-0.95,"change1h":-0.02,"changeYear":23.41,"changeNow":311.16,"currencyId":1,"circulationMarket":2345008791553.494}
I (12201) WXT185Display: Received market data callback for currency ID: 1
I (12531) WXT185Display: Screensaver timer callback triggered
I (12571) WXT185Display: Crypto update timer triggered
I (12591) WXT185Display: Checking device state for network ready
I (12591) WXT185Display: Network is ready, current state: 3
I (12591) WXT185Display: Updating crypto data from BiJie service
I (12591) WXT185Display: Drawing K-line chart
I (12601) WXT185Display: Latest market data: CoinMarketData{timestamp=1755357540,open=117730.000000,high=117750.382812,low=117729.992188,close=117750.382812,turnover=98097.296875,change=0.020000,change_24h=0.410000,change_7d=0.730000,change_30d=-0.950000,change_1h=-0.020000,change_year=23.410000,change_now=311.160004,currency_id=1,circulation_market=2345008791553.494141,kline_data_1m_size=0,kline_data_5m_size=0,kline_data_15m_size=0,kline_data_1h_size=0,kline_data_2h_size=0,kline_data_4h_size=0,kline_data_1d_size=0,kline_data_1w_size=0,kline_data_1mo_size=0,kline_data_3mo_size=0}
W (12651) WXT185Display: No K-line data available for currency ID: 1, frequency: 1h
I (12801) esp-x509-crt-bundle: Certificate validated
I (13341) UniversalHttpClient: HTTP connected
I (13531) WXT185Display: Screensaver timer callback triggered
I (13571) UniversalHttpClient: HTTP finished
I (13571) UniversalHttpClient: HTTP request completed successfully - Status: 200, Content-Length: -1
I (13571) BiJieCoins: Getting HTTP status code
I (13581) BiJieCoins: HTTP status code: 200
I (13581) BiJieCoins: Reading HTTP response data
I (13581) BiJieCoins: Response data size: 2768
I (13591) BiJieCoins: Response: [{"T":1755356400000,"c":117750.37,"h":117825,"l":117674.67,"o":117771.4,"v":13417058.15},{"T":1755352800000,"c":117771.39,"h":117771.4,"l":117550,"o":117623.53,"v":29780126.97},{"T":1755349200000,"c":117623.52,"h":117799.99,"l":117582.29,"o":117747.35,"v":62158897329.3},{"T":1755345600000,"c":117747.36,"h":117747.36,"l":117327.63,"o":117378.52,"v":63170720959.39},{"T":1755342000000,"c":117378.52,"h":117540,"l":117350.12,"o":117387.99,"v":65281680955.85},{"T":1755338400000,"c":117388,"h":117447.05,"l":117143.98,"o":117312,"v":64379333989.1},{"T":1755334800000,"c":117312,"h":117703.92,"l":117306,"o":117631.09,"v":63602384539.56},{"T":1755331200000,"c":117631.09,"h":117677.06,"l":117501.16,"o":117596.07,"v":64506152585.64},{"T":1755327600000,"c":117596.07,"h":117674.77,"l":117344.69,"o":117394.64,"v":65360543677.45},{"T":1755324000000,"c":117394.65,"h":117635.42,"l":117278,"o":117595.78,"v":63731865666.07},{"T":1755320400000,"c":117595.78,"h":117852.25,"l":117522.7,"o":117815.66,"v":66048014478.08},{"T":1755316800000,"c":117815.66,"h":117884,"l":117419.44,"o":117429.63,"v":64936435055.32},{"T":1755313200000,"c":117429.63,"h":117657.97,"l":117389.56,"o":117505.52,"v":65772856583.78},{"T":1755309600000,"c":117505.51,"h":117821.61,"l":117440.74,"o":117821.61,"v":67708396881.09},{"T":1755306000000,"c":117821.6,"h":117898.99,"l":117626.31,"o":117735.2,"v":68294171227.16},{"T":1755302400000,"c":117735.21,"h":117781.99,"l":117231.14,"o":117342.04,"v":68761024710.41},{"T":1755298800000,"c":117342.05,"h":117761.88,"l":117036.53,"o":117701.99,"v":68665353159.16},{"T":1755295200000,"c":117702,"h":117738.57,"l":117302.65,"o":117320.01,"v":67364724656.68},{"T":1755291600000,"c":117320.02,"h":117350,"l":117000,"o":117280.01,"v":68552973588.23},{"T":1755288000000,"c":117280,"h":117323.47,"l":116862.5,"o":116936.28,"v":72084769319.63},{"T":1755284400000,"c":116936.27,"h":117412.82,"l":116866,"o":117159.65,"v":71938962200.74},{"T":1755280800000,"c":117159.66,"h":117662.41,"l":117028.98,"o":117586.92,"v":71974829429.95},{"T":1755277200000,"c":117586.92,"h":117882.35,"l":117000,"o":117353.36,"v":74873937199.04},{"T":1755273600000,"c":117353.36,"h":117418.49,"l":116803.99,"o":117275.23,"v":73737767662.75},{"T":1755270000000,"c":117275.22,"h":117588.68,"l":116827.29,"o":117400,"v":76305380086.71},{"T":1755266400000,"c":117400,"h":118274,"l":117260,"o":117770.47,"v":75160732395.62},{"T":1755262800000,"c":117770.48,"h":118738,"l":117743.21,"o":118648.66,"v":76522529856.74},{"T":1755259200000,"c":118648.66,"h":119130.77,"l":118510,"o":119006.01,"v":83128714086.48},{"T":1755255600000,"c":119006.01,"h":119121.31,"l":118879.82,"o":118879.82,"v":90320944241.46},{"T":1755252000000,"c":118879.83,"h":119026.53,"l":118708,"o":118708,"v":91094133335.55}]
I (13841) BiJieCoins: Successfully parsed JSON response
I (13841) BiJieCoins: K-line data array size: 30
I (13841) BiJieCoins: Parsed 30 K-line data points
I (13851) BiJieCoins: Closing HTTP connection
I (13851) UniversalHttpClient: HTTP disconnected
I (13861) UniversalHttpClient: HTTP disconnected
I (13861) BiJieCoins: Calling callback with 30 K-line data points
I (13861) WXT185Display: Drawing K-line chart
I (13871) WXT185Display: Latest market data: CoinMarketData{timestamp=1755357540,open=117730.000000,high=117750.382812,low=117729.992188,close=117750.382812,turnover=98097.296875,change=0.020000,change_24h=0.410000,change_7d=0.730000,change_30d=-0.950000,change_1h=-0.020000,change_year=23.410000,change_now=311.160004,currency_id=1,circulation_market=2345008791553.494141,kline_data_1m_size=0,kline_data_5m_size=0,kline_data_15m_size=0,kline_data_1h_size=0,kline_data_2h_size=0,kline_data_4h_size=0,kline_data_1d_size=0,kline_data_1w_size=0,kline_data_1mo_size=0,kline_data_3mo_size=0}
W (13921) WXT185Display: No K-line data available for currency ID: 1, frequency: 1h
I (13951) BiJieCoins: Stored 30 1h K-line points for currency 1
I (13951) BiJieCoins: Verified storage: currency 1 type 2 has 30 points
I (13951) BiJieCoins: KLineDataTask completed, deleting task
I (14531) WXT185Display: Screensaver timer callback triggered
I (15361) BiJieCoins: Received message for currency 1: {"timestamp":1755357540,"open":117730,"high":117750.38,"low":117729.99,"close":117750.38,"turnover":102787.2909228,"change":0.02,"change24h":0.41,"change7d":0.73,"change30d":-0.95,"change1h":-0.02,"changeYear":23.41,"changeNow":311.16,"currencyId":1,"circulationMarket":2345008791553.494}
I (15381) WXT185Display: Received market data callback for currency ID: 1
I (15531) WXT185Display: Screensaver timer callback triggered
I (16531) WXT185Display: Screensaver timer callback triggered
I (17531) WXT185Display: Screensaver timer callback triggered
I (17571) WXT185Display: Crypto update timer triggered
I (18041) WXT185Display: Checking device state for network ready
I (18041) WXT185Display: Network is ready, current state: 3
I (18041) WXT185Display: Updating crypto data from BiJie service
I (18041) WXT185Display: Drawing K-line chart
I (18051) WXT185Display: Latest market data: CoinMarketData{timestamp=1755357540,open=117730.000000,high=117750.382812,low=117729.992188,close=117750.382812,turnover=102787.289062,change=0.020000,change_24h=0.410000,change_7d=0.730000,change_30d=-0.950000,change_1h=-0.020000,change_year=23.410000,change_now=311.160004,currency_id=1,circulation_market=2345008791553.494141,kline_data_1m_size=0,kline_data_5m_size=0,kline_data_15m_size=0,kline_data_1h_size=30,kline_data_2h_size=0,kline_data_4h_size=0,kline_data_1d_size=0,kline_data_1w_size=0,kline_data_1mo_size=0,kline_data_3mo_size=0}
I (18101) WXT185Display: K-line chart Y-axis range: min=116571.31, max=119363.45
I (18111) WXT185Display: Added 30 points to K-line chart for frequency 1h
I (18531) WXT185Display: Screensaver timer callback triggered


e:\AI\xiaozhi-esp32>if (ret != ESP_OK) {
此时不应有 !=。

e:\AI\xiaozhi-esp32>            ESP_LOGE(TAG, "Failed to initialize CST816S touch controller: %s", esp_err_to_name(ret));
'ESP_LOGE' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

e:\AI\xiaozhi-esp32>            return;
'return' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

e:\AI\xiaozhi-esp32>        }

e:\AI\xiaozhi-esp32>